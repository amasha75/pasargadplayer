!function(r){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=r,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=190)}([function(B,e,t){"use strict";t.r(e),t.d(e,"deepAccess",function(){return q}),t.d(e,"deepSetValue",function(){return z}),t.d(e,"internal",function(){return c}),t.d(e,"getPrebidInternal",function(){return L}),t.d(e,"bind",function(){return H}),t.d(e,"getUniqueIdentifierStr",function(){return p}),t.d(e,"generateUUID",function(){return l}),t.d(e,"getBidIdParameter",function(){return Y}),t.d(e,"tryAppendQueryString",function(){return J}),t.d(e,"parseQueryStringParameters",function(){return X}),t.d(e,"transformAdServerTargetingObj",function(){return Q}),t.d(e,"getAdUnitSizes",function(){return $}),t.d(e,"parseSizesInput",function(){return Z}),t.d(e,"parseGPTSingleSizeArray",function(){return f}),t.d(e,"parseGPTSingleSizeArrayToRtbSize",function(){return ee}),t.d(e,"getWindowTop",function(){return m}),t.d(e,"getWindowSelf",function(){return g}),t.d(e,"getWindowLocation",function(){return v}),t.d(e,"logMessage",function(){return y}),t.d(e,"logInfo",function(){return h}),t.d(e,"logWarn",function(){return O}),t.d(e,"logError",function(){return te}),t.d(e,"hasConsoleLogger",function(){return re}),t.d(e,"debugTurnedOn",function(){return I}),t.d(e,"createInvisibleIframe",function(){return ne}),t.d(e,"getParameterByName",function(){return ie}),t.d(e,"isA",function(){return A}),t.d(e,"isFn",function(){return x}),t.d(e,"isStr",function(){return S}),t.d(e,"isArray",function(){return E}),t.d(e,"isNumber",function(){return ae}),t.d(e,"isPlainObject",function(){return T}),t.d(e,"isBoolean",function(){return oe}),t.d(e,"isEmpty",function(){return w}),t.d(e,"isEmptyStr",function(){return se}),t.d(e,"_each",function(){return _}),t.d(e,"contains",function(){return de}),t.d(e,"_map",function(){return ce}),t.d(e,"hasOwn",function(){return ue}),t.d(e,"insertElement",function(){return pe}),t.d(e,"triggerPixel",function(){return le}),t.d(e,"callBurl",function(){return fe}),t.d(e,"insertHtmlIntoIframe",function(){return be}),t.d(e,"insertUserSyncIframe",function(){return me}),t.d(e,"createTrackPixelHtml",function(){return ge}),t.d(e,"createTrackPixelIframeHtml",function(){return ve}),t.d(e,"getValueString",function(){return C}),t.d(e,"uniques",function(){return ye}),t.d(e,"flatten",function(){return k}),t.d(e,"getBidRequest",function(){return he}),t.d(e,"getKeys",function(){return Oe}),t.d(e,"getValue",function(){return je}),t.d(e,"getKeyByValue",function(){return Ie}),t.d(e,"getBidderCodes",function(){return Ae}),t.d(e,"isGptPubadsDefined",function(){return xe}),t.d(e,"isApnGetTagDefined",function(){return Se}),t.d(e,"getHighestCpm",function(){return Ee}),t.d(e,"getOldestHighestCpmBid",function(){return Te}),t.d(e,"getLatestHighestCpmBid",function(){return we}),t.d(e,"shuffle",function(){return _e}),t.d(e,"adUnitsFilter",function(){return Ce}),t.d(e,"deepClone",function(){return ke}),t.d(e,"inIframe",function(){return Pe}),t.d(e,"isSafariBrowser",function(){return Re}),t.d(e,"replaceAuctionPrice",function(){return De}),t.d(e,"replaceClickThrough",function(){return Ue}),t.d(e,"timestamp",function(){return Be}),t.d(e,"getPerformanceNow",function(){return Ne}),t.d(e,"hasDeviceAccess",function(){return qe}),t.d(e,"checkCookieSupport",function(){return ze}),t.d(e,"delayExecution",function(){return Me}),t.d(e,"groupBy",function(){return Fe}),t.d(e,"getDefinedParams",function(){return Ve}),t.d(e,"isValidMediaTypes",function(){return We}),t.d(e,"getBidderRequest",function(){return Ge}),t.d(e,"getUserConfiguredParams",function(){return Le}),t.d(e,"getOrigin",function(){return He}),t.d(e,"getDNT",function(){return Ke}),t.d(e,"isAdUnitCodeMatchingSlot",function(){return Je}),t.d(e,"isSlotMatchingAdUnitCode",function(){return Xe}),t.d(e,"getGptSlotInfoForAdUnitCode",function(){return Qe}),t.d(e,"unsupportedBidderMessage",function(){return $e}),t.d(e,"isInteger",function(){return Ze}),t.d(e,"convertCamelToUnderscore",function(){return et}),t.d(e,"cleanObj",function(){return tt}),t.d(e,"pick",function(){return rt}),t.d(e,"transformBidderParamKeywords",function(){return nt}),t.d(e,"convertTypes",function(){return it}),t.d(e,"isArrayOfNums",function(){return at}),t.d(e,"fill",function(){return ot}),t.d(e,"chunk",function(){return st}),t.d(e,"getMinValueFromArray",function(){return dt}),t.d(e,"getMaxValueFromArray",function(){return ct}),t.d(e,"compareOn",function(){return ut}),t.d(e,"parseQS",function(){return R}),t.d(e,"formatQS",function(){return pt}),t.d(e,"parseUrl",function(){return lt}),t.d(e,"buildUrl",function(){return ft}),t.d(e,"deepEqual",function(){return D}),t.d(e,"mergeDeep",function(){return U}),t.d(e,"cyrb53Hash",function(){return bt});var d=t(3),i=t(1),e=t(101),N=t.n(e),e=t(5),n=t.n(e),e=t(4),r=t.n(e);function q(e,t,r,n,i){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e}var z=function(e,t,r){for(var n,i=0,a=(t=t.split?t.split("."):t).length,o=e;i<a;++i)n=o[t[i]],o=o[t[i]]=i===a-1?r:null!=n?n:!~t[i+1].indexOf(".")&&-1<+t[i+1]?[]:{}},a=t(6),M=Object.prototype.toString,e=Boolean(window.console),o=Boolean(e&&window.console.log),F=Boolean(e&&window.console.info),V=Boolean(e&&window.console.warn),W=Boolean(e&&window.console.error),s=t(13),c={checkCookieSupport:ze,createTrackPixelIframeHtml:ve,getWindowSelf:g,getWindowTop:m,getWindowLocation:v,insertUserSyncIframe:me,insertElement:pe,isFn:x,triggerPixel:le,logError:te,logWarn:O,logMessage:y,logInfo:h,parseQS:R,formatQS:pt,deepEqual:D},G={};function L(){return G}var u,e={},H=function(e,t){return t}.bind(null,1,e)()===e?Function.prototype.bind:function(e){var t=this,r=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,r.concat(Array.prototype.slice.call(arguments)))}},K=(u=0,function(){return++u});function p(){return K()+Math.random().toString(16).substr(2)}function l(e){return e?(e^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,l)}function Y(e,t){return t&&t[e]?t[e]:""}function J(e,t,r){return r?e+t+"="+encodeURIComponent(r)+"&":e}function X(e){var t,r="";for(t in e)e.hasOwnProperty(t)&&(r+=t+"="+encodeURIComponent(e[t])+"&");return r.replace(/&$/,"")}function Q(t){return t&&0<Object.getOwnPropertyNames(t).length?Oe(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&"):""}function $(e){var t,r;if(e)return t=[],e.mediaTypes&&e.mediaTypes.banner&&Array.isArray(e.mediaTypes.banner.sizes)?(r=e.mediaTypes.banner.sizes,Array.isArray(r[0])?t=r:t.push(r)):Array.isArray(e.sizes)&&(Array.isArray(e.sizes[0])?t=e.sizes:t.push(e.sizes)),t}function Z(e){var t=[];if("string"==typeof e){var r=e.split(","),n=/^(\d)+x(\d)+$/i;if(r)for(var i in r)ue(r,i)&&r[i].match(n)&&t.push(r[i])}else if("object"==typeof e){var a=e.length;if(0<a)if(2===a&&"number"==typeof e[0]&&"number"==typeof e[1])t.push(f(e));else for(var o=0;o<a;o++)t.push(f(e[o]))}return t}function f(e){if(b(e))return e[0]+"x"+e[1]}function ee(e){if(b(e))return{w:e[0],h:e[1]}}function b(e){return E(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}function m(){return window.top}function g(){return window.self}function v(){return window.location}function y(){I()&&o&&console.log.apply(console,j(arguments,"MESSAGE:"))}function h(){I()&&F&&console.info.apply(console,j(arguments,"INFO:"))}function O(){I()&&V&&console.warn.apply(console,j(arguments,"WARNING:")),s.emit(a.EVENTS.AUCTION_DEBUG,{type:"WARNING",arguments:arguments})}function te(){I()&&W&&console.error.apply(console,j(arguments,"ERROR:")),s.emit(a.EVENTS.AUCTION_DEBUG,{type:"ERROR",arguments:arguments})}function j(e,t){e=[].slice.call(e);var r=i.b.getCurrentBidder();return t&&e.unshift(t),r&&e.unshift(n("#aaa")),e.unshift(n("#3b88c3")),e.unshift("%cPrebid"+(r?"%c"+r:"")),e;function n(e){return"display: inline-block; color: #fff; background: "+e+"; padding: 1px 4px; border-radius: 3px;"}}function re(){return o}function I(){return!!i.b.getConfig("debug")}function ne(){var e=document.createElement("iframe");return e.id=p(),e.height=0,e.width=0,e.border="0px",e.hspace="0",e.vspace="0",e.marginWidth="0",e.marginHeight="0",e.style.border="0",e.scrolling="no",e.frameBorder="0",e.src="about:blank",e.style.display="none",e}function ie(e){return R(v().search)[e]||""}function A(e,t){return M.call(e)==="[object "+t+"]"}function x(e){return A(e,"Function")}function S(e){return A(e,"String")}function E(e){return A(e,"Array")}function ae(e){return A(e,"Number")}function T(e){return A(e,"Object")}function oe(e){return A(e,"Boolean")}function w(e){if(!e)return!0;if(E(e)||S(e))return!(0<e.length);for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}function se(e){return S(e)&&(!e||0===e.length)}function _(e,t){if(!w(e)){if(x(e.forEach))return e.forEach(t,this);var r=0,n=e.length;if(0<n)for(;r<n;r++)t(e[r],r,e);else for(r in e)hasOwnProperty.call(e,r)&&t.call(this,e[r],r)}}function de(e,t){if(w(e))return!1;if(x(e.indexOf))return-1!==e.indexOf(t);for(var r=e.length;r--;)if(e[r]===t)return!0;return!1}function ce(r,n){if(w(r))return[];if(x(r.map))return r.map(n);var i=[];return _(r,function(e,t){i.push(n(e,t,r))}),i}function ue(e,t){return e.hasOwnProperty?e.hasOwnProperty(t):void 0!==e[t]&&e.constructor.prototype[t]!==e[t]}function pe(e,t,r,n){var i;t=t||document,r=r?t.getElementsByTagName(r):t.getElementsByTagName("head");try{if((r=r.length?r:t.getElementsByTagName("body")).length)return r=r[0],i=n?null:r.firstChild,r.insertBefore(e,i)}catch(e){}}function le(e,t){var r=new Image;t&&c.isFn(t)&&(r.addEventListener("load",t),r.addEventListener("error",t)),r.src=e}function fe(e){var t=e.source,e=e.burl;t===a.S2S.SRC&&e&&c.triggerPixel(e)}function be(e){var t;e&&((t=document.createElement("iframe")).id=p(),t.width=0,t.height=0,t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.display="none",t.style.height="0px",t.style.width="0px",t.scrolling="no",t.frameBorder="0",t.allowtransparency="true",c.insertElement(t,document,"body"),t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.close())}function me(e,t){var e=c.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),r=document.createElement("div"),e=(r.innerHTML=e,r.firstChild);t&&c.isFn(t)&&(e.addEventListener("load",t),e.addEventListener("error",t)),c.insertElement(e,document,"html",!0)}function ge(e){return e?'<div style="position:absolute;left:0px;top:0px;visibility:hidden;">'+('<img src="'+encodeURI(e))+'"></div>':""}function ve(e,t,r){return void 0===t&&(t=!0),void 0===r&&(r=""),e?(t&&(e=encodeURI(e)),"<iframe "+(r=r&&'sandbox="'+r+'"')+' id="'+p()+'"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="'+e+'">\n    </iframe>'):""}function C(e,t,r){return null==t?r:S(t)?t:ae(t)?t.toString():void c.logWarn("Unsuported type for param: "+e+" required type: String")}function ye(e,t,r){return r.indexOf(e)===t}function k(e,t){return e.concat(t)}function he(r,e){var t;if(r)return e.some(function(e){e=n()(e.bids,function(t){return["bidId","adId","bid_id"].some(function(e){return t[e]===r})});return e&&(t=e),e}),t}function Oe(e){return Object.keys(e)}function je(e,t){return e[t]}function Ie(e,t){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t)return r}function Ae(e){return(e=void 0===e?jwpb.adUnits:e).map(function(e){return e.bids.map(function(e){return e.bidder}).reduce(k,[])}).reduce(k).filter(ye)}function xe(){if(window.googletag&&x(window.googletag.pubads)&&x(window.googletag.pubads().getSlots))return!0}function Se(){if(window.apntag&&x(window.apntag.getTag))return!0}var Ee=P("timeToRespond",function(e,t){return t<e}),Te=P("responseTimestamp",function(e,t){return t<e}),we=P("responseTimestamp",function(e,t){return e<t});function P(r,n){return function(e,t){return e.cpm===t.cpm?n(e[r],t[r])?t:e:e.cpm<t.cpm?t:e}}function _e(e){for(var t=e.length;0<t;){var r=Math.floor(Math.random()*t),n=e[--t];e[t]=e[r],e[r]=n}return e}function Ce(e,t){return r()(e,t&&t.adUnitCode)}function ke(e){return N()(e)}function Pe(){try{return c.getWindowSelf()!==c.getWindowTop()}catch(e){return!0}}function Re(){return/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)}function De(e,t){if(e)return e.replace(/\$\{AUCTION_PRICE\}/g,t)}function Ue(e,t){if(e&&t&&"string"==typeof t)return e.replace(/\${CLICKTHROUGH}/g,t)}function Be(){return(new Date).getTime()}function Ne(){return window.performance&&window.performance.now&&window.performance.now()||0}function qe(){return!1!==i.b.getConfig("deviceAccess")}function ze(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}function Me(e,t){if(t<1)throw new Error("numRequiredCalls must be a positive number. Got "+t);var r=0;return function(){++r===t&&e.apply(this,arguments)}}function Fe(e,r){return e.reduce(function(e,t){return(e[t[r]]=e[t[r]]||[]).push(t),e},{})}function Ve(r,e){return e.filter(function(e){return r[e]}).reduce(function(e,t){return Object(d.default)(e,((e={})[t]=r[t],e))},{})}function We(e){var t=["banner","native","video"];return!!Object.keys(e).every(function(e){return r()(t,e)})&&(!e.video||!e.video.context||r()(["instream","outstream","adpod"],e.video.context))}function Ge(e,t,r){return n()(e,function(e){return 0<e.bids.filter(function(e){return e.bidder===t&&e.adUnitCode===r}).length})||{start:null,auctionId:null}}function Le(e,t,r){return e.filter(function(e){return e.code===t}).map(function(e){return e.bids}).reduce(k,[]).filter(function(e){return e.bidder===r}).map(function(e){return e.params||{}})}function He(){return window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function Ke(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack}var Ye=function(e,t){return e.getAdUnitPath()===t||e.getSlotElementId()===t};function Je(t){return function(e){return Ye(t,e)}}function Xe(t){return function(e){return Ye(e,t)}}function Qe(e){var t;return(t=xe()?n()(window.googletag.pubads().getSlots(),Xe(e)):t)?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}}function $e(e,t){var r=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    "+e.code+" is a "+r+" ad unit\n    containing bidders that don't support "+r+": "+t+".\n    This bidder won't fetch demand.\n  "}function Ze(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function et(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")}function tt(r){return Object.keys(r).reduce(function(e,t){return void 0!==r[t]&&(e[t]=r[t]),e},{})}function rt(a,o){return"object"!=typeof a?{}:o.reduce(function(e,t,r){if("function"==typeof t)return e;var n=t,i=t.match(/^(.+?)\sas\s(.+?)$/i),i=(i&&(t=i[1],n=i[2]),a[t]);return void 0!==(i="function"==typeof o[r+1]?o[r+1](i,e):i)&&(e[n]=i),e},{})}function nt(e,n){void 0===n&&(n="keywords");var i=[];return _(e,function(e,t){if(E(e)){var r=[];_(e,function(e){!(e=C(n+"."+t,e))&&""!==e||r.push(e)}),e=r}else{if(!S(e=C(n+"."+t,e)))return;e=[e]}i.push({key:t,value:e})}),i}function it(n,i){return Object.keys(n).forEach(function(e){var t,r;i[e]&&(x(n[e])?i[e]=n[e](i[e]):i[e]=(t=n[e],r=i[e],"string"===t?r&&r.toString():"number"===t?Number(r):r),isNaN(i[e])&&delete i.key)}),i}function at(e,t){return E(e)&&(!t||e.length===t)&&e.every(Ze)}function ot(e,t){for(var r=[],n=0;n<t;n++){var i=T(e)?ke(e):e;r.push(i)}return r}function st(e,t){for(var r=[],n=0;n<Math.ceil(e.length/t);n++){var i=n*t;r.push(e.slice(i,i+t))}return r}function dt(e){return Math.min.apply(Math,e)}function ct(e){return Math.max.apply(Math,e)}function ut(r){return function(e,t){return e[r]<t[r]?1:e[r]>t[r]?-1:0}}function R(e){return e?e.replace(/^\?/,"").split("&").reduce(function(e,t){var t=t.split("="),r=t[0],t=t[1];return/\[\]$/.test(r)?(e[r=r.replace("[]","")]=e[r]||[],e[r].push(t)):e[r]=t||"",e},{}):{}}function pt(e){return Object.keys(e).map(function(t){return Array.isArray(e[t])?e[t].map(function(e){return t+"[]="+e}).join("&"):t+"="+e[t]}).join("&")}function lt(e,t){var r=document.createElement("a"),e=(t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?r.href=e:r.href=decodeURIComponent(e),t&&"decodeSearchAsString"in t&&t.decodeSearchAsString);return{href:r.href,protocol:(r.protocol||"").replace(/:$/,""),hostname:r.hostname,port:+r.port,pathname:r.pathname.replace(/^(?!\/)/,"/"),search:e?r.search:c.parseQS(r.search||""),hash:(r.hash||"").replace(/^#/,""),host:r.host||window.location.host}}function ft(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":"+e.port:""))+(e.pathname||"")+(e.search?"?"+c.formatQS(e.search||""):"")+(e.hash?"#"+e.hash:"")}function D(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e){if(!t.hasOwnProperty(r))return!1;if(!D(e[r],t[r]))return!1}return!0}function U(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!r.length)return e;var i,a,o=r.shift();if(T(e)&&T(o))for(var s in o)T(o[s])?(e[s]||Object(d.default)(e,((i={})[s]={},i)),U(e[s],o[s])):E(o[s])?e[s]?E(e[s])&&(e[s]=e[s].concat(o[s])):Object(d.default)(e,((i={})[s]=o[s],i)):Object(d.default)(e,((a={})[s]=o[s],a));return U.apply(void 0,[e].concat(r))}function bt(e,t){for(var r,n=function(e,t){if(x(Math.imul))return Math.imul(e,t);var r=(4194303&e)*(t|=0);return 4290772992&e&&(r+=(4290772992&e)*t|0),0|r},i=3735928559^(t=void 0===t?0:t),a=1103547991^t,o=0;o<e.length;o++)i=n(i^(r=e.charCodeAt(o)),2654435761),a=n(a^r,1597334677);return i=n(i^i>>>16,2246822507)^n(a^a>>>13,3266489909),(4294967296*(2097151&(a=n(a^a>>>16,2246822507)^n(i^i>>>13,3266489909)))+(i>>>0)).toString()}},function(e,t,r){"use strict";r.d(t,"a",function(){return y}),r.d(t,"b",function(){return I});var o,s,d,n,i,a=r(55),c=r(3),u=r(56),t=r(5),p=r.n(t),t=r(4),l=r.n(t),t=r(100),f=r.n(t),b=r(0),m=r(175),t=r(6),g="TRUE"===Object(b.getParameterByName)(t.DEBUG_MODE).toUpperCase(),v=window.location.origin,y="random",h={},O=(h[y]=!0,h.fixed=!0,y),j={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},I=(n=[],i=null,A(),{getCurrentBidder:function(){return i},resetBidder:C,getConfig:function(){var e;return arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0])?Object(b.deepAccess)(x(),e):x():T.apply(void 0,arguments)},readConfig:function(){var e,t;return arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=Object(b.deepClone)(x()),e?Object(b.deepAccess)(t,e):t):T.apply(void 0,arguments)},setConfig:function(r){var e,n;Object(b.isPlainObject)(r)?(e=Object.keys(r),n={},e.forEach(function(e){var t="fpd"===e?"ortb2":e,e="fpd"===e?S(r[e]):r[e];Object(b.isPlainObject)(o[t])&&Object(b.isPlainObject)(e)&&(e=Object(c.default)({},o[t],e)),n[t]=s[t]=e}),w(n)):Object(b.logError)("setConfig options must be an object")},setDefaults:function(e){Object(b.isPlainObject)(o)?(Object(c.default)(o,e),Object(c.default)(s,e)):Object(b.logError)("defaults must be an object")},resetConfig:A,runWithBidder:_,callbackWithBidder:function(i){return function(n){return function(){if("function"==typeof n){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return _(i,b.bind.call.apply(b.bind,[n,this].concat(t)))}Object(b.logWarn)("config.callbackWithBidder callback is not a function")}}},setBidderConfig:function(n){try{var e=n;if(!Object(b.isPlainObject)(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!Object(b.isPlainObject)(e.config))throw"setBidderConfig bidder options must contain a config object";n.bidders.forEach(function(r){d[r]||(d[r]={}),Object.keys(n.config).forEach(function(e){var t="fpd"===e?"ortb2":e,e="fpd"===e?S(n.config[e]):n.config[e];Object(b.isPlainObject)(e)?d[r][t]=Object(c.default)({},d[r][t]||{},e):d[r][t]=e})})}catch(n){Object(b.logError)(n)}},getBidderConfig:function(){return d},convertAdUnitFpd:function(e){var r=[];return e.forEach(function(e){var t;e.fpd?(e.ortb2Imp?Object(b.mergeDeep)(e.ortb2Imp,E(e.fpd)):e.ortb2Imp=E(e.fpd),r.push(((t=e).fpd,Object(a.a)(t,["fpd"])))):r.push(e)}),r},getLegacyFpd:function(i){var t;if("object"==typeof i)return t={},Object.keys(i).forEach(function(n){var e="site"===n?"context":n;t[e]="context"===e||"user"===e?Object.keys(i[n]).filter(function(e){return"data"!==e}).reduce(function(e,t){var r;return"ext"===t?Object(b.mergeDeep)(e,i[n][t]):Object(b.mergeDeep)(e,((r={})[t]=i[n][t],r)),e},{}):i[n]}),t},getLegacyImpFpd:function(r){var n;if("object"==typeof r)return n={},Object(b.deepAccess)(r,"ext.data")&&Object.keys(r.ext.data).forEach(function(e){var t;"pbadslot"===e?Object(b.mergeDeep)(n,{context:{pbAdSlot:r.ext.data[e]}}):"adserver"===e?Object(b.mergeDeep)(n,{context:{adServer:r.ext.data[e]}}):Object(b.mergeDeep)(n,{context:{data:((t={})[e]=r.ext.data[e],t)}})}),n}});function A(){o={};var r={_debug:g,get debug(){return this._debug},set debug(e){this._debug=e},_bidderTimeout:3e3,get bidderTimeout(){return this._bidderTimeout},set bidderTimeout(e){this._bidderTimeout=e},_publisherDomain:v,get publisherDomain(){return this._publisherDomain},set publisherDomain(e){this._publisherDomain=e},_priceGranularity:j.MEDIUM,set priceGranularity(e){a(e)&&("string"==typeof e?this._priceGranularity=i(e)?e:j.MEDIUM:Object(b.isPlainObject)(e)&&(this._customPriceBucket=e,this._priceGranularity=j.CUSTOM,Object(b.logMessage)("Using custom price granularity")))},get priceGranularity(){return this._priceGranularity},_customPriceBucket:{},get customPriceBucket(){return this._customPriceBucket},_mediaTypePriceGranularity:{},get mediaTypePriceGranularity(){return this._mediaTypePriceGranularity},set mediaTypePriceGranularity(r){var n=this;this._mediaTypePriceGranularity=Object.keys(r).reduce(function(e,t){return a(r[t])?"string"==typeof r?e[t]=i(r[t])?r[t]:n._priceGranularity:Object(b.isPlainObject)(r)&&(e[t]=r[t],Object(b.logMessage)("Using custom price granularity for "+t)):Object(b.logWarn)("Invalid price granularity for media type: "+t),e},{})},_sendAllBids:!0,get enableSendAllBids(){return this._sendAllBids},set enableSendAllBids(e){this._sendAllBids=e},_useBidCache:!1,get useBidCache(){return this._useBidCache},set useBidCache(e){this._useBidCache=e},_deviceAccess:!0,get deviceAccess(){return this._deviceAccess},set deviceAccess(e){this._deviceAccess=e},_bidderSequence:O,get bidderSequence(){return this._bidderSequence},set bidderSequence(e){h[e]?this._bidderSequence=e:Object(b.logWarn)("Invalid order: "+e+". Bidder Sequence was not set.")},_timeoutBuffer:400,get timeoutBuffer(){return this._timeoutBuffer},set timeoutBuffer(e){this._timeoutBuffer=e},_disableAjaxTimeout:!1,get disableAjaxTimeout(){return this._disableAjaxTimeout},set disableAjaxTimeout(e){this._disableAjaxTimeout=e},_maxNestedIframes:10,get maxNestedIframes(){return this._maxNestedIframes},set maxNestedIframes(e){this._maxNestedIframes=e},_auctionOptions:{},get auctionOptions(){return this._auctionOptions},set auctionOptions(e){!function(e){if(!Object(b.isPlainObject)(e))return Object(b.logWarn)("Auction Options must be an object"),0;for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];if("secondaryBidders"!==n&&"suppressStaleRender"!==n)return Object(b.logWarn)("Auction Options given an incorrect param: "+n),0;if("secondaryBidders"===n){if(!Object(b.isArray)(e[n]))return Object(b.logWarn)("Auction Options "+n+" must be of type Array"),0;if(!e[n].every(b.isStr))return Object(b.logWarn)("Auction Options "+n+" must be only string"),0}else if("suppressStaleRender"===n&&!Object(b.isBoolean)(e[n]))return Object(b.logWarn)("Auction Options "+n+" must be of type boolean"),0}return 1}(e)||(this._auctionOptions=e)}};function i(t){return p()(Object.keys(j),function(e){return t===j[e]})}function a(e){if(!e)return Object(b.logError)("Prebid Error: no value passed to `setPriceGranularity()`"),0;if("string"==typeof e)i(e)||Object(b.logWarn)("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if(Object(b.isPlainObject)(e)&&!Object(u.b)(e))return Object(b.logError)("Invalid custom price value passed to `setPriceGranularity()`"),0;return 1}s&&w(Object.keys(s).reduce(function(e,t){return s[t]!==r[t]&&(e[t]=r[t]||{}),e},{})),s=r,d={}}function x(){var r,e;return i&&d&&Object(b.isPlainObject)(d[i])?(r=d[i],e=new f.a(Object.keys(s).concat(Object.keys(r))),m(e).reduce(function(e,t){return void 0===r[t]?e[t]=s[t]:void 0!==s[t]&&Object(b.isPlainObject)(r[t])?e[t]=Object(b.mergeDeep)({},s[t],r[t]):e[t]=r[t],e},{})):Object(c.default)({},s)}function S(i){var t={};return Object.keys(i).forEach(function(n){var e="context"===n?"site":n;t[e]="site"===e||"user"===e?Object.keys(i[n]).reduce(function(e,t){var r;return"data"===t?Object(b.mergeDeep)(e,{ext:{data:i[n][t]}}):Object(b.mergeDeep)(e,((r={})[t]=i[n][t],r)),e},{}):i[n]}),t}function E(a){var o={};return Object.keys(a).filter(function(e){return"context"===e}).forEach(function(i){Object.keys(a[i]).forEach(function(n){var e;"data"===n?Object(b.mergeDeep)(o,{ext:{data:a[i][n]}}):"object"!=typeof a[i][n]||Array.isArray(a[i][n])?Object(b.mergeDeep)(o,{ext:{data:((e={})[n.toLowerCase()]=a[i][n],e)}}):Object.keys(a[i][n]).forEach(function(e){var t,r;Object(b.mergeDeep)(o,{ext:{data:((r={})[n.toLowerCase()]=((t={})[e.toLowerCase()]=a[i][n][e],t),r)}})})})}),o}function T(e,t){var r;if("string"!=typeof e&&(t=e,e="*"),"function"==typeof t)return n.push(r={topic:e,callback:t}),function(){n.splice(n.indexOf(r),1)};Object(b.logError)("listener must be a function")}function w(r){var t=Object.keys(r);n.filter(function(e){return l()(t,e.topic)}).forEach(function(e){var t;e.callback(((t={})[e.topic]=r[e.topic],t))}),n.filter(function(e){return"*"===e.topic}).forEach(function(e){return e.callback(r)})}function _(e,t){i=e;try{return t()}finally{C()}}function C(){i=null}},function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"d",function(){return i}),r.d(t,"b",function(){return a}),r.d(t,"a",function(){return o});var n="native",i="video",a="banner",o="adpod"},function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}r.r(t),r.d(t,"default",function(){return n})},function(e,t,r){r=r(121);e.exports=r},function(e,t,r){r=r(103);e.exports=r},function(e){e.exports=JSON.parse('{"JSON_MAPPING":{"PL_CODE":"code","PL_SIZE":"sizes","PL_BIDS":"bids","BD_BIDDER":"bidder","BD_ID":"paramsd","BD_PL_ID":"placementId","ADSERVER_TARGETING":"adserverTargeting","BD_SETTING_STANDARD":"standard"},"DEBUG_MODE":"pbjs_debug","STATUS":{"GOOD":1,"NO_BID":2},"CB":{"TYPE":{"ALL_BIDS_BACK":"allRequestedBidsBack","AD_UNIT_BIDS_BACK":"adUnitBidsBack","BID_WON":"bidWon","REQUEST_BIDS":"requestBids"}},"EVENTS":{"AUCTION_INIT":"auctionInit","AUCTION_END":"auctionEnd","BID_ADJUSTMENT":"bidAdjustment","BID_TIMEOUT":"bidTimeout","BID_REQUESTED":"bidRequested","BID_RESPONSE":"bidResponse","NO_BID":"noBid","BID_WON":"bidWon","BIDDER_DONE":"bidderDone","BIDDER_ERROR":"bidderError","SET_TARGETING":"setTargeting","BEFORE_REQUEST_BIDS":"beforeRequestBids","BEFORE_BIDDER_HTTP":"beforeBidderHttp","REQUEST_BIDS":"requestBids","ADD_AD_UNITS":"addAdUnits","AD_RENDER_FAILED":"adRenderFailed","AD_RENDER_SUCCEEDED":"adRenderSucceeded","TCF2_ENFORCEMENT":"tcf2Enforcement","AUCTION_DEBUG":"auctionDebug","BID_VIEWABLE":"bidViewable","STALE_RENDER":"staleRender"},"AD_RENDER_FAILED_REASON":{"PREVENT_WRITING_ON_MAIN_DOCUMENT":"preventWritingOnMainDocument","NO_AD":"noAd","EXCEPTION":"exception","CANNOT_FIND_AD":"cannotFindAd","MISSING_DOC_OR_ADID":"missingDocOrAdid"},"EVENT_ID_PATHS":{"bidWon":"adUnitCode"},"GRANULARITY_OPTIONS":{"LOW":"low","MEDIUM":"medium","HIGH":"high","AUTO":"auto","DENSE":"dense","CUSTOM":"custom"},"TARGETING_KEYS":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","SOURCE":"hb_source","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_ID":"hb_cache_id","CACHE_HOST":"hb_cache_host","ADOMAIN":"hb_adomain"},"DEFAULT_TARGETING_KEYS":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_HOST":"hb_cache_host"},"NATIVE_KEYS":{"title":"hb_native_title","body":"hb_native_body","body2":"hb_native_body2","privacyLink":"hb_native_privacy","privacyIcon":"hb_native_privicon","sponsoredBy":"hb_native_brand","image":"hb_native_image","icon":"hb_native_icon","clickUrl":"hb_native_linkurl","displayUrl":"hb_native_displayurl","cta":"hb_native_cta","rating":"hb_native_rating","address":"hb_native_address","downloads":"hb_native_downloads","likes":"hb_native_likes","phone":"hb_native_phone","price":"hb_native_price","salePrice":"hb_native_saleprice","rendererUrl":"hb_renderer_url","adTemplate":"hb_adTemplate"},"S2S":{"SRC":"s2s","DEFAULT_ENDPOINT":"https://prebid.adnxs.com/pbs/v1/openrtb2/auction","SYNCED_BIDDERS_KEY":"pbjsSyncs"},"BID_STATUS":{"BID_TARGETING_SET":"targetingSet","RENDERED":"rendered","BID_REJECTED":"bidRejected"}}')},function(e,t,r){"use strict";r.r(t),r.d(t,"gdprDataHandler",function(){return w}),r.d(t,"uspDataHandler",function(){return _}),r.d(t,"coppaDataHandler",function(){return d}),r.d(t,"clientTestAdapters",function(){return C}),r.d(t,"allS2SBidders",function(){return k}),r.d(t,"getAllS2SBidders",function(){return P}),r.d(t,"setS2STestingModule",function(){return c});var m,l=r(3),g=r(0),p=r(34),f=r(16),b=r(10),v=r(30),a=r(1),n=r(8),i=r(4),y=r.n(i),i=r(5),h=r.n(i),O=r(31),o=r(58),j=r(6),I=r(13),A={},x=A.bidderRegistry={},S=A.aliasRegistry={},E=[],s=(a.b.getConfig("s2sConfig",function(e){e&&e.s2sConfig&&(E=Object(g.isArray)(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])}),{}),T=Object(n.b)("sync",function(e){var n=e.bidderCode,s=e.auctionId,d=e.bidderRequestId,t=e.adUnits,c=e.labels,u=e.src;return t.reduce(function(e,a){var t=Object(p.b)(Object(p.a)(a,c),a.mediaTypes,a.sizes),r=t.active,o=t.mediaTypes,t=t.filterResults;return r?t&&Object(g.logInfo)('Size mapping filtered adUnit "'+a.code+'" banner sizes from ',t.before,"to ",t.after):Object(g.logInfo)('Size mapping disabled adUnit "'+a.code+'"'),r&&e.push(a.bids.filter(function(e){return e.bidder===n}).reduce(function(e,t){var r=a.nativeParams||Object(g.deepAccess)(a,"mediaTypes.native"),r=(r&&(t=Object(l.default)({},t,{nativeParams:Object(f.h)(r)})),t=Object(l.default)({},t,Object(g.getDefinedParams)(a,["ortb2Imp","mediaType","renderer","storedAuctionResponse"])),Object(p.b)(Object(p.a)(t,c),o)),n=r.active,i=r.mediaTypes,r=r.filterResults;return n?r&&Object(g.logInfo)('Size mapping filtered adUnit "'+a.code+'" bidder "'+t.bidder+'" banner sizes from ',r.before,"to ",r.after):Object(g.logInfo)('Size mapping deactivated adUnit "'+a.code+'" bidder "'+t.bidder+'"'),Object(g.isValidMediaTypes)(i)?t=Object(l.default)({},t,{mediaTypes:i}):Object(g.logError)("mediaTypes is not correctly configured for adunit "+a.code),n&&e.push(Object(l.default)({},t,{adUnitCode:a.code,transactionId:a.transactionId,sizes:Object(g.deepAccess)(i,"banner.sizes")||Object(g.deepAccess)(i,"video.playerSize")||[],bidId:t.bid_id||Object(g.getUniqueIdentifierStr)(),bidderRequestId:d,auctionId:s,src:u,bidRequestsCount:O.a.getRequestsCounter(a.code),bidderRequestsCount:O.a.getBidderRequestsCounter(a.code,t.bidder),bidderWinsCount:O.a.getBidderWinsCounter(a.code,t.bidder)})),e},[])),e},[]).reduce(g.flatten,[]).filter(function(e){return""!==e})},"getBids"),w={consentData:null,setConsentData:function(e){w.consentData=e},getConsentData:function(){return w.consentData}},_={consentData:null,setConsentData:function(e){_.consentData=e},getConsentData:function(){return _.consentData}},d={getCoppa:function(){return!!a.b.getConfig("coppa")}},C=[],k=[];function P(){A.s2STestingEnabled=!1,E.forEach(function(e){e&&e.enabled&&e.bidders&&e.bidders.length&&k.push.apply(k,e.bidders)})}function R(e){return e&&e.enabled&&e.testing&&m}function c(e){m=e}function u(e,t,r){try{var n=x[e].getSpec();n&&n[t]&&"function"==typeof n[t]&&(Object(g.logInfo)("Invoking "+e+"."+t),a.b.runWithBidder(e,g.bind.call(n[t],n,r)))}catch(r){Object(g.logWarn)("Error calling "+t+" of "+e)}}A.makeBidRequests=Object(n.b)("sync",function(s,d,c,n,u){I.emit(j.EVENTS.BEFORE_REQUEST_BIDS,s);var e=Object(g.getBidderCodes)(s),p=(a.b.getConfig("bidderSequence")===a.a&&(e=Object(g.shuffle)(e)),Object(o.a)()),l=e,f=[],b=(0===k.length&&P(),E.forEach(function(e){e&&e.enabled&&R(e)&&(m.calculateBidSources(e),m.getSourceBidderMap(s,k)[m.CLIENT].forEach(function(e){y()(C,e)||C.push(e)}))}),l=e.filter(function(e){return!y()(k,e)||y()(C,e)}),k),i=(E.forEach(function(r){var n,i,t,a,e,o;r&&r.enabled&&(Boolean(R(r)&&r.testServerOnly)&&(e=s,o=r,Boolean(h()(e,function(e){return h()(e.bids,function(e){return(e.bidSource||o.bidderControl&&o.bidderControl[e.bidder])&&e.finalSource===m.SERVER})})))&&(Object(g.logWarn)("testServerOnly: True.  All client requests will be suppressed."),l.length=0),e=s,a=(t=r).bidders,(e=Object(g.deepClone)(e)).forEach(function(e){e.bids=e.bids.filter(function(e){return y()(a,e.bidder)&&(!R(t)||e.finalSource!==m.CLIENT)}).map(function(e){return e.bid_id=Object(g.getUniqueIdentifierStr)(),e})}),n=e.filter(function(e){return 0!==e.bids.length}),i=Object(g.generateUUID)(),b.forEach(function(e){var t=Object(g.getUniqueIdentifierStr)(),e={bidderCode:e,auctionId:c,bidderRequestId:t,tid:i,bids:T({bidderCode:e,auctionId:c,bidderRequestId:t,adUnits:Object(g.deepClone)(n),labels:u,src:j.S2S.SRC}),auctionStart:d,timeout:r.timeout,src:j.S2S.SRC,refererInfo:p};0!==e.bids.length&&f.push(e)}),n.forEach(function(e){var t=e.bids.filter(function(t){return h()(f,function(e){return h()(e.bids,function(e){return e.bidId===t.bid_id})})});e.bids=t}),f.forEach(function(e){void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=n.filter(function(e){return 0<e.bids.length}))}))}),function(e){e=Object(g.deepClone)(e);return e.forEach(function(e){e.bids=e.bids.filter(function(e){return!C.length||e.finalSource!==m.SERVER})}),e.filter(function(e){return 0!==e.bids.length})}(s));return l.forEach(function(e){var t=Object(g.getUniqueIdentifierStr)(),t={bidderCode:e,auctionId:c,bidderRequestId:t,bids:T({bidderCode:e,auctionId:c,bidderRequestId:t,adUnits:Object(g.deepClone)(i),labels:u,src:"client"}),auctionStart:d,timeout:n,refererInfo:p},r=x[e];r||Object(g.logError)("Trying to make a request for bidder that does not exist: "+e),r&&t.bids&&0!==t.bids.length&&f.push(t)}),w.getConsentData()&&f.forEach(function(e){e.gdprConsent=w.getConsentData()}),_.getConsentData()&&f.forEach(function(e){e.uspConsent=_.getConsentData()}),f},"makeBidRequests"),A.callBids=function(e,t,c,u,p,l,i){var r,f,b,m;t.length?(r=(t=t.reduce(function(e,t){return e[Number(void 0!==t.src&&t.src===j.S2S.SRC)].push(t),e},[[],[]]))[0],f=t[1],b=[],f.forEach(function(e){for(var t=-1,r=0;r<b.length;++r)if(e.tid===b[r].tid){t=r;break}t<=-1&&b.push(e)}),m=0,E.forEach(function(e){var t,r,n,i,a,o,s,d;e&&b[m]&&y()(e.bidders,b[m].bidderCode)&&(t=Object(v.b)(l,p?{request:p.request.bind(null,"s2s"),done:p.done}:void 0),r=e.bidders,n=x[e.adapter],i=b[m].tid,o=b[m].adUnitsS2SCopy,a=f.filter(function(e){return e.tid===i}),n?(o={tid:i,ad_units:o,s2sConfig:e}).ad_units.length&&(s=a.map(function(e){return e.start=Object(g.timestamp)(),u.bind(e)}),d=o.ad_units.reduce(function(e,t){return e.concat((t.bids||[]).reduce(function(e,t){return e.concat(t.bidder)},[]))},[]),Object(g.logMessage)("CALLING S2S HEADER BIDDERS ==== "+r.filter(function(e){return y()(d,e)}).join(",")),a.forEach(function(e){I.emit(j.EVENTS.BID_REQUESTED,e)}),n.callBids(o,f,function(e,t){var r=Object(g.getBidderRequest)(f,t.bidderCode,e);r&&c.call(r,e,t)},function(){return s.forEach(function(e){return e()})},t)):Object(g.logError)("missing "+e.adapter),m++)}),r.forEach(function(e){e.start=Object(g.timestamp)();var t=x[e.bidderCode],r=(a.b.runWithBidder(e.bidderCode,function(){Object(g.logMessage)("CALLING BIDDER"),I.emit(j.EVENTS.BID_REQUESTED,e)}),Object(v.b)(l,p?{request:p.request.bind(null,e.bidderCode),done:p.done}:void 0)),n=u.bind(e);try{a.b.runWithBidder(e.bidderCode,g.bind.call(t.callBids,t,e,c.bind(e),n,r,i,a.b.callbackWithBidder(e.bidderCode)))}catch(t){Object(g.logError)(e.bidderCode+" Bid Adapter emitted an uncaught error when parsing their bidRequest",{e:t,bidRequest:e}),n()}})):Object(g.logWarn)("callBids executed with no bidRequests.  Were they filtered by labels or sizing?")},A.videoAdapters=[],A.registerBidAdapter=function(e,t,r){r=(void 0===r?{}:r).supportedMediaTypes,r=void 0===r?[]:r;e&&t?"function"==typeof e.callBids?(x[t]=e,y()(r,"video")&&A.videoAdapters.push(t),y()(r,"native")&&f.f.push(t)):Object(g.logError)("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):Object(g.logError)("bidAdapter or bidderCode not specified")},A.aliasBidAdapter=function(r,n,e){if(void 0===x[n]){var t=x[r];if(void 0===t){var i=[];E.forEach(function(e){var t;e.bidders&&e.bidders.length&&(t=e&&e.bidders,e&&y()(t,n)?S[n]=r:i.push(r))}),i.forEach(function(e){Object(g.logError)('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")})}else try{u=r,p=[],y()(A.videoAdapters,u)&&p.push("video"),y()(f.f,u)&&p.push("native");var a,o,s,d,c=p;t.constructor.prototype!=Object.prototype?(d=new t.constructor).setBidderCode(n):(a=t.getSpec(),o=e&&e.gvlid,s=e&&e.skipPbsAliasing,d=Object(b.c)(Object(l.default)({},a,{code:n,gvlid:o,skipPbsAliasing:s})),S[n]=r),A.registerBidAdapter(d,n,{supportedMediaTypes:c})}catch(n){Object(g.logError)(r+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else Object(g.logMessage)('alias name "'+n+'" has been already specified.');var u,p},A.registerAnalyticsAdapter=function(e){var t=e.adapter,r=e.code,e=e.gvlid;t&&r?"function"==typeof t.enableAnalytics?(t.code=r,s[r]={adapter:t,gvlid:e}):Object(g.logError)('Prebid Error: Analytics adaptor error for analytics "'+r+'"\n        analytics adapter must implement an enableAnalytics() function'):Object(g.logError)("Prebid Error: analyticsAdapter or analyticsCode not specified")},A.enableAnalytics=function(e){Object(g.isArray)(e)||(e=[e]),Object(g._each)(e,function(e){var t=s[e.provider].adapter;t?t.enableAnalytics(e):Object(g.logError)("Prebid Error: no analytics adapter found in registry for\n        "+e.provider+".")})},A.getBidAdapter=function(e){return x[e]},A.getAnalyticsAdapter=function(e){return s[e]},A.callTimedOutBidders=function(t,r,n){r=r.map(function(e){return e.params=Object(g.getUserConfiguredParams)(t,e.adUnitCode,e.bidder),e.timeout=n,e}),r=Object(g.groupBy)(r,"bidder"),Object.keys(r).forEach(function(e){u(e,"onTimeout",r[e])})},A.callBidWonBidder=function(e,t,r){t.params=Object(g.getUserConfiguredParams)(r,t.adUnitCode,t.bidder),O.a.incrementBidderWinsCounter(t.adUnitCode,t.bidder),u(e,"onBidWon",t)},A.callSetTargetingBidder=function(e,t){u(e,"onSetTargeting",t)},A.callBidViewableBidder=function(e,t){u(e,"onBidViewable",t)},A.callBidderError=function(e,t,r){u(e,"onBidderError",{error:t,bidderRequest:r})},t.default=A},function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return i}),r.d(t,"c",function(){return e}),r.d(t,"d",function(){return a});var t=r(43),r=r.n(t),n=r()({ready:r.a.SYNC|r.a.ASYNC|r.a.QUEUE}),i=n.get;function e(e,t){n("async",function(e){e.forEach(function(e){return t.apply(void 0,e)})},e)([])}function a(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];i(e).before(function(e,t){t.push(r),e(t)})}},function(r,e,t){!function(e){function t(e){return e&&e.Math==Math&&e}r.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||function(){return this}()||Function("return this")()}.call(this,t(107))},function(e,t,r){"use strict";r.d(t,"d",function(){return l}),r.d(t,"c",function(){return f}),r.d(t,"e",function(){return I}),r.d(t,"a",function(){return b}),r.d(t,"b",function(){return A});var m=r(3),n=r(57),g=r(7),v=r(1),y=r(40),a=r(39),o=r(16),s=r(27),h=r(6),t=r(13),O=r.n(t),t=r(4),d=r.n(t),c=r(30),j=r(0),i=r(2),t=r(8),r=r(22),u=Object(r.a)("bidderFactory"),p=["requestId","cpm","ttl","creativeId","netRevenue","currency"];function l(i){var r=Array.isArray(i.supportedMediaTypes)?{supportedMediaTypes:i.supportedMediaTypes}:void 0;function a(e){var t=f(e);g.default.registerBidAdapter(t,e.code,r)}a(i),Array.isArray(i.aliases)&&i.aliases.forEach(function(e){var t,r,n=e;Object(j.isPlainObject)(e)&&(n=e.code,t=e.gvlid,r=e.skipPbsAliasing),g.default.aliasRegistry[n]=i.code,a(Object(m.default)({},i,{code:n,gvlid:t,skipPbsAliasing:r}))})}function f(f){return Object(m.default)(new n.a(f.code),{getSpec:function(){return Object.freeze(f)},registerSyncs:i,callBids:function(a,o,e,n,s,d){var c,u,p,t,l;function r(){e(),v.b.runWithBidder(f.code,function(){O.a.emit(h.EVENTS.BIDDER_DONE,a),i(u,a.gdprConsent,a.uspConsent)})}Array.isArray(a.bids)&&(c={},u=[],0!==(t=a.bids.filter(b)).length?(p={},t.forEach(function(e){(p[e.bidId]=e).adUnitCode||(e.adUnitCode=e.placementCode)}),(t=f.buildRequests(t,a))&&0!==t.length?(Array.isArray(t)||(t=[t]),l=Object(j.delayExecution)(d(r),t.length),t.forEach(function(e){return O.a.emit(h.EVENTS.BEFORE_BIDDER_HTTP,a)}),t.forEach(function(i){switch(i.method){case"GET":n(""+i.url+((e=i.data)?"?"+("object"==typeof e?Object(j.parseQueryStringParameters)(e):e):""),{success:d(t),error:r},void 0,Object(m.default)({method:"GET",withCredentials:!0},i.options));break;case"POST":n(i.url,{success:d(t),error:r},"string"==typeof i.data?i.data:JSON.stringify(i.data),Object(m.default)({method:"POST",contentType:"text/plain",withCredentials:!0},i.options));break;default:Object(j.logWarn)("Skipping invalid request from "+f.code+". Request type "+i.type+" must be GET or POST"),l()}var e;function t(e,t){s(f.code);try{e=JSON.parse(e)}catch(e){}var r;e={body:e,headers:{get:t.getResponseHeader.bind(t)}},u.push(e);try{r=f.interpretResponse(e,i)}catch(e){return Object(j.logError)("Bidder "+f.code+" failed to interpret the server's response. Continuing without bids",null,e),void l()}function n(e){var t,r=p[e.requestId];r?(e.originalCpm=e.cpm,e.originalCurrency=e.currency,e.meta=e.meta||Object(m.default)({},e[r.bidder]),t=Object(m.default)(Object(y.a)(h.STATUS.GOOD,r),e),r=r.adUnitCode,t=t,c[r]=!0,A(r,t,[a])&&o(r,t)):Object(j.logWarn)("Bidder "+f.code+" made bid for unknown request ID: "+e.requestId+". Ignoring.")}r&&(Object(j.isArray)(r)?r.forEach(n):n(r)),l(r)}function r(e,t){s(f.code),g.default.callBidderError(f.code,t,a),O.a.emit(h.EVENTS.BIDDER_ERROR,{error:t,bidderRequest:a}),Object(j.logError)("Server call for "+f.code+" failed: "+e+" "+t.status+". Continuing without bids."),l()}})):r()):r())}});function i(e,t,r){I(f,e,t,r)}function b(e){return!!f.isBidRequestValid(e)||(Object(j.logWarn)("Invalid bid sent to bidder "+f.code+": "+JSON.stringify(e)),!1)}}var I=Object(t.b)("async",function(t,e,r,n){var i=v.b.getConfig("userSync.aliasSyncEnabled");!t.getUserSyncs||!i&&g.default.aliasRegistry[t.code]||(i=v.b.getConfig("userSync.filterSettings"),(i=t.getUserSyncs({iframeEnabled:!(!i||!i.iframe&&!i.all),pixelEnabled:!(!i||!i.image&&!i.all)},e,r,n))&&(i=Array.isArray(i)?i:[i]).forEach(function(e){a.a.registerSync(e.type,t.code,e.url)}))},"registerSyncs");function b(e,t){var r=g.default.getBidAdapter(e);if(r.getSpec().getMappingFileInfo){var n=r.getSpec().getMappingFileInfo(),n=n.localStorageKey||r.getBidderCode(),r=u.getDataFromLocalStorage(n);if(r){try{r=JSON.parse(r)}catch(t){Object(j.logError)("Failed to parse "+e+" mapping data stored in local storage")}return r.mapping[t]||null}}}function A(e,t,r){function n(e){return"Invalid bid from "+t.bidderCode+". Ignoring bid: "+e}return e?t?(i=Object.keys(t),p.every(function(e){return d()(i,e)&&!d()([void 0,null],t[e])})?"native"!==t.mediaType||Object(o.g)(t,r)?"video"!==t.mediaType||Object(s.c)(t,r)?!("banner"===t.mediaType&&!function(e,t,r){if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),1;var r=Object(j.getBidderRequest)(r,t.bidderCode,e),e=r&&r.bids&&r.bids[0]&&r.bids[0].sizes,r=Object(j.parseSizesInput)(e);return 1===r.length?(r=(e=r[0].split("x"))[0],e=e[1],t.width=parseInt(r,10),t.height=parseInt(e,10),1):void 0}(e,t,r)&&(Object(j.logError)(n("Banner bids require a width and height")),1)):(Object(j.logError)(n("Video bid does not have required vastUrl or renderer property")),!1):(Object(j.logError)(n("Native bid missing some required properties.")),!1):(Object(j.logError)(n("Bidder "+t.bidderCode+" is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params.")),!1)):(Object(j.logWarn)("Some adapter tried to add an undefined bid for "+e+"."),!1):(Object(j.logWarn)("No adUnitCode was supplied to addBidResponse."),!1);var i}Object(t.a)("checkAdUnitSetup").before(function(e,t){if(!v.b.getConfig("adpod.brandCategoryExclusion"))return e.call(this,t);t.filter(function(e){return Object(j.deepAccess)(e,"mediaTypes.video.context")===i.a}).map(function(e){return e.bids.map(function(e){return e.bidder})}).reduce(j.flatten,[]).filter(j.uniques).forEach(function(r){var e=g.default.getBidAdapter(r);if(e.getSpec().getMappingFileInfo){var t=e.getSpec().getMappingFileInfo(),n=t.refreshInDays||1,i=t.localStorageKey||e.getSpec().code,a=u.getDataFromLocalStorage(i);try{(!(a=a?JSON.parse(a):void 0)||Object(j.timestamp)()>a.lastUpdated+24*n*60*60*1e3)&&Object(c.a)(t.url,{success:function(e){try{e=JSON.parse(e);var t={lastUpdated:Object(j.timestamp)(),mapping:e.mapping};u.setDataInLocalStorage(i,JSON.stringify(t))}catch(e){Object(j.logError)("Failed to parse "+r+" bidder translation mapping file")}},error:function(){Object(j.logError)("Failed to load "+r+" bidder translation file")}})}catch(e){Object(j.logError)("Failed to parse "+r+" bidder translation mapping file")}}}),e.call(this,t)})},function(e,t,r){"use strict";function b(n){function i(e,t,r){if(this instanceof i){switch(arguments.length){case 0:return new n;case 1:return new n(e);case 2:return new n(e,t)}return new n(e,t,r)}return a(n,this,arguments)}return i.prototype=n.prototype,i}var m=r(9),a=r(108),g=r(15),v=r(17),y=r(109).f,h=r(116),O=r(47),j=r(25),I=r(32),A=r(28);e.exports=function(e,t){var r,n,i,a,o,s=e.target,d=e.global,c=e.stat,u=e.proto,p=d?m:c?m[s]:(m[s]||{}).prototype,l=d?O:O[s]||I(O,s,{})[s],f=l.prototype;for(r in t)a=!h(d?r:s+(c?".":"#")+r,e.forced)&&p&&A(p,r),i=l[r],a&&(o=e.noTargetGet?(o=y(p,r))&&o.value:p[r]),n=a&&o?o:t[r],a&&typeof i==typeof n||(a=e.bind&&a?j(n,m):e.wrap&&a?b(n):u&&v(n)?g(n):n,(e.sham||n&&n.sham||i&&i.sham)&&I(a,"sham",!0),I(l,r,a),u&&(A(O,i=s+"Prototype")||I(O,i,{}),I(O[i],r,n),e.real&&f&&!f[r]&&I(f,r,n)))}},function(e,t,r){var n=r(9),i=r(26),a=n.String,o=n.TypeError;e.exports=function(e){if(i(e))return e;throw o(a(e)+" is not an object")}},function(e,t,r){"use strict";var s,n=(i=r(3))&&i.__esModule?i:{default:i},d=r(0),i=r(6),c=Array.prototype.slice,u=Array.prototype.push,a=d._map(i.EVENTS,function(e){return e}),p=i.EVENT_ID_PATHS,l=[];e.exports=(s={},(r={}).on=function(e,t,r){var n;d.contains(a,e)?(n=s[e]||{que:[]},r?(n[r]=n[r]||{que:[]},n[r].que.push(t)):n.que.push(t),s[e]=n):d.logError("Wrong event name : "+e+" Valid event names :"+a)},r.emit=function(e){var t,r,n,i,a,o=c.call(arguments,1);e=e,t=o,d.logMessage("Emitting event for: "+e),o=t[0]||{},r=o[p[e]],n=s[e]||{que:[]},i=d._map(n,function(e,t){return t}),a=[],l.push({eventType:e,args:o,id:r,elapsedTime:d.getPerformanceNow()}),r&&d.contains(i,r)&&u.apply(a,n[r].que),u.apply(a,n.que),d._each(a,function(e){if(e)try{e.apply(null,t)}catch(e){d.logError("Error executing handler:","events.js",e)}})},r.off=function(e,r,n){var i=s[e];d.isEmpty(i)||d.isEmpty(i.que)&&d.isEmpty(i[n])||n&&(d.isEmpty(i[n])||d.isEmpty(i[n].que))||(n?d._each(i[n].que,function(e){var t=i[n].que;e===r&&t.splice(t.indexOf(e),1)}):d._each(i.que,function(e){var t=i.que;e===r&&t.splice(t.indexOf(e),1)}),s[e]=i)},r.get=function(){return s},r.getEvents=function(){var t=[];return d._each(l,function(e){e=(0,n.default)({},e);t.push(e)}),t},r)},function(e,t,r){var r=r(44),n=Function.prototype.call;e.exports=r?n.bind(n):function(){return n.apply(n,arguments)}},function(e,t,r){var r=r(44),n=Function.prototype,i=n.bind,a=n.call,o=r&&i.bind(a,a);e.exports=r?function(e){return e&&o(e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},function(e,t,r){"use strict";r.d(t,"f",function(){return a}),r.d(t,"a",function(){return o}),r.d(t,"h",function(){return d}),r.d(t,"g",function(){return p}),r.d(t,"b",function(){return l}),r.d(t,"e",function(){return f}),r.d(t,"d",function(){return b}),r.d(t,"c",function(){return m});var n=r(3),c=r(0),t=r(4),i=r.n(t),u=r(6),a=[],o=Object.keys(u.NATIVE_KEYS).map(function(e){return u.NATIVE_KEYS[e]}),s={image:{image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}};function d(e){return e&&e.type&&((t=e.type)&&i()(Object.keys(s),t)||(Object(c.logError)(t+" nativeParam is not supported"),0))?s[e.type]:e;var t}function p(t,e){e=Object(c.getBidRequest)(t.requestId,e);if(!e)return!1;if(!Object(c.deepAccess)(t,"native.clickUrl"))return!1;var r=e.nativeParams;if(!r)return!0;var e=Object.keys(r).filter(function(e){return r[e].required}),n=Object.keys(t.native).filter(function(e){return t.native[e]});return e.every(function(e){return i()(n,e)})}function l(e,t){var r;return"click"===e.action?r=t.native&&t.native.clickTrackers:(r=t.native&&t.native.impressionTrackers,t.native&&t.native.javascriptTrackers&&Object(c.insertHtmlIntoIframe)(t.native.javascriptTrackers)),(r||[]).forEach(c.triggerPixel),e.action}function f(i,a){var t,o={},s=(Object(c.deepAccess)(a,"nativeParams.rendererUrl")?i.native.rendererUrl=g(a.nativeParams.rendererUrl):Object(c.deepAccess)(a,"nativeParams.adTemplate")&&(i.native.adTemplate=g(a.nativeParams.adTemplate)),!1!==Object(c.deepAccess)(a,"nativeParams.sendTargetingKeys")),d=(e=a,t={},Object(c.deepAccess)(e,"nativeParams.ext")&&Object.keys(e.nativeParams.ext).forEach(function(e){t[e]="hb_native_"+e}),Object(n.default)({},u.NATIVE_KEYS,t)),e=Object(n.default)({},i.native,i.native.ext);return delete e.ext,Object.keys(e).forEach(function(e){var t,r=d[e],n=g(i.native[e])||g(Object(c.deepAccess)(i,"native.ext."+e));"adTemplate"!==e&&r&&n&&((t="boolean"!=typeof(t=Object(c.deepAccess)(a,"nativeParams."+e+".sendId"))?Object(c.deepAccess)(a,"nativeParams.ext."+e+".sendId"):t)&&(n=r+":"+i.adId),("boolean"==typeof(t="boolean"!=typeof(t=Object(c.deepAccess)(a,"nativeParams."+e+".sendTargetingKeys"))?Object(c.deepAccess)(a,"nativeParams.ext."+e+".sendTargetingKeys"):t)?t:s)&&(o[r]=n))}),o}function b(e,r){var n={message:"assetResponse",adId:e.adId,assets:[]};return r.native.hasOwnProperty("adTemplate")&&(n.adTemplate=g(r.native.adTemplate)),r.native.hasOwnProperty("rendererUrl")&&(n.rendererUrl=g(r.native.rendererUrl)),e.assets.forEach(function(e){var e=Object(c.getKeyByValue)(u.NATIVE_KEYS,e),t=g(r.native[e]);n.assets.push({key:e,value:t})}),n}function m(e,n){var i={message:"assetResponse",adId:e.adId,assets:[]};return Object.keys(n.native).forEach(function(r,e){var t;"adTemplate"===r&&n.native[r]?i.adTemplate=g(n.native[r]):"rendererUrl"===r&&n.native[r]?i.rendererUrl=g(n.native[r]):"ext"===r?Object.keys(n.native[r]).forEach(function(e){var t;n.native[r][e]&&(t=g(n.native[r][e]),i.assets.push({key:e,value:t}))}):n.native[r]&&u.NATIVE_KEYS.hasOwnProperty(r)&&(t=g(n.native[r]),i.assets.push({key:r,value:t}))}),i}function g(e){return"object"==typeof e&&e.url?e.url:e}},function(e,t){e.exports=function(e){return"function"==typeof e}},function(e,t,r){function g(e,t){this.stopped=e,this.result=t}var n=r(9),v=r(25),y=r(14),h=r(12),O=r(48),j=r(95),I=r(41),A=r(60),x=r(53),S=r(75),E=r(96),T=n.TypeError,w=g.prototype;e.exports=function(e,t,r){function n(e){return a&&E(a,"normal",e),new g(!0,e)}function i(e){return l?(h(e),b?m(e[0],e[1],n):m(e[0],e[1])):b?m(e,n):m(e)}var a,o,s,d,c,u,p=r&&r.that,l=!(!r||!r.AS_ENTRIES),f=!(!r||!r.IS_ITERATOR),b=!(!r||!r.INTERRUPTED),m=v(t,p);if(f)a=e;else{if(!(r=S(e)))throw T(O(e)+" is not iterable");if(j(r)){for(o=0,s=I(e);o<s;o++)if((d=i(e[o]))&&A(w,d))return d;return new g(!1)}a=x(e,r)}for(c=a.next;!(u=y(c,a)).done;){try{d=i(u.value)}catch(e){E(a,"throw",e)}if("object"==typeof d&&d&&A(w,d))return d}return new g(!1)}},function(e,t,r){var n=r(9),i=r(17),a=r(48),o=n.TypeError;e.exports=function(e){if(i(e))return e;throw o(a(e)+" is not a function")}},function(e,t,r){var n=r(9),i=r(80),a=r(28),o=r(63),s=r(79),d=r(78),c=i("wks"),u=n.Symbol,p=u&&u.for,l=d?u:u&&u.withoutSetter||o;e.exports=function(e){var t;return a(c,e)&&(s||"string"==typeof c[e])||(t="Symbol."+e,s&&a(u,e)?c[e]=u[e]:c[e]=(d&&p?p:l)(t)),c[e]}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){"use strict";r.d(t,"c",function(){return p}),r.d(t,"d",function(){return l}),r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o});var t=r(8),s=r(0),n=r(4),c=r.n(n),u=["core","prebid-module"],p=[];function i(e){var e=void 0===e?{}:e,n=e.gvlid,i=e.moduleName,a=e.moduleType;function d(t){return c()(u,a)?t({valid:!0}):(l(n,i,{hasEnforcementHook:!1},function(e){r=e&&e.hasEnforcementHook?t(e):(e={hasEnforcementHook:!1,valid:Object(s.hasDeviceAccess)()},t(e))}),r);var r}function o(t){function r(e){if(e&&e.valid)try{return!!window.localStorage}catch(e){Object(s.logError)("Local storage api disabled")}return!1}if(!t||"function"!=typeof t)return d(r);p.push(function(){var e=d(r);t(e)})}return{setCookie:function(n,i,a,o,s,t){function r(e){var t,r;e&&e.valid&&(e=s&&""!==s?" ;domain="+encodeURIComponent(s):"",t=a&&""!==a?" ;expires="+a:"",r=null!=o&&"none"==o.toLowerCase()?"; Secure":"",document.cookie=n+"="+encodeURIComponent(i)+t+"; path=/"+e+(o?"; SameSite="+o:"")+r)}if(!t||"function"!=typeof t)return d(r);p.push(function(){var e=d(r);t(e)})},getCookie:function(t,r){function n(e){return e&&e.valid&&(e=window.document.cookie.match("(^|;)\\s*"+t+"\\s*=\\s*([^;]*)\\s*(;|$)"))?decodeURIComponent(e[2]):null}if(!r||"function"!=typeof r)return d(n);p.push(function(){var e=d(n);r(e)})},localStorageIsEnabled:function(t){function r(e){if(e&&e.valid)try{return localStorage.setItem("prebid.cookieTest","1"),"1"===localStorage.getItem("prebid.cookieTest")}catch(e){}finally{try{localStorage.removeItem("prebid.cookieTest")}catch(e){}}return!1}if(!t||"function"!=typeof t)return d(r);p.push(function(){var e=d(r);t(e)})},cookiesAreEnabled:function(t){function r(e){return!(!e||!e.valid||!Object(s.checkCookieSupport)()&&(window.document.cookie="prebid.cookieTest",-1===window.document.cookie.indexOf("prebid.cookieTest")))}if(!t||"function"!=typeof t)return d(r);p.push(function(){var e=d(r);t(e)})},setDataInLocalStorage:function(t,r,n){function i(e){e&&e.valid&&o()&&window.localStorage.setItem(t,r)}if(!n||"function"!=typeof n)return d(i);p.push(function(){var e=d(i);n(e)})},getDataFromLocalStorage:function(t,r){function n(e){return e&&e.valid&&o()?window.localStorage.getItem(t):null}if(!r||"function"!=typeof r)return d(n);p.push(function(){var e=d(n);r(e)})},removeDataFromLocalStorage:function(t,r){function n(e){e&&e.valid&&o()&&window.localStorage.removeItem(t)}if(!r||"function"!=typeof r)return d(n);p.push(function(){var e=d(n);r(e)})},hasLocalStorage:o,findSimilarCookies:function(a,t){function r(e){if(e&&e.valid){var t=[];if(Object(s.hasDeviceAccess)())for(var r=document.cookie.split(";");r.length;){var n=r.pop(),i=(i=n.indexOf("="))<0?n.length:i;0<=decodeURIComponent(n.slice(0,i).replace(/^\s+/,"")).indexOf(a)&&t.push(decodeURIComponent(n.slice(i+1)))}return t}}if(!t||"function"!=typeof t)return d(r);p.push(function(){var e=d(r);t(e)})}}}var l=Object(t.b)("async",function(e,t,r,n){n(r)},"validateStorageEnforcement");function a(e){return i({moduleName:e,moduleType:"core"})}function o(e,t){return i({gvlid:e,moduleName:t})}},function(e,t,r){function n(e){return o(e)?e:void 0}var i=r(47),a=r(9),o=r(17);e.exports=function(e,t){return arguments.length<2?n(i[e])||n(a[e]):i[e]&&i[e][t]||a[e]&&a[e][t]}},function(e,t,r){r=r(21);e.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(e,t,r){var n=r(15),i=r(19),a=r(44),o=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:a?o(e,t):function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(17);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"a",function(){return n}),r.d(t,"c",function(){return s}),r(7);var i=r(0),a=r(1),t=(r(4),r(8)),o="outstream",n="instream";function s(e,t){var t=Object(i.getBidRequest)(e.requestId,t),r=t&&Object(i.deepAccess)(t,"mediaTypes.video"),n=r&&Object(i.deepAccess)(r,"context");return d(e,t,r,n)}var d=Object(t.b)("sync",function(e,t,r,n){return!t||r&&n!==o?a.b.getConfig("cache.url")||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):(Object(i.logError)('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with jwpb.setConfig({ cache: {url: "..."} });\n      '),!1):n!==o||!!(e.renderer||t.renderer||r.renderer)},"checkVideoBidSetup")},function(e,t,r){var n=r(15),i=r(50),a=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return a(i(e),t)}},function(e,t,r){var n=r(9),i=r(24),a=r(81),o=r(83),s=r(12),d=r(59),c=n.TypeError,u=Object.defineProperty,p=Object.getOwnPropertyDescriptor;t.f=i?o?function(e,t,r){var n;return s(e),t=d(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&"writable"in r&&!r.writable&&(n=p(e,t))&&n.writable&&(e[t]=r.value,r={configurable:("configurable"in r?r:n).configurable,enumerable:("enumerable"in r?r:n).enumerable,writable:!1}),u(e,t,r)}:u:function(e,t,r){if(s(e),t=d(t),s(r),a)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i});var l=r(3),f=r(1),b=r(0),n=i();function i(c,e){void 0===c&&(c=3e3);var e=void 0===e?{}:e,u=e.request,p=e.done;return function(e,t,r,n){void 0===n&&(n={});try{var i,a,o=n.method||(r?"POST":"GET"),s=document.createElement("a"),d=(s.href=e,"object"==typeof t&&null!==t?t:{success:function(){Object(b.logMessage)("xhr success")},error:function(e){Object(b.logError)("xhr error",null,e)}});"function"==typeof t&&(d.success=t),(i=new window.XMLHttpRequest).onreadystatechange=function(){var e;4===i.readyState&&("function"==typeof p&&p(s.origin),200<=(e=i.status)&&e<300||304===e?d.success(i.responseText,i):d.error(i.statusText,i))},f.b.getConfig("disableAjaxTimeout")||(i.ontimeout=function(){Object(b.logError)("  xhr timeout after ",i.timeout,"ms")}),"GET"===o&&r&&(a=Object(b.parseUrl)(e,n),Object(l.default)(a.search,r),e=Object(b.buildUrl)(a)),i.open(o,e,!0),f.b.getConfig("disableAjaxTimeout")||(i.timeout=c),n.withCredentials&&(i.withCredentials=!0),Object(b._each)(n.customHeaders,function(e,t){i.setRequestHeader(t,e)}),n.preflight&&i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-Type",n.contentType||"text/plain"),"function"==typeof u&&u(s.origin),"POST"===o&&r?i.send(r):i.send()}catch(e){Object(b.logError)("xhr construction",e),"object"==typeof t&&null!==t&&t.error(e)}}}},function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r(0),i={};function a(e,t,r){r=r,e=i[e]=i[e]||{bidders:{}};r=r?e.bidders[r]=e.bidders[r]||{}:e;return r[t]=(r[t]||0)+1,r[t]}var o={incrementRequestsCounter:function(e){return a(e,"requestsCounter")},incrementBidderRequestsCounter:function(e,t){return a(e,"requestsCounter",t)},incrementBidderWinsCounter:function(e,t){return a(e,"winsCounter",t)},getRequestsCounter:function(e){return Object(n.deepAccess)(i,e+".requestsCounter")||0},getBidderRequestsCounter:function(e,t){return Object(n.deepAccess)(i,e+".bidders."+t+".requestsCounter")||0},getBidderWinsCounter:function(e,t){return Object(n.deepAccess)(i,e+".bidders."+t+".winsCounter")||0}}},function(e,t,r){var n=r(24),i=r(29),a=r(45);e.exports=n?function(e,t,r){return i.f(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){r=r(53);e.exports=r},function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"c",function(){return a}),r.d(t,"b",function(){return o});var t=r(1),d=r(0),n=r(4),c=r.n(n),u=[];function i(e,t){return e.labelAll?{labelAll:!0,labels:e.labelAll,activeLabels:t}:{labelAll:!1,labels:e.labelAny,activeLabels:t}}function a(e,t){t=p(t=void 0===t?u:t);return!t.shouldFilter||!!t.sizesSupported[e]}function o(e,t,r,n){var e=void 0===e?{}:e,i=e.labels,i=void 0===i?[]:i,a=e.labelAll,a=void 0!==a&&a,e=e.activeLabels,o=void 0===e?[]:e,s=p(n=void 0===n?u:n),e=(t=Object(d.isPlainObject)(t)?Object(d.deepClone)(t):r?{banner:{sizes:r}}:{},Object(d.deepAccess)(t,"banner.sizes")),n=(s.shouldFilter&&e&&(t.banner.sizes=e.filter(function(e){return s.sizesSupported[e]})),Object.keys(t)),r={active:n.every(function(e){return"banner"!==e})||n.some(function(e){return"banner"===e})&&0<Object(d.deepAccess)(t,"banner.sizes.length")&&(0===i.length||!a&&(i.some(function(e){return s.labels[e]})||i.some(function(e){return c()(o,e)}))||a&&i.reduce(function(e,t){return e&&(s.labels[t]||c()(o,t))},!0)),mediaTypes:t};return e&&e.length!==t.banner.sizes.length&&(r.filterResults={before:e,after:t.banner.sizes}),r}function p(e){return e.reduce(function(r,e){if("object"==typeof e&&"string"==typeof e.mediaQuery&&0<e.mediaQuery.length){var t=!1;try{t=Object(d.getWindowTop)().matchMedia(e.mediaQuery).matches}catch(r){Object(d.logWarn)("Unfriendly iFrame blocks sizeConfig from being correctly evaluated"),t=matchMedia(e.mediaQuery).matches}t&&(Array.isArray(e.sizesSupported)&&(r.shouldFilter=!0),["labels","sizesSupported"].forEach(function(t){return(e[t]||[]).forEach(function(e){return r[t][e]=!0})}))}else Object(d.logWarn)('sizeConfig rule missing required property "mediaQuery"');return r},{labels:{},sizesSupported:{},shouldFilter:!1})}t.b.getConfig("sizeConfig",function(e){e=e.sizeConfig,u=e})},function(e,t,r){var n=r(76),i=r(46);e.exports=function(e){return n(i(e))}},function(e,t,r){var r=r(15),n=r({}.toString),i=r("".slice);e.exports=function(e){return i(n(e),8,-1)}},function(e,t){e.exports={}},function(e,t,r){var n=r(12),i=r(99),a=r(20)("species");e.exports=function(e,t){var e=n(e).constructor;return void 0===e||null==(e=n(e)[a])?t:i(e)}},function(e,t,r){"use strict";r.d(t,"a",function(){return b});var n,i,a,o,s,d,c,u=r(3),p=r(0),t=r(1),l=r(4),f=r.n(l),l=r(22),r=(t.b.setDefaults({userSync:Object(p.deepClone)({syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:0})}),Object(l.a)("usersync")),l=!Object(p.isSafariBrowser)()&&r.cookiesAreEnabled(),b=(n={config:t.b.getConfig("userSync"),browserSupportsCookies:l},i={},a={image:[],iframe:[]},o=new Set,d={image:!0,iframe:!(s={})},c=n.config,t.b.getConfig("userSync",function(e){var t;e.userSync&&(t=e.userSync.filterSettings,!Object(p.isPlainObject)(t)||t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"})),c=Object(u.default)(c,e.userSync)}),i.registerSync=function(e,t,r){return o.has(t)?Object(p.logMessage)('already fired syncs for "'+t+'", ignoring registerSync call'):c.syncEnabled&&Object(p.isArray)(a[e])?t?0!==c.syncsPerBidder&&Number(s[t])>=c.syncsPerBidder?Object(p.logWarn)('Number of user syncs exceeded for "'+t+'"'):i.canBidderRegisterSync(e,t)?(a[e].push([t,r]),(r=s)[n=t]?r[n]+=1:r[n]=1,void(s=r)):Object(p.logWarn)('Bidder "'+t+'" not permitted to register their "'+e+'" userSync pixels.'):Object(p.logWarn)("Bidder is required for registering sync"):Object(p.logWarn)('User sync type "'+e+'" not supported');var n},i.syncUsers=function(e){if(e=void 0===e?0:e)return setTimeout(m,Number(e));m()},i.triggerUserSyncs=function(){c.enableOverride&&i.syncUsers()},i.canBidderRegisterSync=function(e,t){return!(c.filterSettings&&(e=e,t=t,function(e,t){if(e.all&&e[t])return Object(p.logWarn)('Detected presence of the "filterSettings.all" and "filterSettings.'+t+'" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.'),0;var r=e.all||e[t],e=e.all?"all":t;if(r)return t=r.filter,r=r.bidders,t&&"include"!==t&&"exclude"!==t?(Object(p.logWarn)('UserSync "filterSettings.'+e+".filter\" setting '"+t+"' is not a valid option; use either 'include' or 'exclude'."),0):"*"===r||Array.isArray(r)&&0<r.length&&r.every(function(e){return Object(p.isStr)(e)&&"*"!==e})||(Object(p.logWarn)('Detected an invalid setup in userSync "filterSettings.'+e+".bidders\"; use either '*' (to represent all bidders) or an array of bidders."),0)}(n=c.filterSettings,e)?(d[e]=!0,r="*"===(n=n.all||n[e]).bidders?[t]:n.bidders,{include:function(e,t){return!f()(e,t)},exclude:function(e,t){return f()(e,t)}}[n.filter||"include"](r,t)):!d[e]));var r,n},i);function m(){if(c.syncEnabled&&n.browserSupportsCookies){try{d.iframe&&g(a.iframe,function(e){var t,r=e[0],e=e[1];Object(p.logMessage)("Invoking iframe user sync for bidder: "+r),Object(p.insertUserSyncIframe)(e),t=r,(e=a).image=e.image.filter(function(e){return e[0]!==t})}),d.image&&g(a.image,function(e){var t=e[0],e=e[1];Object(p.logMessage)("Invoking image pixel user sync for bidder: "+t),Object(p.triggerPixel)(e)})}catch(e){return Object(p.logError)("Error firing user syncs",e)}a={image:[],iframe:[]}}}function g(e,t){Object(p.shuffle)(e).forEach(function(e){t(e),o.add(e[0])})}},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var i=r(0);function n(e,t){var r=t&&t.src||"client",n=e||0;this.bidderCode=t&&t.bidder||"",this.width=0,this.height=0,this.statusMessage=function(){switch(n){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}(),this.adId=Object(i.getUniqueIdentifierStr)(),this.requestId=t&&t.bidId,this.mediaType="banner",this.source=r,this.getStatusCode=function(){return n},this.getSize=function(){return this.width+"x"+this.height}}function a(e,t){return new n(e,t)}},function(e,t,r){var n=r(117);e.exports=function(e){return n(e.length)}},function(e,t,r){var n=r(9),i=r(66),a=r(17),o=r(36),s=r(20)("toStringTag"),d=n.Object,c="Arguments"==o(function(){return arguments}());e.exports=i?o:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=d(e),s))?t:c?o(e):"Object"==(t=o(e))&&a(e.callee)?"Arguments":t}},function(e,t){v.SYNC=1,v.ASYNC=2,v.QUEUE=4;var r=Object.freeze({useProxy:!0,ready:0}),b=new WeakMap,n="2,1,0"===[1].reduce(function(e,t,r){return[e,t,r]},2).toString()?Array.prototype.reduce:function(e,t){var r,n=Object(this),i=n.length>>>0,a=0;if(t)r=t;else{for(;a<i&&!(a in n);)a++;r=n[a++]}for(;a<i;)a in n&&(r=e(r,n[a],a,n)),a++;return r};function m(e,t){return Array.prototype.slice.call(e,t)}var g=Object.assign||function(e){return n.call(m(arguments,1),function(t,r){return r&&Object.keys(r).forEach(function(e){t[e]=r[e]}),t},e)};function v(d){var c,e={},p=[];function t(e,t){return"function"==typeof e?o.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?o.apply(null,arguments):"object"==typeof e?function(n,e,i){var t=!0,a=(void 0===e&&(e=Object.getOwnPropertyNames(n),t=!1),{}),r=["constructor"];for(;(e=e.filter(function(e){return!("function"!=typeof n[e]||-1!==r.indexOf(e)||e.match(/^_/))})).forEach(function(e){var t,e=e.split(":"),r=e[0],e=e[1]||"sync";a[r]||(t=n[r],a[r]=n[r]=o(e,t,i?[i,r]:void 0))}),n=Object.getPrototypeOf(n),t&&n;);return a}.apply(null,arguments):void 0}function l(a){var o=Array.isArray(a)?a:a.split(".");return n.call(o,function(t,r,e){var n=t[r],i=!1;return n||(e===o.length-1?(c||p.push(function(){i||console.warn("fun-hooks: referenced '"+a+"' but it was never created")}),t[r]=f(function(e){t[r]=e,i=!0})):t[r]={})},e)}function f(n){var a=[],o=[],s=function(){},e={before:function(e,t){return r.call(this,a,"before",e,t)},after:function(e,t){return r.call(this,o,"after",e,t)},getHooks:function(r){var e=a.concat(o);"object"==typeof r&&(e=e.filter(function(t){return Object.keys(r).every(function(e){return t[e]===r[e]})}));try{g(e,{remove:function(){return e.forEach(function(e){e.remove()}),this}})}catch(r){console.error("error adding `remove` to array, did you modify Array.prototype?")}return e},removeAll:function(){return this.getHooks().remove()}};return b.set(e.after,{install:function(e,t,r){this.type=e,(s=r)(a,o),n&&n(t)}}),e;function r(t,e,r,n){var i={hook:r,type:e,priority:n||10,remove:function(){var e=t.indexOf(i);-1!==e&&(t.splice(e,1),s(a,o))}};return t.push(i),t.sort(function(e,t){return t.priority-e.priority}),s(a,o),this}}function o(u,e,t){var r=e.after&&b.get(e.after);if(r){if(r.type!==u)throw"fun-hooks: recreated hookable with different type";return e}var n,i,a=t?l(t):f(),o={get:function(e,t){return a[t]||Reflect.get.apply(Reflect,arguments)}};return c||p.push(s),d.useProxy&&"function"==typeof Proxy&&Proxy.revocable?i=new Proxy(e,o):g(i=function(){return o.apply?o.apply(e,this,m(arguments)):e.apply(this,arguments)},a),b.get(i.after).install(u,i,function(e,t){var d,c=[];function r(e){c.push(e.hook)}n=e.length||t.length?(e.forEach(r),d=c.push(void 0)-1,t.forEach(r),function(t,r,e){var n,i=0,a="async"===u&&"function"==typeof e[e.length-1]&&e.pop();function o(e){"sync"===u?n=e:a&&a.apply(null,arguments)}function s(e){var t;if(c[i])return t=m(arguments),s.bail=o,t.unshift(s),c[i++].apply(r,t);"sync"===u?n=e:a&&a.apply(null,arguments)}return c[d]=function(){var e=m(arguments,1),e=("async"===u&&a&&(delete s.bail,e.push(s)),t.apply(r,e));"sync"===u&&s(e)},s.apply(null,e),n}):void 0,s()}),i;function s(){!c&&("sync"!==u||d.ready&v.SYNC)&&("async"!==u||d.ready&v.ASYNC)?"sync"!==u&&d.ready&v.QUEUE?o.apply=function(){var e=arguments;p.push(function(){i.apply(e[1],e[2])})}:o.apply=function(){throw"fun-hooks: hooked function not ready"}:o.apply=n}}return(d=g({},r,d)).ready?t.ready=function(){c=!0;for(var e,t=p;e=t.shift();)e()}:c=!0,t.get=l,t}e.exports=v},function(e,t,r){r=r(21);e.exports=!r(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(9).TypeError;e.exports=function(e){if(null==e)throw n("Can't call method on "+e);return e}},function(e,t){e.exports={}},function(e,t,r){var n=r(9).String;e.exports=function(e){try{return n(e)}catch(e){return"Object"}}},function(e,t){e.exports=!0},function(e,t,r){var n=r(9),i=r(46),a=n.Object;e.exports=function(e){return a(i(e))}},function(e,t,r){var n,i,a,o,s,d,c,u,p=r(128),l=r(9),f=r(15),b=r(26),m=r(32),g=r(28),v=r(62),y=r(69),r=r(52),h=l.TypeError,l=l.WeakMap;c=p||v.state?(n=v.state||(v.state=new l),i=f(n.get),a=f(n.has),o=f(n.set),s=function(e,t){if(a(n,e))throw new h("Object already initialized");return t.facade=e,o(n,e,t),t},d=function(e){return i(n,e)||{}},function(e){return a(n,e)}):(r[u=y("state")]=!0,s=function(e,t){if(g(e,u))throw new h("Object already initialized");return t.facade=e,m(e,u,t),t},d=function(e){return g(e,u)?e[u]:{}},function(e){return g(e,u)}),e.exports={set:s,get:d,has:c,enforce:function(e){return c(e)?d(e):s(e,{})},getterFor:function(t){return function(e){if(b(e)&&(e=d(e)).type===t)return e;throw h("Incompatible receiver, "+t+" required")}}}},function(e,t){e.exports={}},function(e,t,r){var n=r(9),i=r(14),a=r(19),o=r(12),s=r(48),d=r(75),c=n.TypeError;e.exports=function(e,t){var r=arguments.length<2?d(e):t;if(a(r))return o(i(r,e));throw c(s(e)+" is not iterable")}},function(e,t,r){var n=r(9),i=r(42),a=n.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return a(e)}},function(e,t,r){"use strict";function n(e,t){if(null==e)return{};for(var r,n={},i=Object.keys(e),a=0;a<i.length;a++)r=i[a],0<=t.indexOf(r)||(n[r]=e[r]);return n}r.d(t,"a",function(){return n})},function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"b",function(){return l});var t=r(5),u=r.n(t),n=r(0),i={buckets:[{max:5,increment:.5}]},a={buckets:[{max:20,increment:.1}]},o={buckets:[{max:20,increment:.01}]},s={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},d={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function c(e,t,r){void 0===r&&(r=1);var n=parseFloat(e);return{low:""===(n=isNaN(n)?"":n)?"":p(e,i,r),med:""===n?"":p(e,a,r),high:""===n?"":p(e,o,r),auto:""===n?"":p(e,d,r),dense:""===n?"":p(e,s,r),custom:""===n?"":p(e,t,r)}}function p(r,e,n){var i="";if(!l(e))return i;var t,a,o,s,d=e.buckets.reduce(function(e,t){return e.max>t.max?e:t},{max:0}),c=0,e=u()(e.buckets,function(e){if(r>d.max*n){var t=e.precision;i=(e.max*n).toFixed(t=void 0===t?2:t)}else{if(r<=e.max*n&&c*n<=r)return e.min=c,e;c=e.max}});return e&&(t=r,a=void 0!==e.precision?e.precision:2,o=e.increment*n,e=e.min*n,s=Math.pow(10,a+2),t=Math.floor((t*s-e*s)/(o*s))*o+e,i=(t=Number(t.toFixed(10))).toFixed(a)),i}function l(e){if(Object(n.isEmpty)(e)||!e.buckets||!Array.isArray(e.buckets))return!1;var t=!0;return e.buckets.forEach(function(e){e.max&&e.increment||(t=!1)}),t}},function(e,t,r){"use strict";function n(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}r.d(t,"a",function(){return n})},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var g,v=r(1),y=r(0),n=(g=window,function(){var e,t,r=[],n=function(e){try{return e.location.ancestorOrigins?e.location.ancestorOrigins:void 0}catch(e){}}(g),i=v.b.getConfig("maxNestedIframes"),a=!1,o=0,s=!1,d=!1;do{var c=b,u=d,p=void 0,l=!1,f=null,d=!1,b=b?b.parent:g;try{p=b.location.href||null}catch(e){l=!0}if(l)if(u){l=c.context;try{e=f=l.sourceUrl,s=!0,b===g.top&&(a=!0),l.canonicalUrl&&(t=l.canonicalUrl)}catch(e){}}else{Object(y.logWarn)("Trying to access cross domain iframe. Continuing without referrer and location");try{var m=c.document.referrer;m&&(f=m,b===g.top&&(a=!0))}catch(e){}(f=!f&&n&&n[o-1]?n[o-1]:f)&&!s&&(e=f)}else p&&(e=f=p,s=!1,b===g.top)&&(a=!0,(u=function(e){var t=v.b.getConfig("pageUrl");if(t)return t;try{var r=e.querySelector("link[rel='canonical']");if(null!==r)return r.href}catch(e){}return null}(b.document))&&(t=u)),b.context&&b.context.sourceUrl&&(d=!0)}while(r.push(f),o++,b!==g.top&&o<i);return r.reverse(),{referer:e||null,reachedTop:a,isAmp:s,numIframes:o-1,stack:r,canonicalUrl:t||null}})},function(e,t,r){var n=r(111),i=r(77);e.exports=function(e){e=n(e,"string");return i(e)?e:e+""}},function(e,t,r){r=r(15);e.exports=r({}.isPrototypeOf)},function(e,t,r){var n=r(19);e.exports=function(e,t){e=e[t];return null==e?void 0:n(e)}},function(e,t,r){var n=r(9),r=r(115),n=n["__core-js_shared__"]||r("__core-js_shared__",{});e.exports=n},function(e,t,r){var r=r(15),n=0,i=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++n+i,36)}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){e=+e;return e!=e||0==e?0:(0<e?n:r)(e)}},function(e,t,r){function n(){}function i(e){if(!d(e))return!1;try{return f(n,l,e),!0}catch(e){return!1}}function a(e){if(!d(e))return!1;switch(c(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!m(b,p(e))}catch(e){return!0}}var o=r(15),s=r(21),d=r(17),c=r(42),u=r(23),p=r(85),l=[],f=u("Reflect","construct"),b=/^\s*(?:class|function)\b/,m=o(b.exec),g=!b.exec(n);a.sham=!0,e.exports=!f||s(function(){var e;return i(i.call)||!i(Object)||!i(function(){e=!0})||e})?a:i},function(e,t,r){var n={};n[r(20)("toStringTag")]="z",e.exports="[object z]"===String(n)},function(e,t){e.exports=function(){}},function(e,t,r){r=r(23);e.exports=r},function(e,t,r){var n=r(80),i=r(63),a=n("keys");e.exports=function(e){return a[e]||(a[e]=i(e))}},function(e,t,r){"use strict";function m(){return this}var g=r(11),v=r(14),y=r(49),n=r(129),h=r(17),O=r(130),j=r(91),I=r(136),A=r(74),x=r(32),S=r(73),i=r(20),E=r(37),r=r(89),T=n.PROPER,w=n.CONFIGURABLE,_=r.IteratorPrototype,C=r.BUGGY_SAFARI_ITERATORS,k=i("iterator");e.exports=function(e,t,r,n,i,a,o){O(r,t,n);function s(e){if(e===i&&f)return f;if(!C&&e in p)return p[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}}var d,c,n=t+" Iterator",u=!1,p=e.prototype,l=p[k]||p["@@iterator"]||i&&p[i],f=!C&&l||s(i),b="Array"==t&&p.entries||l;if(b&&(b=j(b.call(new e)))!==Object.prototype&&b.next&&(y||j(b)===_||(I?I(b,_):h(b[k])||S(b,k,m)),A(b,n,!0,!0),y&&(E[n]=m)),T&&"values"==i&&l&&"values"!==l.name&&(!y&&w?x(p,"name","values"):(u=!0,f=function(){return v(l,this)})),i)if(d={values:s("values"),keys:a?f:s("keys"),entries:s("entries")},o)for(c in d)!C&&!u&&c in p||S(p,c,d[c]);else g({target:t,proto:!0,forced:C||u},d);return y&&!o||p[k]===f||S(p,k,f,{name:i}),E[t]=f,d}},function(e,t,r){function n(){}function i(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}var a,o=r(12),s=r(131),d=r(72),c=r(52),u=r(133),p=r(82),l=r(69)("IE_PROTO"),f=function(e){return"<script>"+e+"<\/script>"},b=function(){try{a=new ActiveXObject("htmlfile")}catch(e){}var e,t;b="undefined"==typeof document||document.domain&&a?i(a):((t=p("iframe")).style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F);for(var r=d.length;r--;)delete b.prototype[d[r]];return b()};c[l]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(n.prototype=o(e),r=new n,n.prototype=null,r[l]=e):r=b(),void 0===t?r:s.f(r,t)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,r){var i=r(32);e.exports=function(e,t,r,n){n&&n.enumerable?e[t]=r:i(e,t,r)}},function(e,t,r){var i=r(66),a=r(29).f,o=r(32),s=r(28),d=r(135),c=r(20)("toStringTag");e.exports=function(e,t,r,n){e&&(r=r?e:e.prototype,s(r,c)||a(r,c,{configurable:!0,value:t}),n&&!i&&o(r,"toString",d))}},function(e,t,r){var n=r(42),i=r(61),a=r(37),o=r(20)("iterator");e.exports=function(e){if(null!=e)return i(e,o)||i(e,"@@iterator")||a[n(e)]}},function(e,t,r){var n=r(9),i=r(15),a=r(21),o=r(36),s=n.Object,d=i("".split);e.exports=a(function(){return!s("z").propertyIsEnumerable(0)})?function(e){return"String"==o(e)?d(e,""):s(e)}:s},function(e,t,r){var n=r(9),i=r(23),a=r(17),o=r(60),r=r(78),s=n.Object;e.exports=r?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return a(t)&&o(t.prototype,s(e))}},function(e,t,r){r=r(79);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,r){var n=r(112),r=r(21);e.exports=!!Object.getOwnPropertySymbols&&!r(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},function(e,t,r){var n=r(49),i=r(62);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(e,t,r){var n=r(24),i=r(21),a=r(82);e.exports=!n&&!i(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(9),r=r(26),i=n.document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,r){var n=r(24),r=r(21);e.exports=n&&r(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},function(e,t,r){function n(l){var f=1==l,b=2==l,m=3==l,g=4==l,v=6==l,y=7==l,h=5==l||v;return function(e,t,r,n){for(var i,a,o=I(e),s=j(o),d=O(t,r),c=A(s),u=0,t=n||x,p=f?t(e,c):b||y?t(e,0):void 0;u<c;u++)if((h||u in s)&&(a=d(i=s[u],u,o),l))if(f)p[u]=a;else if(a)switch(l){case 3:return!0;case 5:return i;case 6:return u;case 2:S(p,i)}else switch(l){case 4:return!1;case 7:S(p,i)}return v?-1:m||g?g:p}}var O=r(25),i=r(15),j=r(76),I=r(50),A=r(41),x=r(118),S=i([].push);e.exports={forEach:n(0),map:n(1),filter:n(2),some:n(3),every:n(4),find:n(5),findIndex:n(6),filterReject:n(7)}},function(e,t,r){var n=r(15),i=r(17),r=r(62),a=n(Function.toString);i(r.inspectSource)||(r.inspectSource=function(e){return a(e)}),e.exports=r.inspectSource},function(e,t,r){function n(s){return function(e,t,r){var n,i=d(e),a=u(i),o=c(r,a);if(s&&t!=t){for(;o<a;)if((n=i[o++])!=n)return!0}else for(;o<a;o++)if((s||o in i)&&i[o]===t)return s||o||0;return!s&&-1}}var d=r(35),c=r(87),u=r(41);e.exports={includes:n(!0),indexOf:n(!1)}},function(e,t,r){var n=r(64),i=Math.max,a=Math.min;e.exports=function(e,t){e=n(e);return e<0?i(e+t,0):a(e,t)}},function(e,t,r){"use strict";var n=r(35),i=r(67),a=r(37),o=r(51),s=r(29).f,d=r(70),c=r(49),r=r(24),u=o.set,p=o.getterFor("Array Iterator"),o=(e.exports=d(Array,"Array",function(e,t){u(this,{type:"Array Iterator",target:n(e),index:0,kind:t})},function(){var e=p(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?{value:e.target=void 0,done:!0}:"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}},"values"),a.Arguments=a.Array);if(i("keys"),i("values"),i("entries"),!c&&r&&"values"!==o.name)try{s(o,"name",{value:"values"})}catch(e){}},function(e,t,r){"use strict";var n,i,a=r(21),o=r(17),s=r(71),d=r(91),c=r(73),u=r(20),r=r(49),p=u("iterator"),u=!1;[].keys&&("next"in(i=[].keys())?(d=d(d(i)))!==Object.prototype&&(n=d):u=!0),null==n||a(function(){var e={};return n[p].call(e)!==e})?n={}:r&&(n=s(n)),o(n[p])||c(n,p,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:u}},function(e,t,r){var n=r(15),o=r(28),s=r(35),d=r(86).indexOf,c=r(52),u=n([].push);e.exports=function(e,t){var r,n=s(e),i=0,a=[];for(r in n)!o(c,r)&&o(n,r)&&u(a,r);for(;t.length>i;)!o(n,r=t[i++])||~d(a,r)||u(a,r);return a}},function(e,t,r){var n=r(9),i=r(28),a=r(17),o=r(50),s=r(69),r=r(134),d=s("IE_PROTO"),c=n.Object,u=c.prototype;e.exports=r?c.getPrototypeOf:function(e){e=o(e);if(i(e,d))return e[d];var t=e.constructor;return a(t)&&e instanceof t?t.prototype:e instanceof c?u:null}},function(e,t,r){function n(e){c(e,g,{value:{objectID:"O"+v++,weakData:{}}})}var o=r(11),s=r(15),i=r(52),a=r(26),d=r(28),c=r(29).f,u=r(93),p=r(141),l=r(143),f=r(63),b=r(145),m=!1,g=f("meta"),v=0,y=e.exports={enable:function(){y.enable=function(){},m=!0;var i=u.f,a=s([].splice),e={};e[g]=1,i(e).length&&(u.f=function(e){for(var t=i(e),r=0,n=t.length;r<n;r++)if(t[r]===g){a(t,r,1);break}return t},o({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:p.f}))},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!d(e,g)){if(!l(e))return"F";if(!t)return"E";n(e)}return e[g].objectID},getWeakData:function(e,t){if(!d(e,g)){if(!l(e))return!0;if(!t)return!1;n(e)}return e[g].weakData},onFreeze:function(e){return b&&m&&l(e)&&!d(e,g)&&n(e),e}};i[g]=!0},function(e,t,r){var n=r(90),i=r(72).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){"use strict";var n=r(59),i=r(29),a=r(45);e.exports=function(e,t,r){t=n(t);t in e?i.f(e,t,a(0,r)):e[t]=r}},function(e,t,r){var n=r(20),i=r(37),a=n("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[a]===e)}},function(e,t,r){var a=r(14),o=r(12),s=r(61);e.exports=function(e,t,r){var n,i;o(e);try{if(!(n=s(e,"return"))){if("throw"===t)throw r;return r}n=a(n,e)}catch(e){i=!0,n=e}if("throw"===t)throw r;if(i)throw n;return o(n),r}},function(e,t,r){var n=r(9),i=r(60),a=n.TypeError;e.exports=function(e,t){if(i(t,e))return e;throw a("Incorrect invocation")}},function(e,t,r){"use strict";var n=r(149).charAt,i=r(54),a=r(51),r=r(70),o=a.set,s=a.getterFor("String Iterator");r(String,"String",function(e){o(this,{type:"String Iterator",string:i(e),index:0})},function(){var e=s(this),t=e.string,r=e.index;return r>=t.length?{value:void 0,done:!0}:(t=n(t,r),e.index+=t.length,{value:t,done:!1})})},function(e,t,r){var n=r(9),i=r(65),a=r(48),o=n.TypeError;e.exports=function(e){if(i(e))return e;throw o(a(e)+" is not a constructor")}},function(e,t,r){var n=r(125);r(152),r(154),r(157),r(159),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(171),r(172),r(173),r(174),e.exports=n},function(e,t){e.exports=function e(t){var r,n=Array.isArray(t)?[]:{};for(r in t){var i=t[r];n[r]=i&&"object"==typeof i?e(i):i}return n}},function(e,t,r){r=r(183);e.exports=r},function(e,t,r){r=r(104);e.exports=r},function(e,t,r){r=r(105);e.exports=r},function(e,t,r){r(106);r=r(68);e.exports=r("Array","find")},function(e,t,r){"use strict";var n=r(11),i=r(84).find,r=r(67),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),n({target:"Array",proto:!0,forced:a},{find:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),r("find")},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var r=r(44),n=Function.prototype,i=n.apply,a=n.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},function(e,t,r){var n=r(24),i=r(14),a=r(110),o=r(45),s=r(35),d=r(59),c=r(28),u=r(81),p=Object.getOwnPropertyDescriptor;t.f=n?p:function(e,t){if(e=s(e),t=d(t),u)try{return p(e,t)}catch(e){}if(c(e,t))return o(!i(a.f,e,t),e[t])}},function(e,t,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!n.call({1:2},1);t.f=a?function(e){e=i(this,e);return!!e&&e.enumerable}:n},function(e,t,r){var n=r(9),i=r(14),a=r(26),o=r(77),s=r(61),d=r(114),r=r(20),c=n.TypeError,u=r("toPrimitive");e.exports=function(e,t){if(!a(e)||o(e))return e;var r=s(e,u);if(r){if(r=i(r,e,t=void 0===t?"default":t),!a(r)||o(r))return r;throw c("Can't convert object to primitive value")}return d(e,t=void 0===t?"number":t)}},function(e,t,r){var n,i,a=r(9),r=r(113),o=a.process,a=a.Deno,o=o&&o.versions||a&&a.version,a=o&&o.v8;!(i=a?0<(n=a.split("."))[0]&&n[0]<4?1:+(n[0]+n[1]):i)&&r&&(!(n=r.match(/Edge\/(\d+)/))||74<=n[1])&&(n=r.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},function(e,t,r){r=r(23);e.exports=r("navigator","userAgent")||""},function(e,t,r){var n=r(9),i=r(14),a=r(17),o=r(26),s=n.TypeError;e.exports=function(e,t){var r,n;if("string"===t&&a(r=e.toString)&&!o(n=i(r,e)))return n;if(a(r=e.valueOf)&&!o(n=i(r,e)))return n;if("string"!==t&&a(r=e.toString)&&!o(n=i(r,e)))return n;throw s("Can't convert object to primitive value")}},function(e,t,r){var n=r(9),i=Object.defineProperty;e.exports=function(t,r){try{i(n,t,{value:r,configurable:!0,writable:!0})}catch(e){n[t]=r}return r}},function(e,t,r){function n(e,t){return(e=d[s(e)])==u||e!=c&&(a(t)?i(t):!!t)}var i=r(21),a=r(17),o=/#|\.prototype\./,s=n.normalize=function(e){return String(e).replace(o,".").toLowerCase()},d=n.data={},c=n.NATIVE="N",u=n.POLYFILL="P";e.exports=n},function(e,t,r){var n=r(64),i=Math.min;e.exports=function(e){return 0<e?i(n(e),9007199254740991):0}},function(e,t,r){var n=r(119);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},function(e,t,r){var n=r(9),i=r(120),a=r(65),o=r(26),s=r(20)("species"),d=n.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,(a(t)&&(t===d||i(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?d:t}},function(e,t,r){var n=r(36);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){r=r(122);e.exports=r},function(e,t,r){r=r(123);e.exports=r},function(e,t,r){r(124);r=r(68);e.exports=r("Array","includes")},function(e,t,r){"use strict";var n=r(11),i=r(86).includes,r=r(67);n({target:"Array",proto:!0},{includes:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),r("includes")},function(e,t,r){r=r(126);e.exports=r},function(e,t,r){var n=r(127);r(150),e.exports=n},function(e,t,r){r(88),r(138),r(139),r(98);r=r(47);e.exports=r.Set},function(e,t,r){var n=r(9),i=r(17),r=r(85),n=n.WeakMap;e.exports=i(n)&&/native code/.test(r(n))},function(e,t,r){var n=r(24),r=r(28),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,r=r(i,"name"),o=r&&"something"===function(){}.name,n=r&&(!n||a(i,"name").configurable);e.exports={EXISTS:r,PROPER:o,CONFIGURABLE:n}},function(e,t,r){"use strict";function i(){return this}var a=r(89).IteratorPrototype,o=r(71),s=r(45),d=r(74),c=r(37);e.exports=function(e,t,r,n){t+=" Iterator";return e.prototype=o(a,{next:s(+!n,r)}),d(e,t,!1,!0),c[t]=i,e}},function(e,t,r){var n=r(24),i=r(83),s=r(29),d=r(12),c=r(35),u=r(132);t.f=n&&!i?Object.defineProperties:function(e,t){d(e);for(var r,n=c(t),i=u(t),a=i.length,o=0;o<a;)s.f(e,r=i[o++],n[r]);return e}},function(e,t,r){var n=r(90),i=r(72);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){r=r(23);e.exports=r("document","documentElement")},function(e,t,r){r=r(21);e.exports=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,r){"use strict";var n=r(66),i=r(42);e.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,r){var i=r(15),a=r(12),o=r(137);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r,n=!1,e={};try{(r=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(e,[]),n=e instanceof Array}catch(r){}return function(e,t){return a(e),o(t),n?r(e,t):e.__proto__=t,e}}():void 0)},function(e,t,r){var n=r(9),i=r(17),a=n.String,o=n.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw o("Can't set "+a(e)+" as a prototype")}},function(e,t){},function(e,t,r){"use strict";r(140)("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},r(146))},function(e,t,r){"use strict";var l=r(11),f=r(9),b=r(92),m=r(21),g=r(32),v=r(18),y=r(97),h=r(17),O=r(26),j=r(74),I=r(29).f,A=r(84).forEach,x=r(24),r=r(51),S=r.set,E=r.getterFor;e.exports=function(r,e,t){var n,a,o,i=-1!==r.indexOf("Map"),s=-1!==r.indexOf("Weak"),d=i?"set":"add",c=f[r],u=c&&c.prototype,p={};return x&&h(c)&&(s||u.forEach&&!m(function(){(new c).entries().next()}))?(a=(n=e(function(e,t){S(y(e,a),{type:r,collection:new c}),null!=t&&v(t,e[d],{that:e,AS_ENTRIES:i})})).prototype,o=E(r),A(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(n){var i="add"==n||"set"==n;n in u&&(!s||"clear"!=n)&&g(a,n,function(e,t){var r=o(this).collection;if(!i&&s&&!O(e))return"get"==n&&void 0;r=r[n](0===e?0:e,t);return i?this:r})}),s||I(a,"size",{configurable:!0,get:function(){return o(this).collection.size}})):(n=t.getConstructor(e,r,i,d),b.enable()),j(n,r,!1,!0),p[r]=n,l({global:!0,forced:!0},p),s||t.setStrong(n,r,i),n}},function(e,t,r){var n=r(36),i=r(35),a=r(93).f,o=r(142),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){if(!s||"Window"!=n(e))return a(i(e));var t=e;try{return a(t)}catch(t){return o(s)}}},function(e,t,r){var n=r(9),d=r(87),c=r(41),u=r(94),p=n.Array,l=Math.max;e.exports=function(e,t,r){for(var n=c(e),i=d(t,n),a=d(void 0===r?n:r,n),o=p(l(a-i,0)),s=0;i<a;i++,s++)u(o,s,e[i]);return o.length=s,o}},function(e,t,r){var n=r(21),i=r(26),a=r(36),o=r(144),s=Object.isExtensible,r=n(function(){s(1)});e.exports=r||o?function(e){return!!i(e)&&(!o||"ArrayBuffer"!=a(e))&&(!s||s(e))}:s},function(e,t,r){r=r(21);e.exports=r(function(){var e;"function"==typeof ArrayBuffer&&(e=new ArrayBuffer(8),Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8}))})},function(e,t,r){r=r(21);e.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(e,t,r){"use strict";var c=r(29).f,u=r(71),p=r(147),l=r(25),f=r(97),b=r(18),o=r(70),s=r(148),m=r(24),g=r(92).fastKey,r=r(51),v=r.set,y=r.getterFor;e.exports={getConstructor:function(e,r,n,i){function a(e,t,r){var n,i=d(e),a=o(e,t);return a?a.value=r:(i.last=a={index:n=g(t,!0),key:t,value:r,previous:t=i.last,next:void 0,removed:!1},i.first||(i.first=a),t&&(t.next=a),m?i.size++:e.size++,"F"!==n&&(i.index[n]=a)),e}function o(e,t){var r,e=d(e),n=g(t);if("F"!==n)return e.index[n];for(r=e.first;r;r=r.next)if(r.key==t)return r}var e=e(function(e,t){f(e,s),v(e,{type:r,index:u(null),first:void 0,last:void 0,size:0}),m||(e.size=0),null!=t&&b(t,e[i],{that:e,AS_ENTRIES:n})}),s=e.prototype,d=y(r);return p(s,{clear:function(){for(var e=d(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,m?e.size=0:this.size=0},delete:function(e){var t,r,n=d(this),e=o(this,e);return e&&(t=e.next,r=e.previous,delete n.index[e.index],e.removed=!0,r&&(r.next=t),t&&(t.previous=r),n.first==e&&(n.first=t),n.last==e&&(n.last=r),m?n.size--:this.size--),!!e},forEach:function(e){for(var t,r=d(this),n=l(e,1<arguments.length?arguments[1]:void 0);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!o(this,e)}}),p(s,n?{get:function(e){e=o(this,e);return e&&e.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),m&&c(s,"size",{get:function(){return d(this).size}}),e},setStrong:function(e,t,r){var n=t+" Iterator",i=y(t),a=y(n);o(e,t,function(e,t){v(this,{type:n,target:e,state:i(e),kind:t,last:void 0})},function(){for(var e=a(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:{value:e.target=void 0,done:!0}},r?"entries":"values",!r,!0),s(t)}}},function(e,t,r){var i=r(73);e.exports=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:i(e,n,t[n],r);return e}},function(e,t,r){"use strict";var n=r(23),i=r(29),a=r(20),o=r(24),s=a("species");e.exports=function(e){var e=n(e),t=i.f;o&&e&&!e[s]&&t(e,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){function n(i){return function(e,t){var r,e=o(s(e)),t=a(t),n=e.length;return t<0||n<=t?i?"":void 0:(r=c(e,t))<55296||56319<r||t+1===n||(n=c(e,t+1))<56320||57343<n?i?d(e,t):r:i?u(e,t,t+2):n-56320+(r-55296<<10)+65536}}var i=r(15),a=r(64),o=r(54),s=r(46),d=i("".charAt),c=i("".charCodeAt),u=i("".slice);e.exports={codeAt:n(!1),charAt:n(!0)}},function(e,t,r){r(88);var n,i=r(151),a=r(9),o=r(42),s=r(32),d=r(37),c=r(20)("toStringTag");for(n in i){var u=a[n],u=u&&u.prototype;u&&o(u)!==c&&s(u,c,n),d[n]=d.Array}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,r){r(11)({target:"Set",stat:!0,forced:!0},{from:r(153)})},function(e,t,r){"use strict";var s=r(25),d=r(14),c=r(19),u=r(99),p=r(18),l=[].push;e.exports=function(e){var t,r,n,i,a=arguments.length,o=1<a?arguments[1]:void 0;return u(this),(t=void 0!==o)&&c(o),null==e?new this:(r=[],t?(n=0,i=s(o,2<a?arguments[2]:void 0),p(e,function(e){d(l,r,i(e,n++))})):p(e,l,{that:r}),new this(r))}},function(e,t,r){r(11)({target:"Set",stat:!0,forced:!0},{of:r(155)})},function(e,t,r){"use strict";var n=r(156);e.exports=function(){return new this(n(arguments))}},function(e,t,r){r=r(15);e.exports=r([].slice)},function(e,t,r){"use strict";r(11)({target:"Set",proto:!0,real:!0,forced:!0},{addAll:r(158)})},function(e,t,r){"use strict";var i=r(14),a=r(19),o=r(12);e.exports=function(){for(var e=o(this),t=a(e.add),r=0,n=arguments.length;r<n;r++)i(t,e,arguments[r]);return e}},function(e,t,r){"use strict";r(11)({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:r(160)})},function(e,t,r){"use strict";var o=r(14),s=r(19),d=r(12);e.exports=function(){for(var e,t=d(this),r=s(t.delete),n=!0,i=0,a=arguments.length;i<a;i++)e=o(r,t,arguments[i]),n=n&&e;return!!n}},function(e,t,r){"use strict";var n=r(11),i=r(12),a=r(25),o=r(33),s=r(18);n({target:"Set",proto:!0,real:!0,forced:!0},{every:function(e){var r=i(this),t=o(r),n=a(e,1<arguments.length?arguments[1]:void 0);return!s(t,function(e,t){if(!n(e,e,r))return t()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(e,t,r){"use strict";var n=r(11),i=r(23),a=r(14),o=r(19),s=r(12),d=r(38),c=r(18);n({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(e){var t=s(this),r=new(d(t,i("Set")))(t),n=o(r.delete);return c(e,function(e){a(n,r,e)}),r}})},function(e,t,r){"use strict";var n=r(11),o=r(23),s=r(14),d=r(19),c=r(12),u=r(25),p=r(38),l=r(33),f=r(18);n({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(e){var t=c(this),r=l(t),n=u(e,1<arguments.length?arguments[1]:void 0),i=new(p(t,o("Set"))),a=d(i.add);return f(r,function(e){n(e,e,t)&&s(a,i,e)},{IS_ITERATOR:!0}),i}})},function(e,t,r){"use strict";var n=r(11),i=r(12),a=r(25),o=r(33),s=r(18);n({target:"Set",proto:!0,real:!0,forced:!0},{find:function(e){var r=i(this),t=o(r),n=a(e,1<arguments.length?arguments[1]:void 0);return s(t,function(e,t){if(n(e,e,r))return t(e)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},function(e,t,r){"use strict";var n=r(11),a=r(23),o=r(14),s=r(19),d=r(12),c=r(38),u=r(18);n({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(e){var t=d(this),r=new(c(t,a("Set"))),n=s(t.has),i=s(r.add);return u(e,function(e){o(n,t,e)&&o(i,r,e)}),r}})},function(e,t,r){"use strict";var n=r(11),i=r(14),a=r(19),o=r(12),s=r(18);n({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(e){var r=o(this),n=a(r.has);return!s(e,function(e,t){if(!0===i(n,r,e))return t()},{INTERRUPTED:!0}).stopped}})},function(e,t,r){"use strict";var n=r(11),i=r(23),a=r(14),o=r(19),s=r(17),d=r(12),c=r(53),u=r(18);n({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(e){var t=c(this),r=d(e),n=r.has;return s(n)||(r=new(i("Set"))(e),n=o(r.has)),!u(t,function(e,t){if(!1===a(n,r,e))return t()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(e,t,r){"use strict";var n=r(11),i=r(14),a=r(19),o=r(12),s=r(18);n({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(e){var r=o(this),n=a(r.has);return!s(e,function(e,t){if(!1===i(n,r,e))return t()},{INTERRUPTED:!0}).stopped}})},function(e,t,r){"use strict";var n=r(11),i=r(15),a=r(12),o=r(54),s=r(33),d=r(18),c=i([].join),u=[].push;n({target:"Set",proto:!0,real:!0,forced:!0},{join:function(e){var t=a(this),t=s(t),e=void 0===e?",":o(e),r=[];return d(t,u,{that:r,IS_ITERATOR:!0}),c(r,e)}})},function(e,t,r){"use strict";var n=r(11),o=r(23),s=r(25),d=r(14),c=r(19),u=r(12),p=r(38),l=r(33),f=r(18);n({target:"Set",proto:!0,real:!0,forced:!0},{map:function(e){var t=u(this),r=l(t),n=s(e,1<arguments.length?arguments[1]:void 0),i=new(p(t,o("Set"))),a=c(i.add);return f(r,function(e){d(a,i,n(e,e,t))},{IS_ITERATOR:!0}),i}})},function(e,t,r){"use strict";var n=r(11),i=r(9),a=r(19),o=r(12),s=r(33),d=r(18),c=i.TypeError;n({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=o(this),e=s(r),n=arguments.length<2,i=n?void 0:arguments[1];if(a(t),d(e,function(e){i=n?(n=!1,e):t(i,e,e,r)},{IS_ITERATOR:!0}),n)throw c("Reduce of empty set with no initial value");return i}})},function(e,t,r){"use strict";var n=r(11),i=r(12),a=r(25),o=r(33),s=r(18);n({target:"Set",proto:!0,real:!0,forced:!0},{some:function(e){var r=i(this),t=o(r),n=a(e,1<arguments.length?arguments[1]:void 0);return s(t,function(e,t){if(n(e,e,r))return t()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(e,t,r){"use strict";var n=r(11),a=r(23),o=r(14),s=r(19),d=r(12),c=r(38),u=r(18);n({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(e){var t=d(this),r=new(c(t,a("Set")))(t),n=s(r.delete),i=s(r.add);return u(e,function(e){o(n,r,e)||o(i,r,e)}),r}})},function(e,t,r){"use strict";var n=r(11),i=r(23),a=r(19),o=r(12),s=r(38),d=r(18);n({target:"Set",proto:!0,real:!0,forced:!0},{union:function(e){var t=o(this),t=new(s(t,i("Set")))(t);return d(e,a(t.add),{that:t}),t}})},function(e,t,r){r=r(176);e.exports=r},function(e,t,r){r=r(177);e.exports=r},function(e,t,r){r=r(178);e.exports=r},function(e,t,r){r(98),r(179);r=r(47);e.exports=r.Array.from},function(e,t,r){var n=r(11),i=r(180);n({target:"Array",stat:!0,forced:!r(182)(function(e){Array.from(e)})},{from:i})},function(e,t,r){"use strict";var n=r(9),l=r(25),f=r(14),b=r(50),m=r(181),g=r(95),v=r(65),y=r(41),h=r(94),O=r(53),j=r(75),I=n.Array;e.exports=function(e){var t=b(e),e=v(this),r=arguments.length,n=1<r?arguments[1]:void 0,i=void 0!==n;i&&(n=l(n,2<r?arguments[2]:void 0));var a,o,s,d,c,u,r=j(t),p=0;if(!r||this==I&&g(r))for(a=y(t),o=e?new this(a):I(a);p<a;p++)u=i?n(t[p],p):t[p],h(o,p,u);else for(c=(d=O(t,r)).next,o=e?new this:[];!(s=f(c,d)).done;p++)u=i?m(d,n,[s.value,p],!0):s.value,h(o,p,u);return o.length=p,o}},function(e,t,r){var i=r(12),a=r(96);e.exports=function(e,t,r,n){try{return n?t(i(r)[0],r[1]):t(r)}catch(t){a(e,"throw",t)}}},function(e,t,r){var i=r(20)("iterator"),a=!1;try{var n=0,o={next:function(){return{done:!!n++}},return:function(){a=!0}};o[i]=function(){return this},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var r=!1;try{var n={};n[i]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r}},function(e,t,r){r=r(184);e.exports=r},function(e,t,r){r=r(185);e.exports=r},function(e,t,r){r(186);r=r(68);e.exports=r("String","includes")},function(e,t,r){"use strict";var n=r(11),i=r(15),a=r(187),o=r(46),s=r(54),r=r(189),d=i("".indexOf);n({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~d(s(o(this)),s(a(e)),1<arguments.length?arguments[1]:void 0)}})},function(e,t,r){var n=r(9),i=r(188),a=n.TypeError;e.exports=function(e){if(i(e))throw a("The method doesn't accept regular expressions");return e}},function(e,t,r){var n=r(26),i=r(36),a=r(20)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},function(e,t,r){var n=r(20)("match");e.exports=function(t){var r=/./;try{"/./"[t](r)}catch(e){try{return r[n]=!1,"/./"[t](r)}catch(t){}}return!1}},function(B,N,e){"use strict";e.r(N),e.d(N,"pluginClass",function(){return us});var N={},q=(e.r(N),e.d(N,"code",function(){return Bn}),e.d(N,"generate",function(){return Nn}),e.d(N,"validate",function(){return qn}),{}),z=(e.r(q),e.d(q,"code",function(){return ui}),e.d(q,"generate",function(){return pi}),e.d(q,"validate",function(){return li}),{}),M=(e.r(z),e.d(z,"code",function(){return gi}),e.d(z,"generate",function(){return vi}),e.d(z,"validate",function(){return yi}),{}),F=(e.r(M),e.d(M,"code",function(){return ji}),e.d(M,"generate",function(){return Ii}),e.d(M,"validate",function(){return Ai}),{}),V=(e.r(F),e.d(F,"code",function(){return wi}),e.d(F,"generate",function(){return _i}),e.d(F,"validate",function(){return Ci}),{}),W=(e.r(V),e.d(V,"code",function(){return Zi}),e.d(V,"generate",function(){return ea}),e.d(V,"validate",function(){return ta}),{}),G=(e.r(W),e.d(W,"code",function(){return la}),e.d(W,"generate",function(){return fa}),e.d(W,"validate",function(){return ba}),{}),L=(e.r(G),e.d(G,"code",function(){return ya}),e.d(G,"generate",function(){return ha}),e.d(G,"validate",function(){return Oa}),{}),H=(e.r(L),e.d(L,"code",function(){return ja}),e.d(L,"generate",function(){return Ia}),e.d(L,"validate",function(){return Aa}),{}),K=(e.r(H),e.d(H,"code",function(){return Ka}),e.d(H,"generate",function(){return Ya}),e.d(H,"validate",function(){return Ja}),{}),Y=(e.r(K),e.d(K,"code",function(){return so}),e.d(K,"generate",function(){return co}),e.d(K,"validate",function(){return uo}),{}),J=(e.r(Y),e.d(Y,"code",function(){return po}),e.d(Y,"generate",function(){return lo}),e.d(Y,"validate",function(){return fo}),{}),X=(e.r(J),e.d(J,"code",function(){return bo}),e.d(J,"generate",function(){return mo}),e.d(J,"validate",function(){return go}),{}),Q=(e.r(X),e.d(X,"code",function(){return ho}),e.d(X,"generate",function(){return Oo}),e.d(X,"validate",function(){return jo}),{}),$=(e.r(Q),e.d(Q,"code",function(){return So}),e.d(Q,"generate",function(){return Eo}),e.d(Q,"validate",function(){return To}),{}),Z=(e.r($),e.d($,"code",function(){return wo}),e.d($,"generate",function(){return _o}),e.d($,"validate",function(){return Co}),{}),ee=(e.r(Z),e.d(Z,"code",function(){return ko}),e.d(Z,"generate",function(){return Po}),e.d(Z,"validate",function(){return Ro}),{}),T=(e.r(ee),e.d(ee,"code",function(){return Ho}),e.d(ee,"generate",function(){return Ko}),e.d(ee,"validate",function(){return Yo}),e(3));function te(){return window.jwpb}window.jwpb=window.jwpb||{},window.jwpb.cmd=window.jwpb.cmd||[],window.jwpb.que=window.jwpb.que||[],window._pbjsGlobals=window._pbjsGlobals||[],window._pbjsGlobals.push("jwpb");var w=e(0),t=e(13),g=e.n(t),re=e(16),v=e(6),ne=e(56),ie=e(30),_=e(1);function ae(e){var t={type:"xml",value:e.vastXml||'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['+e.vastUrl+"]]></VASTAdTagURI>\n        <Impression>"+((t=e.vastImpUrl)?"<![CDATA["+t+"]]>":"")+"</Impression>\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>",ttlseconds:Number(e.ttl)};return _.b.getConfig("cache.vasttrack")&&(t.bidder=e.bidder,t.bidid=e.requestId,t.aid=e.auctionId,Object(w.isPlainObject)(this)&&this.hasOwnProperty("auctionStart")&&(t.timestamp=this.auctionStart)),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(t.key=e.customCacheKey),t}var t=e(4),E=e.n(t),u={},oe=["adloox","criteo","outstream","adagio","browsi"];var t=e(5),C=e.n(t);function k(e){var t=this,d=e.url,r=e.config,n=e.id,i=e.callback,a=e.loaded,c=e.adUnitCode;this.url=d,this.config=r,this.handlers={},this.id=n,this.loaded=a,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):Object(w.logError)("Commands given to Renderer.push must be wrapped in a function")},this.callback=i||function(){t.loaded=!0,t.process()},this.render=function(){function e(){n._render?n._render.apply(n,i):Object(w.logWarn)("No render function was provided, please use .setRender on the renderer")}var t,r,n=this,i=arguments;if(function(t){var e=jwpb.adUnits,e=C()(e,function(e){return e.code===t});if(!e)return;var r=Object(w.deepAccess)(e,"renderer"),n=!!(r&&r.url&&r.render),e=Object(w.deepAccess)(e,"mediaTypes.video.renderer"),i=!!(e&&e.url&&e.render);return n&&!0!==r.backupOnly||i&&!0!==e.backupOnly}(c))Object(w.logWarn)("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit "+c),void e();else{this.cmd.unshift(e);var a=d,o="outstream",s=this.callback;if(o&&a){if(E()(oe,o))return void(u[a]?(s&&"function"==typeof s&&(u[a].loaded?s():u[a].callbacks.push(s)),u[a].tag):(u[a]={loaded:!1,tag:null,callbacks:[]},s&&"function"==typeof s&&u[a].callbacks.push(s),Object(w.logWarn)("module "+o+" is loading external JavaScript"),s=a,t=function(){u[a].loaded=!0;try{for(var e=0;e<u[a].callbacks.length;e++)u[a].callbacks[e]()}catch(e){Object(w.logError)("Error executing callback","adloader.js:loadExternalScript",e)}},(r=document.createElement("script")).type="text/javascript",r.async=!0,(u[a].tag=r).readyState?r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,t())}:r.onload=function(){t()},r.src=s,Object(w.insertElement)(r)));Object(w.logError)(o+" not whitelisted for loading external JavaScript")}else Object(w.logError)("cannot load external script without url and moduleCode")}}.bind(this)}function se(e){return e&&e.url}function de(e,t){e.render(t)}k.install=function(e){return new k({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode})},k.prototype.getConfig=function(){return this.config},k.prototype.setRender=function(e){this._render=e},k.prototype.setEventHandlers=function(e){this.handlers=e},k.prototype.handleVideoEvent=function(e){var t=e.id,e=e.eventName;"function"==typeof this.handlers[e]&&this.handlers[e](),Object(w.logMessage)("Prebid Renderer event for id "+t+" type "+e)},k.prototype.process=function(){for(;0<this.cmd.length;)try{this.cmd.shift().call()}catch(e){Object(w.logError)("Error processing Renderer command: ",e)}};var t=e(39),r=e(8),ce=e(27),x=e(2),ue=t.a.syncUsers,pe=e(7).default,le=e(13),P=e(6),fe=(le.on(P.EVENTS.BID_ADJUSTMENT,function(e){var t,r=e,e=r.bidderCode,n=r.cpm;if(jwpb.bidderSettings&&(e&&jwpb.bidderSettings[e]&&"function"==typeof jwpb.bidderSettings[e].bidCpmAdjustment?t=jwpb.bidderSettings[e].bidCpmAdjustment:jwpb.bidderSettings[P.JSON_MAPPING.BD_SETTING_STANDARD]&&"function"==typeof jwpb.bidderSettings[P.JSON_MAPPING.BD_SETTING_STANDARD].bidCpmAdjustment&&(t=jwpb.bidderSettings[P.JSON_MAPPING.BD_SETTING_STANDARD].bidCpmAdjustment),t))try{n=t(r.cpm,Object(T.default)({},r))}catch(r){Object(w.logError)("Error during bid adjustment","bidmanager.js",r)}0<=n&&(r.cpm=n)}),{}),be={},me=[];function ge(e){var t,i,b,m,a=e.adUnits,r=e.adUnitCodes,n=e.callback,o=e.cbTimeout,s=e.labels,e=e.auctionId,g=a,d=s,c=r,u=[],p=[],l=[],f=e||Object(w.generateUUID)(),v=n,y=o,h=[],O=new Set;function j(){return{auctionId:f,timestamp:t,auctionEnd:i,auctionStatus:b,adUnits:g,adUnitCodes:c,labels:d,bidderRequests:u,noBids:l,bidsReceived:p,winningBids:h,timeout:y}}function I(r,e){var n,t;e&&clearTimeout(m),void 0===i&&(n=[],r&&(Object(w.logMessage)("Auction "+f+" timedOut"),t=O,(n=u.map(function(e){return(e.bids||[]).filter(function(e){return!t.has(e.bidder)})}).reduce(w.flatten,[]).map(function(e){return{bidId:e.bidId,bidder:e.bidder,adUnitCode:e.adUnitCode,auctionId:e.auctionId}})).length&&le.emit(P.EVENTS.BID_TIMEOUT,n)),b="completed",i=Date.now(),le.emit(P.EVENTS.AUCTION_END,j()),he(g,function(){try{var e;null!=v&&(t=c,e=p.filter(w.bind.call(w.adUnitsFilter,this,t)).reduce(Te,{}),v.apply(jwpb,[e,r,f]),v=null)}catch(e){Object(w.logError)("Error executing bidsBackHandler",null,e)}finally{n.length&&pe.callTimedOutBidders(a,n,y);var t=_.b.getConfig("userSync")||{};t.enableOverride||ue(t.syncDelay)}}))}function A(){_.b.resetBidder(),Object(w.logInfo)("Bids Received for Auction with id: "+f,p),I(!(b="completed"),!0)}function x(e){O.add(e)}function S(t){var r=this,s=(t.forEach(function(e){u=u.concat(e)}),{}),e={bidRequests:t,run:function(){var n,c,u,i,a,p,e=I.bind(null,!0),e=setTimeout(e,y),o=(m=e,b="inProgress",le.emit(P.EVENTS.AUCTION_INIT,j()),n=A,c=r,u=0,i=!1,a=new Set,p={},{addBidResponse:function(e,t){p[t.requestId]=!0,u++;e={adUnitCode:e,bid:t,bidderRequest:this,auctionId:c.getAuctionId()},r=e.adUnitCode,t=e.bid,i=e.bidderRequest,e=e.auctionId,a=i.start,(n=Object(T.default)({},t,{auctionId:e,responseTimestamp:Object(w.timestamp)(),requestTimestamp:a,cpm:parseFloat(t.cpm)||0,bidder:t.bidderCode,adUnitCode:r})).timeToRespond=n.responseTimestamp-n.requestTimestamp,le.emit(P.EVENTS.BID_ADJUSTMENT,n),e=i.bids&&C()(i.bids,function(e){return e.adUnitCode==r&&e.bidId==n.requestId}),a=e&&e.renderer,i=n.mediaType,i=(i=e&&e.mediaTypes&&e.mediaTypes[i])&&i.renderer,d=null,i&&i.url&&i.render&&(!0!==i.backupOnly||!t.renderer)?d=i:a&&a.url&&a.render&&(!0!==a.backupOnly||!t.renderer)&&(d=a),d&&(n.renderer=k.install({url:d.url}),n.renderer.setRender(d.render)),i=Ae(t.mediaType,e,_.b.getConfig("mediaTypePriceGranularity")),a=Object(ne.a)(n.cpm,"object"==typeof i?i:_.b.getConfig("customPriceBucket"),_.b.getConfig("currency.granularityMultiplier")),n.pbLg=a.low,n.pbMg=a.med,n.pbHg=a.high,n.pbAg=a.auto,n.pbDg=a.dense,n.pbCg=a.custom;var r,n,i,a,o,s,d=n;"video"===d.mediaType?(t=c,e=d,i=this,a=l,o=!0,i=Object(w.getBidRequest)(e.originalRequestId||e.requestId,[i]),s=(s=i&&Object(w.deepAccess)(i,"mediaTypes.video"))&&Object(w.deepAccess)(s,"context"),_.b.getConfig("cache.url")&&s!==ce.b&&(!e.videoCacheKey||_.b.getConfig("cache.ignoreBidderCacheKey")?(o=!1,Ie(t,e,a,i)):e.vastUrl||(Object(w.logError)("videoCacheKey specified but not required vastUrl for video bid"),o=!1)),o&&(je(t,e),a())):(je(c,d),l())},adapterDone:function(){var t,e=c.getBidRequests(),r=_.b.getConfig("auctionOptions");a.add(this),r&&!Object(w.isEmpty)(r)&&(t=r.secondaryBidders)&&!e.every(function(e){return E()(t,e.bidderCode)})&&(e=e.filter(function(e){return!E()(t,e.bidderCode)})),i=e.every(function(e){return a.has(e)}),this.bids.forEach(function(e){p[e.bidId]||(c.addNoBid(e),le.emit(P.EVENTS.NO_BID,e))}),i&&0===u&&n()}});function l(){u--,i&&0===u&&n()}pe.callBids(g,t,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];ve.apply({dispatch:o.addBidResponse,bidderRequest:this},t)},o.adapterDone,{request:function(e,t){f(fe,t),f(s,e),be[e]||(be[e]={SRA:!0,origin:t}),1<s[e]&&(be[e].SRA=!1)},done:function(e){fe[e]--,me[0]&&d(me[0])&&me.shift()}},y,x)}};function d(e){var n=!0,i=_.b.getConfig("maxRequestsPerOrigin")||4;return e.bidRequests.some(function(e){var t=1,r=void 0!==e.src&&e.src===P.S2S.SRC?"s2s":e.bidderCode;return be[r]&&(!1===be[r].SRA&&(t=Math.min(e.bids.length,i)),fe[be[r].origin]+t>i&&(n=!1)),!n}),n&&e.run(),n}function f(e,t){void 0===e[t]?e[t]=1:e[t]++}d(e)||(Object(w.logWarn)("queueing auction due to limited endpoint capacity"),me.push(e))}return{addBidReceived:function(e){p=p.concat(e)},addNoBid:function(e){l=l.concat(e)},executeCallback:I,callBids:function(){b="started",t=Date.now();var e=pe.makeBidRequests(g,t,f,y,d);Object(w.logInfo)("Bids Requested for Auction with id: "+f,e),e.length<1?(Object(w.logWarn)("No valid bid requests returned for auction"),A()):ye.call({dispatch:S,context:this},e)},addWinningBid:function(e){h=h.concat(e),pe.callBidWonBidder(e.bidder,e,a)},setBidTargeting:function(e){pe.callSetTargetingBidder(e.bidder,e)},getWinningBids:function(){return h},getTimeout:function(){return y},getAuctionId:function(){return f},getAuctionStatus:function(){return b},getAdUnits:function(){return g},getAdUnitCodes:function(){return c},getBidRequests:function(){return u},getBidsReceived:function(){return p},getNoBids:function(){return l}}}var ve=Object(r.b)("async",function(e,t){this.dispatch.call(this.bidderRequest,e,t)},"addBidResponse"),ye=Object(r.b)("sync",function(e){this.dispatch.call(this.context,e)},"addBidderRequests"),he=Object(r.b)("async",function(e,t){t&&t()},"bidsBackCallback");function Oe(e,t){t.timeToRespond>e.getTimeout()+_.b.getConfig("timeoutBuffer")&&e.executeCallback(!0)}function je(e,t){var r,n,i=e.getBidRequests(),i=C()(i,function(e){return e.bidderCode===t.bidderCode});i=i,(r=t).bidderCode&&(0<r.cpm||r.dealId)&&(i=C()(i.bids,function(e){return e.adUnitCode===r.adUnitCode}),n=function(e,t,r){if(!t)return{};var n={},i=jwpb.bidderSettings;return i&&(Ee(n,Se(t.mediaType,e),t,r),e&&i[e]&&i[e][P.JSON_MAPPING.ADSERVER_TARGETING]&&(Ee(n,i[e],t,r),t.sendStandardTargeting=i[e].sendStandardTargeting)),n=t.native?Object(T.default)({},n,Object(re.e)(t,r)):n}(r.bidderCode,r,i)),r.adserverTargeting=Object(T.default)(r.adserverTargeting||{},n),le.emit(P.EVENTS.BID_RESPONSE,t),e.addBidReceived(t),Oe(e,t)}var Ie=Object(r.b)("async",function(r,n,i,e){var t,a,o;a=function(e,t){e?(Object(w.logWarn)("Failed to save to the video cache: "+e+". Video bid must be discarded."),Oe(r,n)):""===t[0].uuid?(Object(w.logWarn)("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."),Oe(r,n)):(n.videoCacheKey=t[0].uuid,n.vastUrl||(n.vastUrl=(e=n.videoCacheKey,_.b.getConfig("cache.url")+"?uuid="+e)),je(r,n),i())},t={puts:(t=[n]).map(ae,e)},Object(ie.a)(_.b.getConfig("cache.url"),(o=a,{success:function(e){var t;try{t=JSON.parse(e).responses}catch(e){return void o(e,[])}t?o(null,t):o(new Error("The cache server didn't respond with a responses property."),[])},error:function(e,t){o(new Error("Error storing video ad in the cache: "+e+": "+JSON.stringify(t)),[])}}),JSON.stringify(t),{contentType:"text/plain",withCredentials:!0})},"callPrebidCache");function Ae(e,t,r){if(e&&r){if(e===x.d){t=Object(w.deepAccess)(t,"mediaTypes."+x.d+".context","instream");if(r[x.d+"-"+t])return r[x.d+"-"+t]}return r[e]}}var xe=function(n){return function(e,t){return(n=n||(r=e.mediaType,t=Ae(r,t,_.b.getConfig("mediaTypePriceGranularity")),"string"==typeof r&&t?"string"==typeof t?t:"custom":_.b.getConfig("priceGranularity")))===P.GRANULARITY_OPTIONS.AUTO?e.pbAg:n===P.GRANULARITY_OPTIONS.DENSE?e.pbDg:n===P.GRANULARITY_OPTIONS.LOW?e.pbLg:n===P.GRANULARITY_OPTIONS.MEDIUM?e.pbMg:n===P.GRANULARITY_OPTIONS.HIGH?e.pbHg:n===P.GRANULARITY_OPTIONS.CUSTOM?e.pbCg:void 0;var r}};function Se(e,t){function r(e,r){return{key:e,val:"function"==typeof r?function(e,t){return r(e,t)}:function(e){return Object(w.getValue)(e,r)}}}var n,i,a=P.TARGETING_KEYS,o=jwpb.bidderSettings;return o[P.JSON_MAPPING.BD_SETTING_STANDARD]||(o[P.JSON_MAPPING.BD_SETTING_STANDARD]={}),o[P.JSON_MAPPING.BD_SETTING_STANDARD][P.JSON_MAPPING.ADSERVER_TARGETING]||(o[P.JSON_MAPPING.BD_SETTING_STANDARD][P.JSON_MAPPING.ADSERVER_TARGETING]=[r(a.BIDDER,"bidderCode"),r(a.AD_ID,"adId"),r(a.PRICE_BUCKET,xe()),r(a.SIZE,"size"),r(a.DEAL,"dealId"),r(a.SOURCE,"source"),r(a.FORMAT,"mediaType"),r(a.ADOMAIN,function(e){return e.meta&&e.meta.advertiserDomains&&0<e.meta.advertiserDomains.length?e.meta.advertiserDomains[0]:""})]),"video"===e&&(n=o[P.JSON_MAPPING.BD_SETTING_STANDARD][P.JSON_MAPPING.ADSERVER_TARGETING],[a.UUID,a.CACHE_ID].forEach(function(t){void 0===C()(n,function(e){return e.key===t})&&n.push(r(t,"videoCacheKey"))}),!_.b.getConfig("cache.url")||t&&!1===Object(w.deepAccess)(o,t+".sendStandardTargeting")||(i=Object(w.parseUrl)(_.b.getConfig("cache.url")),void 0===C()(n,function(e){return e.key===a.CACHE_HOST})&&n.push(r(a.CACHE_HOST,function(e){return Object(w.deepAccess)(e,"adserverTargeting."+a.CACHE_HOST)?e.adserverTargeting[a.CACHE_HOST]:i.hostname})))),o[P.JSON_MAPPING.BD_SETTING_STANDARD]}function Ee(r,n,i,a){var e=n[P.JSON_MAPPING.ADSERVER_TARGETING];i.size=i.getSize(),Object(w._each)(e,function(e){var t=e.key,e=e.val;if(r[t]&&Object(w.logWarn)("The key: "+t+" is getting ovewritten"),Object(w.isFn)(e))try{e=e(i,a)}catch(e){Object(w.logError)("bidmanager","ERROR",e)}(void 0===n.suppressEmptyKeys||!0!==n.suppressEmptyKeys)&&t!==P.TARGETING_KEYS.DEAL||!Object(w.isEmptyStr)(e)&&null!=e?r[t]=e:Object(w.logInfo)("suppressing empty key '"+t+"' from adserver targeting")})}function Te(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}var n,i,we=e(6),m=(n=[],(i={}).addWinningBid=function(t){var e=C()(n,function(e){return e.getAuctionId()===t.auctionId});e?(t.status=we.BID_STATUS.RENDERED,e.addWinningBid(t)):Object(w.logWarn)("Auction not found when adding winning bid")},i.getAllWinningBids=function(){return n.map(function(e){return e.getWinningBids()}).reduce(w.flatten,[])},i.getBidsRequested=function(){return n.map(function(e){return e.getBidRequests()}).reduce(w.flatten,[])},i.getNoBids=function(){return n.map(function(e){return e.getNoBids()}).reduce(w.flatten,[])},i.getBidsReceived=function(){return n.map(function(e){if("completed"===e.getAuctionStatus())return e.getBidsReceived()}).reduce(w.flatten,[]).filter(function(e){return e})},i.getAllBidsForAdUnitCode=function(t){return n.map(function(e){return e.getBidsReceived()}).reduce(w.flatten,[]).filter(function(e){return e&&e.adUnitCode===t})},i.getAdUnits=function(){return n.map(function(e){return e.getAdUnits()}).reduce(w.flatten,[])},i.getAdUnitCodes=function(){return n.map(function(e){return e.getAdUnitCodes()}).reduce(w.flatten,[]).filter(w.uniques)},i.createAuction=function(e){e=ge({adUnits:e.adUnits,adUnitCodes:e.adUnitCodes,callback:e.callback,cbTimeout:e.cbTimeout,labels:e.labels,auctionId:e.auctionId});return n.push(e),e},i.findBidByAdId=function(t){return C()(n.map(function(e){return e.getBidsReceived()}).reduce(w.flatten,[]),function(e){return e.adId===t})},i.getStandardBidderAdServerTargeting=function(){return Se()[we.JSON_MAPPING.ADSERVER_TARGETING]},i.setStatusForBids=function(e,t){var r=i.findBidByAdId(e);r&&(r.status=t),r&&t===we.BID_STATUS.BID_TARGETING_SET&&(e=C()(n,function(e){return e.getAuctionId()===r.auctionId}))&&e.setBidTargeting(r)},i.getLastAuctionId=function(){return n.length&&n[n.length-1].getAuctionId()},i.clearAllAuctions=function(){n.length=0},i),_e=v.EVENTS.BID_WON,Ce=v.EVENTS.STALE_RENDER;function ke(e){var t,r,n,i,a,o,s,d=e.message?"message":"data",c={};try{c=JSON.parse(e[d])}catch(e){return}if(c&&c.adId){var u,p,d=C()(m.getBidsReceived(),function(e){return e.adId===c.adId});if(d&&"Prebid Request"===c.message){if(d.status===v.BID_STATUS.RENDERED&&(Object(w.logWarn)("Ad id "+d.adId+" has been rendered before"),g.a.emit(Ce,d),Object(w.deepAccess)(_.b.getConfig("auctionOptions"),"suppressStaleRender")))return;t=e,r=(p=d).adId,n=p.ad,i=p.adUrl,a=p.width,o=p.height,u=p.renderer,s=p.cpm,se(u)?de(u,p):r&&(Pe(p),t.source.postMessage(JSON.stringify({message:"Prebid Response",ad:Object(w.replaceAuctionPrice)(n,s),adUrl:Object(w.replaceAuctionPrice)(i,s),adId:r,width:a,height:o}),t.origin)),m.addWinningBid(d),g.a.emit(_e,d)}d&&"Prebid Native"===c.message&&("assetRequest"===c.action?(u=Object(re.d)(c,d),e.source.postMessage(JSON.stringify(u),e.origin)):"allAssetRequest"===c.action?(p=Object(re.c)(c,d),e.source.postMessage(JSON.stringify(p),e.origin)):"resizeNativeHeight"===c.action?(d.height=c.height,d.width=c.width,Pe(d)):"click"!==Object(re.b)(c,d)&&(m.addWinningBid(d),g.a.emit(_e,d)))}}function Pe(e){var i=e.adId,a=e.adUnitCode,o=e.width,s=e.height;["div","iframe"].forEach(function(e){e=e+':not([style*="display: none"])',n=i,t=a,n=Object(w.isGptPubadsDefined)()?(r=n,C()(window.googletag.pubads().getSlots(),function(t){return C()(t.getTargetingKeys(),function(e){return E()(t.getTargeting(e),r)})}).getSlotElementId()):Object(w.isApnGetTagDefined)()?(n=window.apntag.getTag(t))&&n.targetId:t;var r,t,n=(t=document.getElementById(n))&&t.querySelector(e);n?((t=n.style).width=o+"px",t.height=s+"px"):Object(w.logWarn)("Unable to locate matching page element for adUnitCode "+a+".  Can't resize it to ad's dimensions.  Please review setup.")})}function Re(e){return e.responseTimestamp+1e3*e.ttl-1e3>Object(w.timestamp)()}function De(e){return e&&(e.status&&!E()([Be.BID_STATUS.RENDERED],e.status)||!e.status)}var Ue=e(34),Be=e(6),Ne=[],qe=Object.keys(Be.TARGETING_KEYS).map(function(e){return Be.TARGETING_KEYS[e]}),ze=Object(r.b)("sync",function(e,n,i,t){var a,o,s;return void 0===i&&(i=0),(t=void 0!==t&&t)?e:(a=[],o=_.b.getConfig("sendBidsControl.dealPrioritization"),s=Object(w.groupBy)(e,"adUnitCode"),Object.keys(s).forEach(function(e){var t=[],r=Object(w.groupBy)(s[e],"bidderCode");Object.keys(r).forEach(function(e){return t.push(r[e].reduce(n))}),0<i?(t=o?t.sort(Me(!0)):t.sort(function(e,t){return t.cpm-e.cpm}),a.push.apply(a,t.slice(0,i))):a.push.apply(a,t)}),a)});function Me(r){return void 0===r&&(r=!1),function(e,t){return void 0!==e.adserverTargeting.hb_deal&&void 0===t.adserverTargeting.hb_deal?-1:void 0===e.adserverTargeting.hb_deal&&void 0!==t.adserverTargeting.hb_deal?1:r?t.cpm-e.cpm:t.adserverTargeting.hb_pb-e.adserverTargeting.hb_pb}}We=m,Ge={},(O={}).setLatestAuctionForAdUnit=function(e,t){Ge[e]=t},O.resetPresetTargeting=function(e,n){var t,i,a;Object(w.isGptPubadsDefined)()&&(t=He(e),i=We.getAdUnits().filter(function(e){return E()(t,e.code)}),a=Ne.reduce(function(e,t){return e[t]=null,e},{}),window.googletag.pubads().getSlots().forEach(function(t){var r=Object(w.isFn)(n)&&n(t);i.forEach(function(e){(e.code===t.getAdUnitPath()||e.code===t.getSlotElementId()||Object(w.isFn)(r)&&r(e.code))&&t.updateTargetingFromMap(a)})}))},O.resetPresetTargetingAST=function(e){He(e).forEach(function(e){var t,r,n=window.apntag.getTag(e);n&&n.keywords&&(t=Object.keys(n.keywords),r={},t.forEach(function(e){E()(Ne,e.toLowerCase())||(r[e]=n.keywords[e])}),window.apntag.modifyTag(e,{keywords:r}))})},O.getAllTargeting=function(e,t){void 0===t&&(t=Ke());var r,n,i,a,o,s,d,c,e=He(e),u=(l=e,h=t,l=O.getWinningBids(e,h),c=Ye(),l.map(function(a){var e;return(e={})[a.adUnitCode]=Object.keys(a.adserverTargeting).filter(function(e){return void 0===a.sendStandardTargeting||a.sendStandardTargeting||-1===c.indexOf(e)}).reduce(function(e,t){var r,n,i=[a.adserverTargeting[t]];(n={})[t.substring(0,20)]=i;return t===Be.TARGETING_KEYS.DEAL?((r={})[(t+"_"+a.bidderCode).substring(0,20)]=i,[].concat(e,[n,r])):[].concat(e,[n])},[]),e}).concat((d=e,t.filter(function(e){return E()(d,e.adUnitCode)}).map(function(e){return Object(T.default)({},e)}).reduce(Je,[]).map(Qe).filter(function(e){return e}))).concat(_.b.getConfig("enableSendAllBids")?(a=e,h=t,o=qe.concat(re.a),l=_.b.getConfig("sendBidsControl.bidLimit"),h=ze(h,w.getHighestCpm,l),l=_.b.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),s=l?l.map(function(e){return Be.TARGETING_KEYS[e]}):o,h.map(function(t){var e;if(Le(t,a))return(e={})[t.adUnitCode]=$e(t,o.filter(function(e){return void 0!==t.adserverTargeting[e]&&-1!==s.indexOf(e)})),e}).filter(function(e){return e})):(n=e,l=t,!0===_.b.getConfig("targetingControls.alwaysIncludeDeals")?(i=qe.concat(re.a),ze(l,w.getHighestCpm).map(function(t){var e;if(t.dealId&&Le(t,n))return(e={})[t.adUnitCode]=$e(t,i.filter(function(e){return void 0!==t.adserverTargeting[e]})),e}).filter(function(e){return e})):[])).concat((r=e,We.getAdUnits().filter(function(e){return E()(r,e.code)&&p(e)}).map(function(e){var t,r;return(t={})[e.code]=(r=p(e),Object.keys(r).map(function(e){var t;return Object(w.isStr)(r[e])&&(r[e]=r[e].split(",").map(function(e){return e.trim()})),Object(w.isArray)(r[e])||(r[e]=[r[e]]),(t={})[e]=r[e],t})),t}))));function p(e){return Object(w.deepAccess)(e,Be.JSON_MAPPING.ADSERVER_TARGETING)}u.map(function(t){Object.keys(t).map(function(e){t[e].map(function(e){-1===Ne.indexOf(Object.keys(e)[0])&&(Ne=Object.keys(e).concat(Ne))})})});var l,f,b,m,g,v,y,h=Object.keys(Object(T.default)({},Be.DEFAULT_TARGETING_KEYS,Be.NATIVE_KEYS)),t=_.b.getConfig("targetingControls.allowTargetingKeys")||h,t=(Array.isArray(t)&&0<t.length&&(l=u,f=t,b=Object(T.default)({},Be.TARGETING_KEYS,Be.NATIVE_KEYS),m=Object.keys(b),g={},Object(w.logInfo)("allowTargetingKeys - allowed keys [ "+f.map(function(e){return b[e]}).join(", ")+" ]"),l.map(function(e){var t=Object.keys(e)[0],r=e[t].filter(function(e){var t=Object.keys(e)[0],e=0===m.filter(function(e){return 0===t.indexOf(b[e])}).length||C()(f,function(e){e=b[e];return 0===t.indexOf(e)});return g[t]=!e,e});e[t]=r}),h=Object.keys(g).filter(function(e){return g[e]}),Object(w.logInfo)("allowTargetingKeys - removed keys [ "+h.join(", ")+" ]"),u=l.filter(function(e){return 0<e[Object.keys(e)[0]].length})),u=u.map(function(e){var t;return(t={})[Object.keys(e)[0]]=e[Object.keys(e)[0]].map(function(e){var t;return(t={})[Object.keys(e)[0]]=e[Object.keys(e)[0]].join(","),t}).reduce(function(e,t){return Object(T.default)(t,e)},{}),t}).reduce(function(e,t){var r=Object.keys(t)[0];return e[r]=Object(T.default)({},e[r],t[r]),e},{}),_.b.getConfig("targetingControls.auctionKeyMaxChars"));return t&&(Object(w.logInfo)("Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of "+t+" characters.  Running checks on auction keys..."),h=u,v=t,y=Object(w.deepClone)(h),u=Object.keys(y).map(function(e){return{adUnitCode:e,adserverTargeting:y[e]}}).sort(Me()).reduce(function(e,t,r,n){i=t.adserverTargeting;var i,a=Object.keys(i).reduce(function(e,t){return e+(t+"%3d")+encodeURIComponent(i[t])+"%26"},""),t=(r+1===n.length&&(a=a.slice(0,-3)),t.adUnitCode),a=a.length;return a<=v?(v-=a,Object(w.logInfo)("AdUnit '"+t+"' auction keys comprised of "+a+" characters.  Deducted from running threshold; new limit is "+v,y[t]),e[t]=y[t]):Object(w.logWarn)("The following keys for adUnitCode '"+t+"' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was "+a+", the current allotted amount was "+v+".\n",y[t]),r+1===n.length&&0===Object.keys(e).length&&Object(w.logError)("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e},{})),e.forEach(function(e){u[e]||(u[e]={})}),u},O.setTargetingForGPT=function(n,t){window.googletag.pubads().getSlots().forEach(function(e){Object.keys(n).filter((t||Object(w.isAdUnitCodeMatchingSlot))(e)).forEach(function(r){Object.keys(n[r]).forEach(function(e){var t=n[r][e];"string"==typeof t&&-1!==t.indexOf(",")&&(t=t.split(",")),n[r][e]=t}),Object(w.logMessage)("Attempting to set targeting-map for slot: "+e.getSlotElementId()+" with targeting-map:",n[r]),e.updateTargetingFromMap(n[r])})})},O.getWinningBids=function(e,r){void 0===r&&(r=Ke());var t=He(e);return r.filter(function(e){return E()(t,e.adUnitCode)}).filter(function(e){return 0<e.cpm}).map(function(e){return e.adUnitCode}).filter(w.uniques).map(function(t){return r.filter(function(e){return e.adUnitCode===t?e:null}).reduce(w.getHighestCpm)})},O.setTargetingForAst=function(e){var n=O.getAllTargeting(e);try{O.resetPresetTargetingAST(e)}catch(e){Object(w.logError)("unable to reset targeting for AST"+e)}Object.keys(n).forEach(function(r){return Object.keys(n[r]).forEach(function(e){var t;Object(w.logMessage)("Attempting to set targeting for targetId: "+r+" key: "+e+" value: "+n[r][e]),(Object(w.isStr)(n[r][e])||Object(w.isArray)(n[r][e]))&&(t={},e.search(/pt[0-9]/)<0?t[e.toUpperCase()]=n[r][e]:t[e]=n[r][e],window.apntag.setKeywords(r,t,{overrideKeyValue:!0}))})})},O.isApntagDefined=function(){if(window.apntag&&Object(w.isFn)(window.apntag.setKeywords))return!0};var Fe,Ve,We,O,Ge,p=O;function Le(e,t){return e.adserverTargeting&&t&&(Object(w.isArray)(t)&&E()(t,e.adUnitCode)||"string"==typeof t&&e.adUnitCode===t)}function He(e){return"string"==typeof e?[e]:Object(w.isArray)(e)?e:We.getAdUnitCodes()||[]}function Ke(){var e=We.getBidsReceived(),e=(e=_.b.getConfig("useBidCache")?e:e.filter(function(e){return Ge[e.adUnitCode]===e.auctionId})).filter(function(e){return Object(w.deepAccess)(e,"video.context")!==x.a}).filter(function(e){return"banner"!==e.mediaType||Object(Ue.c)([e.width,e.height])}).filter(De).filter(Re);return ze(e,w.getOldestHighestCpmBid)}function Ye(){return We.getStandardBidderAdServerTargeting().map(function(e){return e.key}).concat(qe).filter(w.uniques)}function Je(n,i,e,t){return Object.keys(i.adserverTargeting).filter(Xe()).forEach(function(e){var t,r;n.length&&n.filter((r=e,function(e){return e.adUnitCode===i.adUnitCode&&e.adserverTargeting[r]})).forEach((t=e,function(e){Object(w.isArray)(e.adserverTargeting[t])||(e.adserverTargeting[t]=[e.adserverTargeting[t]]),e.adserverTargeting[t]=e.adserverTargeting[t].concat(i.adserverTargeting[t]).filter(w.uniques),delete i.adserverTargeting[t]}))}),n.push(i),n}function Xe(){var t=Ye().concat(re.a);return function(e){return-1===t.indexOf(e)}}function Qe(r){var e;return(e={})[r.adUnitCode]=Object.keys(r.adserverTargeting).filter(Xe()).map(function(e){var t;return(t={})[e.substring(0,20)]=[r.adserverTargeting[e]],t}),e}function $e(r,e){return e.map(function(e){var t;return(t={})[(e+"_"+r.bidderCode).substring(0,20)]=[r.adserverTargeting[e]],t})}function Ze(e){Object(w.logMessage)("DEBUG: "+e)}function et(e){Object(w.logWarn)("DEBUG: "+e)}function tt(e){Fe=function(e,t,r){at(this.bidders,r.bidderCode)?et("bidder '"+r.bidderCode+"' excluded from auction by bidder overrides"):(Array.isArray(this.bids)&&this.bids.forEach(function(e){it(e,r.bidderCode,t)||ot(e,r,"bidder")}),e(t,r))}.bind(e),ve.before(Fe,5),Ve=function(e,t){var n=this,t=t.filter(function(e){return!at(n.bidders,e.bidderCode)||(et("bidRequest '"+e.bidderCode+"' excluded from auction by bidder overrides"),!1)});Array.isArray(n.bidRequests)&&t.forEach(function(r){n.bidRequests.forEach(function(t){r.bids.forEach(function(e){it(t,r.bidderCode,e.adUnitCode)||ot(t,e,"bidRequest")})})}),e(t)}.bind(e),ye.before(Ve,5)}function rt(){ve.getHooks({hook:Fe}).remove(),ye.getHooks({hook:Ve}).remove()}function nt(e,t){void 0===t&&(t=!1),_.b.setConfig({debug:!0}),rt(),tt(e),Ze("bidder overrides enabled"+(t?" from session":""))}function it(e,t,r){return e.bidder&&e.bidder!==t||e.adUnitCode&&e.adUnitCode!==r}function at(e,t){return Array.isArray(e)&&-1===e.indexOf(t)}function ot(r,e,n){Object.keys(r).filter(function(e){return-1===["adUnitCode","bidder"].indexOf(e)}).reduce(function(e,t){return Ze("bidder overrides changed '"+e.adUnitCode+"/"+e.bidderCode+"' "+n+"."+t+" from '"+e[t]+".js' to '"+r[t]+"'"),e[t]=r[t],e},e)}_.b.getConfig("debugging",function(e){var t=e.debugging;if(t.enabled){try{window.sessionStorage.setItem("jwpb:debugging",JSON.stringify(t))}catch(t){}nt(t)}else{rt(),Ze("bidder overrides disabled");try{window.sessionStorage.removeItem("jwpb:debugging")}catch(t){}}});var st=e(31),dt=e(40),ct=e(22),l=te(),ut=e(6),pt=e(7).default,y=e(13),t=t.a.triggerUserSyncs,a=ut.EVENTS,lt=a.ADD_AD_UNITS,ft=a.BID_WON,bt=a.REQUEST_BIDS,mt=a.SET_TARGETING,gt=a.AD_RENDER_FAILED,vt=a.AD_RENDER_SUCCEEDED,yt=a.STALE_RENDER,a=ut.AD_RENDER_FAILED_REASON,ht=a.PREVENT_WRITING_ON_MAIN_DOCUMENT,Ot=a.NO_AD,jt=a.EXCEPTION,It=a.CANNOT_FIND_AD,At=a.MISSING_DOC_OR_ADID,xt={bidWon:function(e){var t=m.getBidsRequested().map(function(e){return e.bids.map(function(e){return e.adUnitCode})}).reduce(w.flatten).filter(w.uniques);if(Object(w.contains)(t,e))return!0;Object(w.logError)('The "'+e+'" placement is not defined.')}};function St(e,t,r){e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=t,e.defaultView.frameElement.height=r)}function Et(e,t){var r=[];return Object(w.isArray)(e)&&(t?e.length===t:0<e.length)&&(e.every(function(e){return Object(w.isArrayOfNums)(e,2)})?r=e:Object(w.isArrayOfNums)(e,2)&&r.push(e)),r}function Tt(e,t){var r=Object(w.deepAccess)(e,"mediaTypes."+t+".pos");return r&&Object(w.isNumber)(r)&&isFinite(r)||(r="Value of property 'pos' on ad unit "+e.code+" should be of type: Number",Object(w.logWarn)(r),y.emit(ut.EVENTS.AUCTION_DEBUG,{type:"WARNING",arguments:r}),delete e.mediaTypes[t].pos),e}var wt=void 0;try{wt=window.sessionStorage,Gr=JSON.parse(wt.getItem("jwpb:debugging"))}catch(wt){}Gr&&nt(Gr,!0),l.bidderSettings=l.bidderSettings||{},l.libLoaded=!0,l.version="v5.20.2",Object(w.logInfo)("Prebid.js v5.20.2 loaded"),l.installedModules=["v$prebid.modulesList$"],l.adUnits=l.adUnits||[],l.triggerUserSyncs=t;var _t=Object(r.b)("sync",function(e){var d=[];return e.forEach(function(e){var t,r,n,i,a,o=e.mediaTypes,s=e.bids;s&&Object(w.isArray)(s)?o&&0!==Object.keys(o).length?(o.banner&&(s=e,i=(s=Object(w.deepClone)(s)).mediaTypes.banner,0<(a=Et(i.sizes)).length?(i.sizes=a,s.sizes=a):(Object(w.logError)("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete s.mediaTypes.banner),i=s,o.banner.hasOwnProperty("pos")&&(i=Tt(i,"banner"))),o.video&&(a=i||e,(s=(a=Object(w.deepClone)(a)).mediaTypes.video).playerSize&&(r="number"==typeof s.playerSize[0]?2:1,0<(n=Et(s.playerSize,r)).length?(2==r&&Object(w.logInfo)("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),s.playerSize=n,a.sizes=n):(Object(w.logError)("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete a.mediaTypes.video.playerSize)),r=a,o.video.hasOwnProperty("pos")&&(r=Tt(r,"video"))),o.native&&(s=r||i||e,(n=(s=Object(w.deepClone)(s)).mediaTypes.native).image&&n.image.sizes&&!Array.isArray(n.image.sizes)&&(Object(w.logError)("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete s.mediaTypes.native.image.sizes),n.image&&n.image.aspect_ratios&&!Array.isArray(n.image.aspect_ratios)&&(Object(w.logError)("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete s.mediaTypes.native.image.aspect_ratios),n.icon&&n.icon.sizes&&!Array.isArray(n.icon.sizes)&&(Object(w.logError)("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete s.mediaTypes.native.icon.sizes),t=s),o=Object(T.default)({},i,r,t),d.push(o)):Object(w.logError)("Detected adUnit.code '"+e.code+"' did not have a 'mediaTypes' object defined.  This is a required field for the auction, so this adUnit has been removed."):Object(w.logError)("Detected adUnit.code '"+e.code+"' did not have 'adUnit.bids' defined or 'adUnit.bids' is not an array. Removing adUnit from auction.")}),d},"checkAdUnitSetup");function Ct(e){var r=m[e]().filter(w.bind.call(w.adUnitsFilter,this,m.getAdUnitCodes())),n=m.getLastAuctionId();return r.map(function(e){return e.adUnitCode}).filter(w.uniques).map(function(t){return r.filter(function(e){return e.auctionId===n&&e.adUnitCode===t})}).filter(function(e){return e&&e[0]&&e[0].adUnitCode}).map(function(e){var t;return(t={})[e[0].adUnitCode]={bids:e},t}).reduce(function(e,t){return Object(T.default)(e,t)},{})}function kt(e){var t=e.reason,r=e.message,n=e.bid,e=e.id,t={reason:t,message:r};n&&(t.bid=n),e&&(t.adId=e),Object(w.logError)(r),y.emit(gt,t)}function Pt(e){var t=e.doc,r=e.bid,e=e.id,t={doc:t};r&&(t.bid=r),e&&(t.adId=e),y.emit(vt,t)}l.getAdserverTargetingForAdUnitCodeStr=function(e){if(Object(w.logInfo)("Invoking jwpb.getAdserverTargetingForAdUnitCodeStr",arguments),e)return e=l.getAdserverTargetingForAdUnitCode(e),Object(w.transformAdServerTargetingObj)(e);Object(w.logMessage)("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},l.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e)return(e=m.getAllBidsForAdUnitCode(e).filter(De).filter(Re)).length?e.reduce(w.getHighestCpm):{};Object(w.logMessage)("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},l.getAdserverTargetingForAdUnitCode=function(e){return l.getAdserverTargeting(e)[e]},l.getAdserverTargeting=function(e){return Object(w.logInfo)("Invoking jwpb.getAdserverTargeting",arguments),p.getAllTargeting(e)},l.getNoBids=function(){return Object(w.logInfo)("Invoking jwpb.getNoBids",arguments),Ct("getNoBids")},l.getNoBidsForAdUnitCode=function(t){return{bids:m.getNoBids().filter(function(e){return e.adUnitCode===t})}},l.getBidResponses=function(){return Object(w.logInfo)("Invoking jwpb.getBidResponses",arguments),Ct("getBidsReceived")},l.getBidResponsesForAdUnitCode=function(t){return{bids:m.getBidsReceived().filter(function(e){return e.adUnitCode===t})}},l.setTargetingForGPTAsync=function(e,t){var r;Object(w.logInfo)("Invoking jwpb.setTargetingForGPTAsync",arguments),Object(w.isGptPubadsDefined)()?(r=p.getAllTargeting(e),p.resetPresetTargeting(e,t),p.setTargetingForGPT(r,t),Object.keys(r).forEach(function(t){Object.keys(r[t]).forEach(function(e){"hb_adid"===e&&m.setStatusForBids(r[t][e],ut.BID_STATUS.BID_TARGETING_SET)})}),y.emit(mt,r)):Object(w.logError)("window.googletag is not defined on the page")},l.setTargetingForAst=function(e){Object(w.logInfo)("Invoking jwpb.setTargetingForAn",arguments),p.isApntagDefined()?(p.setTargetingForAst(e),y.emit(mt,p.getAllTargeting())):Object(w.logError)("window.apntag is not defined on the page")},l.renderAd=Object(r.b)("async",function(e,t,r){if(Object(w.logInfo)("Invoking jwpb.renderAd",arguments),Object(w.logMessage)("Calling renderAd with adId :"+t),e&&t)try{var n,i,a,o,s,d,c,u,p,l,f=m.findBidByAdId(t);f?(b=!0,f&&f.status===ut.BID_STATUS.RENDERED&&(Object(w.logWarn)("Ad id "+f.adId+" has been rendered before"),y.emit(yt,f),Object(w.deepAccess)(_.b.getConfig("auctionOptions"),"suppressStaleRender")&&(b=!1)),b&&(f.ad=Object(w.replaceAuctionPrice)(f.ad,f.cpm),f.adUrl=Object(w.replaceAuctionPrice)(f.adUrl,f.cpm),r&&r.clickThrough&&(n=r.clickThrough,f.ad=Object(w.replaceClickThrough)(f.ad,n),f.adUrl=Object(w.replaceClickThrough)(f.adUrl,n)),m.addWinningBid(f),y.emit(ft,f),i=f.height,a=f.width,o=f.ad,s=f.mediaType,d=f.adUrl,c=f.renderer,u=document.createComment("Creative "+f.creativeId+" served by "+f.bidder+" Prebid.js Header Bidding"),se(c)?(de(c,f),Object(w.insertElement)(u,e,"html"),Pt({doc:e,bid:f,id:t})):e===document&&!Object(w.inIframe)()||"video"===s?kt({reason:ht,message:"Error trying to write ad. Ad render call ad id "+t+" was prevented from writing to the main document.",bid:f,id:t}):o?(navigator.userAgent&&-1<navigator.userAgent.toLowerCase().indexOf("firefox/")&&((p=navigator.userAgent.toLowerCase().match(/firefox\/([\d\.]+)/)[1])&&parseInt(p,10)<67&&e.open("text/html","replace")),e.write(o),e.close(),St(e,a,i),Object(w.insertElement)(u,e,"html"),Object(w.callBurl)(f),Pt({doc:e,bid:f,id:t})):d?((l=Object(w.createInvisibleIframe)()).height=i,l.width=a,l.style.display="inline",l.style.overflow="hidden",l.src=d,Object(w.insertElement)(l,e,"body"),St(e,a,i),Object(w.insertElement)(u,e,"html"),Object(w.callBurl)(f),Pt({doc:e,bid:f,id:t})):kt({reason:Ot,message:"Error trying to write ad. No ad for bid response id: "+t,bid:f,id:t}))):kt({reason:It,message:"Error trying to write ad. Cannot find ad by given id : "+t,id:t})}catch(e){var b="Error trying to write ad Id :"+t+" to the page:"+e.message;kt({reason:jt,message:b,id:t})}else kt({reason:At,message:"Error trying to write ad Id :"+t+" to the page. Missing document or adId",id:t})}),l.removeAdUnit=function(e){Object(w.logInfo)("Invoking jwpb.removeAdUnit",arguments),e?(Object(w.isArray)(e)?e:[e]).forEach(function(e){for(var t=l.adUnits.length-1;0<=t;t--)l.adUnits[t].code===e&&l.adUnits.splice(t,1)}):l.adUnits=[]},l.requestBids=Object(r.b)("async",function(e){var t=void 0===e?{}:e,r=t.bidsBackHandler,n=t.timeout,i=t.adUnits,a=t.adUnitCodes,o=t.labels,t=t.auctionId,n=(y.emit(bt),n||_.b.getConfig("bidderTimeout")),i=i&&_.b.convertAdUnitFpd(Object(w.isArray)(i)?i:[i])||l.adUnits,s=(Object(w.logInfo)("Invoking jwpb.requestBids",arguments),[]),d=_.b.getConfig("s2sConfig")||[];if((d=Array.isArray(d)?d:[d]).forEach(function(e){e.bidders&&s.push.apply(s,e.bidders)}),i=_t(i),a&&a.length?i=i.filter(function(e){return E()(a,e.code)}):a=i&&i.map(function(e){return e.code}),i.forEach(function(n){var i=Object.keys(n.mediaTypes||{banner:"banner"}),e=n.bids.map(function(e){return e.bidder}),a=pt.bidderRegistry,e=s?e.filter(function(e){return!E()(s,e)}):e;n.transactionId=Object(w.generateUUID)(),e.forEach(function(t){var e=a[t],e=e&&e.getSpec&&e.getSpec(),r=e&&e.supportedMediaTypes||["banner"];i.some(function(e){return E()(r,e)})?st.a.incrementBidderRequestsCounter(n.code,t):(Object(w.logWarn)(Object(w.unsupportedBidderMessage)(n,t)),n.bids=n.bids.filter(function(e){return e.bidder!==t}))}),st.a.incrementRequestsCounter(n.code)}),i&&0!==i.length){var c=m.createAuction({adUnits:i,adUnitCodes:a,callback:r,cbTimeout:n,labels:o,auctionId:t}),d=i.length;15<d&&Object(w.logInfo)("Current auction "+c.getAuctionId()+" contains "+d+" adUnits.",i),a.forEach(function(e){return p.setLatestAuctionForAdUnit(e,c.getAuctionId())}),c.callBids()}else if(Object(w.logMessage)("No adUnits configured. No bids requested."),"function"==typeof r)try{r()}catch(e){Object(w.logError)("Error executing bidsBackHandler",null,e)}}),l.requestBids.before(function(e,t){function r(e){for(var t;t=e.shift();)t()}r(ct.c),r(Rt),e.call(this,t)},49),l.addAdUnits=function(e){Object(w.logInfo)("Invoking jwpb.addAdUnits",arguments),l.adUnits.push.apply(l.adUnits,_.b.convertAdUnitFpd(Object(w.isArray)(e)?e:[e])),y.emit(lt)},l.onEvent=function(e,t,r){Object(w.logInfo)("Invoking jwpb.onEvent",arguments),Object(w.isFn)(t)?!r||xt[e].call(null,r)?y.on(e,t,r):Object(w.logError)('The id provided is not valid for event "'+e+'" and no handler was set.'):Object(w.logError)('The event handler provided is not a function and was not set on event "'+e+'".')},l.offEvent=function(e,t,r){Object(w.logInfo)("Invoking jwpb.offEvent",arguments),r&&!xt[e].call(null,r)||y.off(e,t,r)},l.getEvents=function(){return Object(w.logInfo)("Invoking jwpb.getEvents"),y.getEvents()},l.registerBidAdapter=function(e,t){Object(w.logInfo)("Invoking jwpb.registerBidAdapter",arguments);try{pt.registerBidAdapter(e(),t)}catch(e){Object(w.logError)("Error registering bidder adapter : "+e.message)}},l.registerAnalyticsAdapter=function(e){Object(w.logInfo)("Invoking jwpb.registerAnalyticsAdapter",arguments);try{pt.registerAnalyticsAdapter(e)}catch(e){Object(w.logError)("Error registering analytics adapter : "+e.message)}},l.createBid=function(e){return Object(w.logInfo)("Invoking jwpb.createBid",arguments),Object(dt.a)(e)};var Rt=[],Dt=Object(r.b)("async",function(e){e&&!Object(w.isEmpty)(e)?(Object(w.logInfo)("Invoking jwpb.enableAnalytics for: ",e),pt.enableAnalytics(e)):Object(w.logError)("jwpb.enableAnalytics should be called with option {}")},"enableAnalyticsCb");function Ut(e){e.forEach(function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){Object(w.logError)("Error processing command :","prebid.js",e)}})}l.enableAnalytics=function(e){Rt.push(Dt.bind(this,e))},l.aliasBidder=function(e,t,r){Object(w.logInfo)("Invoking jwpb.aliasBidder",arguments),e&&t?pt.aliasBidAdapter(e,t,r):Object(w.logError)("bidderCode and alias must be passed as arguments","jwpb.aliasBidder")},l.getAllWinningBids=function(){return m.getAllWinningBids()},l.getAllPrebidWinningBids=function(){return m.getBidsReceived().filter(function(e){return e.status===ut.BID_STATUS.BID_TARGETING_SET})},l.getHighestCpmBids=function(e){return p.getWinningBids(e)},l.markWinningBidAsUsed=function(t){var e=[];t.adUnitCode&&t.adId?e=m.getBidsReceived().filter(function(e){return e.adId===t.adId&&e.adUnitCode===t.adUnitCode}):t.adUnitCode?e=p.getWinningBids(t.adUnitCode):t.adId?e=m.getBidsReceived().filter(function(e){return e.adId===t.adId}):Object(w.logWarn)("Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function."),0<e.length&&(e[0].status=ut.BID_STATUS.RENDERED)},l.getConfig=_.b.getConfig,l.readConfig=_.b.readConfig,l.setConfig=_.b.setConfig,l.setBidderConfig=_.b.setBidderConfig,l.que.push(function(){window.addEventListener("message",ke,!1)}),l.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){Object(w.logError)("Error processing command :",e.message,e.stack)}else Object(w.logError)("Commands written into jwpb.cmd.push must be wrapped in a function")},l.que.push=l.cmd.push,l.processQueue=function(){r.b.ready(),Ut(l.que),Ut(l.cmd)};var Bt,Nt,qt,zt,Mt,d=l,h=e(7),a=e(102),Ft=e.n(a),Vt={value:!0,definedInConfig:!1},f=0,Wt=!1,Gt={iab:function(r,n,a){function e(e,t){Object(w.logInfo)("Received a response from CMP",e),t?!1!==e.gdprApplies&&"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||r(e,a):n("CMP unable to register callback function.  Please check CMP setup.",a)}t={};var t,i={consentDataCallback:function(e){t.getConsentData=e,c()},vendorConsentsCallback:function(e){t.getVendorConsents=e,c()}},d={},o=function(){for(var e,t,r=window;!e;){try{if("function"==typeof r.__tcfapi||"function"==typeof r.__cmp){t="function"==typeof r.__tcfapi?(f=2,r.__tcfapi):(f=1,r.__cmp),e=r;break}}catch(e){}try{if(r.frames.__tcfapiLocator){f=2,e=r;break}}catch(e){}try{if(r.frames.__cmpLocator){f=1,e=r;break}}catch(e){}if(r===window.top)break;r=r.parent}return{cmpFrame:e,cmpFunction:t}}(),s=o.cmpFrame,o=o.cmpFunction;function c(){t.getConsentData&&t.getVendorConsents&&(Object(w.logInfo)("Received all requested responses from CMP",t),r(t,a))}if(!s)return n("CMP not found.",a);function u(r,n){var e=a.adUnits,t=1,i=1;Array.isArray(e)&&0<e.length&&(t=(e=Object(w.getAdUnitSizes)(e[0]))[0][0],i=e[0][1]),window.$sf.ext.register(t,i,function(e,t){"cmpReturn"===e&&(e="getConsentData"===r?t.vendorConsentData:t.vendorConsents,n(e))}),window.$sf.ext.cmp(r)}function p(e,o,t){var r=2===f?"__tcfapi":"__cmp",s=r+"Call";function n(e){var t=r+"Return",e="string"==typeof e.data&&Ft()(e.data,t)?JSON.parse(e.data):e.data;e[t]&&e[t].callId&&(e=e[t],void 0!==d[e.callId]&&d[e.callId](e.returnValue,e.success))}2===f?(window[r]=function(e,t,r,n){var i,a=Math.random()+"",e=((i={})[s]={command:e,version:t,parameter:n,callId:a},i);d[a]=r,o.postMessage(e,"*")},window.addEventListener("message",n,!1),window[r](e,f,t)):(window[r]=function(e,t,r){var n,i=Math.random()+"",e=((n={})[s]={command:e,parameter:t,callId:i},n);d[i]=r,o.postMessage(e,"*")},window.addEventListener("message",n,!1),window[r](e,void 0,t))}Object(w.isFn)(o)?(Object(w.logInfo)("Detected CMP API is directly accessible, calling it now..."),1===f?(o("getConsentData",null,i.consentDataCallback),o("getVendorConsents",null,i.vendorConsentsCallback)):2===f&&o("addEventListener",f,e)):1===f&&window.$sf&&window.$sf.ext&&"function"==typeof window.$sf.ext.cmp?(Object(w.logInfo)("Detected Prebid.js is encased in a SafeFrame and CMP is registered, calling it now..."),u("getConsentData",i.consentDataCallback),u("getVendorConsents",i.vendorConsentsCallback)):(Object(w.logInfo)("Detected CMP is outside the current iframe where Prebid.js is located, calling it now..."),1===f?(p("getConsentData",s,i.consentDataCallback),p("getVendorConsents",s,i.vendorConsentsCallback)):2===f&&p("addEventListener",s,e))},static:function(e,t,r){e(zt,r)}};function Lt(e,t){e={context:this,args:[t],nextFn:e,adUnits:t.adUnits||jwpb.adUnits,bidsBackHandler:t.bidsBackHandler,haveExited:!1,timer:null};return Mt?(Object(w.logInfo)("User consent information already known.  Pulling internally stored information..."),Jt(null,e)):E()(Object.keys(Gt),Bt)?(Gt[Bt].call(this,Ht,Kt,e),void(e.haveExited||(0===Nt?Ht(void 0,e):e.timer=setTimeout(function(e){Kt("CMP workflow exceeded timeout threshold.",e)}.bind(null,e),Nt)))):(Object(w.logWarn)("CMP framework ("+Bt+") is not a supported framework.  Aborting consentManagement module and resuming auction."),e.nextFn.apply(e.context,e.args))}function Ht(r,e){"static"===Bt&&2==(f=r.getConsentData?1:r.getTCData?2:0)&&(r=r.getTCData);var t=1===f?function(e){var t=e&&e.getConsentData&&e.getConsentData.gdprApplies;return!("boolean"==typeof t&&(!0!==t||Object(w.isStr)(e.getConsentData.consentData)&&Object(w.isPlainObject)(e.getVendorConsents)&&1<Object.keys(e.getVendorConsents).length))}:2===f?function(){var e=r&&"boolean"==typeof r.gdprApplies?r.gdprApplies:qt,t=r&&r.tcString;return!("boolean"==typeof e&&(!0!==e||Object(w.isStr)(t)))}:null;Vt.definedInConfig&&2===f?Object(w.logWarn)("'allowAuctionWithoutConsent' ignored for TCF 2"):Vt.definedInConfig||1!==f||Object(w.logInfo)("'allowAuctionWithoutConsent' using system default: (true)."),Object(w.isFn)(t)?t(r)?Kt("CMP returned unexpected value during lookup process.",e,r):(clearTimeout(e.timer),Yt(r),Jt(null,e)):Kt("Unable to derive CMP version to process data.  Consent object does not conform to TCF v1 or v2 specs.",e,r)}function Kt(e,t,r){clearTimeout(t.timer),Vt.value&&1===f&&Yt(void 0),Jt(e,t,r)}function Yt(e){1===f?Mt={consentString:e?e.getConsentData.consentData:void 0,vendorData:e?e.getVendorConsents:void 0,gdprApplies:e?e.getConsentData.gdprApplies:qt}:(Mt={consentString:e?e.tcString:void 0,vendorData:e||void 0,gdprApplies:e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:qt},e&&e.addtlConsent&&Object(w.isStr)(e.addtlConsent)&&(Mt.addtlConsent=e.addtlConsent)),Mt.apiVersion=f,h.gdprDataHandler.setConsentData(Mt)}function Jt(e,t,r){var n,i,a;!1===t.haveExited&&(t.haveExited=!0,n=t.context,i=t.args,a=t.nextFn,e?Vt.value&&1===f?(Object(w.logWarn)(e+" 'allowAuctionWithoutConsent' activated.",r),a.apply(n,i)):(Object(w.logError)(e+" Canceling auction as per consentManagement config.",r),"function"==typeof t.bidsBackHandler?t.bidsBackHandler():Object(w.logError)("Error executing bidsBackHandler")):a.apply(n,i))}_.b.getConfig("consentManagement",function(e){(e=(e=e.consentManagement)&&(e.gdpr||e.usp?e.gdpr:e))&&"object"==typeof e?(Object(w.isStr)(e.cmpApi)?Bt=e.cmpApi:(Bt="iab",Object(w.logInfo)("consentManagement config did not specify cmp.  Using system default setting (iab).")),Object(w.isNumber)(e.timeout)?Nt=e.timeout:(Nt=1e4,Object(w.logInfo)("consentManagement config did not specify timeout.  Using system default setting (10000).")),"boolean"==typeof e.allowAuctionWithoutConsent&&(Vt.value=e.allowAuctionWithoutConsent,Vt.definedInConfig=!0),qt=!0===e.defaultGdprScope,Object(w.logInfo)("consentManagement module has been activated..."),"static"===Bt&&(Object(w.isPlainObject)(e.consentData)?(zt=e.consentData,Nt=0):Object(w.logError)("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),Wt||jwpb.requestBids.before(Lt,50),Wt=!0):Object(w.logWarn)("consentManagement config not defined, exiting consent manager")});var Xt,Qt,$t=e(57),j=e(10),Zt={appnexus:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/openrtb2/auction",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/cookie_sync",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/cookie_sync"},timeout:1e3},appnexuspsp:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://ib.adnxs.com/openrtb2/prebid",noP1Consent:"https://ib.adnxs-simple.com/openrtb2/prebid"},timeout:1e3},rubicon:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction",noP1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid-server.rubiconproject.com/cookie_sync",noP1Consent:"https://prebid-server.rubiconproject.com/cookie_sync"},timeout:500},openx:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid.openx.net/openrtb2/auction",noP1Consent:"https://prebid.openx.net/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid.openx.net/cookie_sync",noP1Consent:"https://prebid.openx.net/cookie_sync"},timeout:1e3}},er=_.b.getConfig,tr=v.S2S.SRC,rr=0,nr={timeout:1e3,maxBids:1,adapter:"prebidServer",adapterOptions:{},syncUrlModifier:{}};function ir(i){var e,a;if(i)return e=Array.isArray(i)?i:[i],a=[],e.every(function(e,t,r){return n=i,["endpoint","syncEndpoint"].forEach(function(t){var e;Object(w.isStr)(n[t])&&(e=n[t],n[t]={p1Consent:e,noP1Consent:e}),!Object(w.isPlainObject)(n[t])||n[t].p1Consent&&n[t].noP1Consent||["p1Consent","noP1Consent"].forEach(function(e){n[t][e]||Object(w.logWarn)("s2sConfig."+t+"."+e+" not defined.  PBS request will be skipped in some P1 scenarios.")})}),!1!==function(t){if(t.defaultVendor){var r=t.defaultVendor,n=Object.keys(t);if(!Zt[r])return Object(w.logError)("Incorrect or unavailable prebid server default vendor option: "+r),!1;Object.keys(Zt[r]).forEach(function(e){nr[e]!==t[e]&&E()(n,e)||(t[e]=Zt[r][e])})}return t.enabled="boolean"==typeof t.enabled&&t.enabled}(e)&&!1!==function(){var t=Object.keys(e);if(0<["accountId","bidders","endpoint"].filter(function(e){return!E()(t,e)&&(Object(w.logError)(e+" missing in server to server config"),!0)}).length)return!1}()?(Array.isArray(e.bidders)&&(r[t].bidders=e.bidders.filter(function(e){return-1===a.indexOf(e)&&(a.push(e),!0)})),!0):(Object(w.logWarn)("prebidServer: s2s config is disabled"),!1);var n})?Xt=e:void 0}function ar(e,t){var r,n,i,a,o;0!==e.length&&((i=e.shift()).no_cookie?(r=i.usersync.type,n=i.usersync.url,i=i.bidder,a=w.bind.call(ar,null,e,t),(o=t).syncUrlModifier&&"function"==typeof o.syncUrlModifier[i]?or(r,o.syncUrlModifier[i](r,n,i),i,a):or(r,n,i,a)):ar(e,t))}function or(e,t,r,n){t?"image"===e||"redirect"===e?(Object(w.logMessage)('Invoking image pixel user sync for bidder: "'+r+'"'),Object(w.triggerPixel)(t,n)):"iframe"==e?(Object(w.logMessage)('Invoking iframe user sync for bidder: "'+r+'"'),Object(w.insertUserSyncIframe)(t,n)):(Object(w.logError)('User sync type "'+e+'" not supported for bidder: "'+r+'"'),n()):(Object(w.logError)('No sync url for bidder "'+r+'": '+t),n())}_.b.setDefaults({s2sConfig:nr}),er("s2sConfig",function(e){return ir(e.s2sConfig)});function sr(c,u,p){var l=[];return[["errors","serverErrors"],["responsetimemillis","serverResponseTimeMs"]].forEach(function(e){var r,t,n,i,a;r=u,t=c,n=e[0],i=e[1],(a=Object(w.deepAccess)(t,"ext."+n))&&Object.keys(a).forEach(function(t){var e=C()(r,function(e){return e.bidderCode===t});e&&(e[i]=a[t])})}),c.seatbid&&c.seatbid.forEach(function(d){(d.bid||[]).forEach(function(e){var t,r=""+e.impid+d.seat,r=(lr[r]&&(t=Object(w.getBidRequest)(lr[r],u)),e.price),n=0!==r?v.STATUS.GOOD:v.STATUS.NO_BID,n=Object(dt.a)(n,t||{bidder:d.seat,src:tr}),r=(n.cpm=r,Object(w.deepAccess)(c,["ext","responsetimemillis",d.seat].join(".")));t&&r&&(t.serverResponseTimeMs=r);var i,a,o,r=Object(w.deepAccess)(e,"ext.prebid.bidid"),r=(Object(w.isStr)(r)&&(n.pbsBidId=r),Object(w.isStr)(Object(w.deepAccess)(e,"ext.prebid.events.win"))&&(r=t.auctionId,s=n.adId,i=Object(w.deepAccess)(e,"ext.prebid.events.win"),[r,s].every(w.isStr)&&(br[""+r+s]=i)),Object(w.deepAccess)(e,"ext.prebid.targeting")),r=(Object(w.isPlainObject)(r)&&(Object(w.isStr)(Object(w.deepAccess)(e,"ext.prebid.events.win"))&&(r=Object(w.getDefinedParams)(r,Object.keys(r).filter(function(e){return-1===e.indexOf("hb_winurl")&&-1===e.indexOf("hb_bidid")}))),n.adserverTargeting=r),n.seatBidId=e.id,Object(w.deepAccess)(e,"ext.prebid.type")===x.d?(n.mediaType=x.d,s=t.sizes&&t.sizes[0],n.playerWidth=s[0],n.playerHeight=s[1],e.ext.prebid.cache&&"object"==typeof e.ext.prebid.cache.vastXml&&e.ext.prebid.cache.vastXml.cacheId&&e.ext.prebid.cache.vastXml.url?(n.videoCacheKey=e.ext.prebid.cache.vastXml.cacheId,n.vastUrl=e.ext.prebid.cache.vastXml.url):r&&r.hb_uuid&&r.hb_cache_host&&r.hb_cache_path&&(n.videoCacheKey=r.hb_uuid,n.vastUrl="https://"+r.hb_cache_host+r.hb_cache_path+"?uuid="+r.hb_uuid),e.adm&&(n.vastXml=e.adm),!n.vastUrl&&e.nurl&&(n.vastUrl=e.nurl)):Object(w.deepAccess)(e,"ext.prebid.type")===x.c?(n.mediaType=x.c,i="string"==typeof e.adm?n.adm=JSON.parse(e.adm):n.adm=e.adm,(s={})[pr.img]=i.imptrackers||[],s[pr.js]=i.jstracker?[i.jstracker]:[],a=s,i.eventtrackers&&i.eventtrackers.forEach(function(e){switch(e.method){case pr.img:a[pr.img].push(e.url);break;case pr.js:a[pr.js].push(e.url)}}),Object(w.isPlainObject)(i)&&Array.isArray(i.assets)?(o=fr[e.impid],n.native=Object(w.cleanObj)(i.assets.reduce(function(t,r){var n=o[r.id];return Object(w.isPlainObject)(r.img)?t[n.img.type?ur[n.img.type]:"image"]=Object(w.pick)(r.img,["url","w as width","h as height"]):Object(w.isPlainObject)(r.title)?t.title=r.title.text:Object(w.isPlainObject)(r.data)&&cr.forEach(function(e){dr[e]===n.data.type&&(t[e]=r.data.value)}),t},Object(w.cleanObj)({clickUrl:i.link,clickTrackers:Object(w.deepAccess)(i,"link.clicktrackers"),impressionTrackers:a[pr.img],javascriptTrackers:a[pr.js]})))):Object(w.logError)("prebid server native response contained no assets")):e.adm&&e.nurl?(n.ad=e.adm,n.ad+=Object(w.createTrackPixelHtml)(decodeURIComponent(e.nurl))):e.adm?n.ad=e.adm:e.nurl&&(n.adUrl=e.nurl),n.width=e.w,n.height=e.h,e.dealid&&(n.dealId=e.dealid),n.requestId=t.bidId||t.bid_Id,n.creative_id=e.crid,n.creativeId=e.crid,e.burl&&(n.burl=e.burl),n.currency=c.cur||"USD",n.meta={},Object(w.deepAccess)(e,"ext.prebid.meta")),s=(r&&Object(w.isPlainObject)(r)&&(n.meta=Object(w.deepClone)(r)),e.adomain&&(n.meta.advertiserDomains=e.adomain),p.defaultTtl||60);n.ttl=e.exp||s,n.netRevenue=!e.netRevenue||e.netRevenue,l.push({adUnit:t.adUnitCode,bid:n})})}),l}var dr={sponsoredBy:1,body:2,rating:3,likes:4,downloads:5,price:6,salePrice:7,phone:8,address:9,body2:10,cta:12},cr=Object.keys(dr),ur={icon:1,image:3},pr={img:1,js:2},lr=([dr,ur,{impression:1,"viewable-mrc50":2,"viewable-mrc100":3,"viewable-video50":4},pr].forEach(function(t){Object.keys(t).forEach(function(e){t[t[e]]=e})}),{}),fr={},br={};function mr(e){var t=function(e,t){if([e,t].every(w.isStr))return br[""+e+t]}(e.auctionId,e.adId);Object(w.isStr)(t)&&(Object(w.logMessage)('Invoking image pixel for wurl on BID_WIN: "'+t+'"'),Object(w.triggerPixel)(t),[t=e.auctionId,e=e.adId].every(w.isStr)&&(br[""+t+e]=void 0))}function gr(e,t){return r=!0,(r=(t=t)&&t.gdprApplies&&2===t.apiVersion?!(!0!==Object(w.deepAccess)(t,"vendorData.purpose.consents.1")):r)?e.p1Consent:e.noP1Consent;var r}function vr(e){var t,r;return Array.isArray(e)&&0<e.length&&(t=e[0].gdprConsent,r=e[0].uspConsent),{gdprConsent:t,uspConsent:r}}Object(w.getPrebidInternal)().setEidPermissions=function(e){Qt=e},h.default.registerBidAdapter(new function(){var e=new $t.a("prebidServer");return e.callBids=function(p,l,f,b,e){var t,r,n,i,a=Object(w.deepClone)(p.ad_units),o=vr(l),s=o.gdprConsent,o=o.uspConsent,a=a.filter(function(e){return e.mediaTypes&&(e.mediaTypes.native||e.mediaTypes.banner&&e.mediaTypes.banner.sizes||e.mediaTypes.video&&e.mediaTypes.video.playerSize)}),m=a.map(function(e){return e.bids.map(function(e){return e.bidder}).filter(w.uniques)}).reduce(w.flatten).filter(w.uniques);Array.isArray(Xt)&&(p.s2sConfig&&p.s2sConfig.syncEndpoint&&gr(p.s2sConfig.syncEndpoint,s)&&(t=p.s2sConfig.bidders.map(function(e){return h.default.aliasRegistry[e]||e}).filter(function(e,t,r){return r.indexOf(e)===t}),r=s,o=o,n=p.s2sConfig,Xt.length!==rr&&(rr++,t={uuid:Object(w.generateUUID)(),bidders:t,account:n.accountId},i=n.userSyncLimit,Object(w.isNumber)(i)&&0<i&&(t.limit=i),r&&(t.gdpr=r.gdprApplies?1:0,!1!==r.gdprApplies&&(t.gdpr_consent=r.consentString)),o&&(t.us_privacy=o),"boolean"==typeof n.coopSync&&(t.coopSync=n.coopSync),i=JSON.stringify(t),Object(ie.a)(gr(n.syncEndpoint,r),function(e){try{ar((e=JSON.parse(e)).bidder_status,n)}catch(e){Object(w.logError)(e)}},i,{contentType:"text/plain",withCredentials:!0}))),t=(o=function(e,l,t,f,r){var n,i,a,o,b=[],m={},g=l[0],v=new Set;if(t.forEach(function(n){for(var r=n.code,e=1;v.has(r);)r=n.code+"-"+ ++e;v.add(r);var a=Object(re.h)(Object(w.deepAccess)(n,"mediaTypes.native"));if(a)try{p=fr[r]=Object.keys(a).reduce(function(e,t){var r=a[t];function n(e){return Object(T.default)({required:r.required?1:0},e?Object(w.cleanObj)(e):{})}switch(t){case"image":case"icon":var i=ur[t],i=Object(w.cleanObj)({type:i,w:Object(w.deepAccess)(r,"sizes.0"),h:Object(w.deepAccess)(r,"sizes.1"),wmin:Object(w.deepAccess)(r,"aspect_ratios.0.min_width"),hmin:Object(w.deepAccess)(r,"aspect_ratios.0.min_height")});if(!(i.w&&i.h||i.hmin&&i.wmin))throw"invalid img sizes (must provide sizes or min_height & min_width if using aspect_ratios)";Array.isArray(r.aspect_ratios)&&(i.ext={aspectratios:r.aspect_ratios.map(function(e){return e.ratio_width+":"+e.ratio_height})}),e.push(n({img:i}));break;case"title":if(!r.len)throw"invalid title.len";e.push(n({title:{len:r.len}}));break;default:i=dr[t];i&&e.push(n({data:{type:i,len:r.len}}))}return e},[])}catch(n){Object(w.logError)("error creating native request: "+String(n))}var i=Object(w.deepAccess)(n,"mediaTypes.video"),t=Object(w.deepAccess)(n,"mediaTypes.banner"),o=(n.bids.forEach(function(e){var t;lr[""+r+e.bidder]=e.bid_id,h.default.aliasRegistry[e.bidder]&&(t=h.default.bidderRegistry[e.bidder])&&!t.getSpec().skipPbsAliasing&&(m[e.bidder]=h.default.aliasRegistry[e.bidder])}),{});if(t&&t.sizes&&(d=Object(w.parseSizesInput)(t.sizes).map(function(e){var e=e.split("x"),t=e[0],e=e[1];return{w:parseInt(t,10),h:parseInt(e,10)}}),o.banner={format:d},t.pos&&(o.banner.pos=t.pos)),Object(w.isEmpty)(i)||("outstream"!==i.context||i.renderer||n.renderer?("instream"!==i.context||i.hasOwnProperty("placement")||(i.placement=1),o.video=Object.keys(i).filter(function(e){return"context"!==e}).reduce(function(e,t){return"playerSize"===t?(e.w=Object(w.deepAccess)(i,t+".0.0"),e.h=Object(w.deepAccess)(i,t+".0.1")):e[t]=i[t],e},{})):Object(w.logError)("Outstream bid without renderer cannot be sent to Prebid Server.")),p)try{o.native={request:JSON.stringify({context:1,plcmttype:1,eventtrackers:[{event:1,methods:[1]}],assets:p}),ver:"1.2"}}catch(n){Object(w.logError)("error creating native request: "+String(n))}var s,d=n.bids.reduce(function(e,t){var r=h.default.bidderRegistry[t.bidder];return r&&r.getSpec().transformBidParams&&(t.params=r.getSpec().transformBidParams(t.params,!0,n,l)),e[t.bidder]=f.adapterOptions&&f.adapterOptions[t.bidder]?Object(T.default)({},t.params,f.adapterOptions[t.bidder]):t.params,e},Object(T.default)({},Object(w.deepAccess)(n,"ortb2Imp.ext"))),c={id:r,ext:d,secure:f.secure},u=Object(T.default)({},Object(w.deepAccess)(n,"ortb2Imp.ext.data")),t=(Object.keys(u).forEach(function(e){"pbadslot"===e?"string"==typeof u[e]&&u[e]?Object(w.deepSetValue)(c,"ext.data.pbadslot",u[e]):delete c.ext.data.pbadslot:"adserver"===e?["name","adslot"].forEach(function(e){var t=Object(w.deepAccess)(u,"adserver."+e);"string"==typeof t&&t&&Object(w.deepSetValue)(c,"ext.data.adserver."+e.toLowerCase(),t)}):Object(w.deepSetValue)(c,"ext.data."+e,u[e])}),Object(T.default)(c,o),C()(g.bids,function(e){return e.adUnitCode===n.code&&e.storedAuctionResponse})),p=(t&&Object(w.deepSetValue)(c,"ext.prebid.storedauctionresponse.id",t.storedAuctionResponse.toString()),C()(g.bids,function(e){return e.adUnitCode===n.code&&"function"==typeof e.getFloor}));if(p){try{s=p.getFloor({currency:_.b.getConfig("currency.adServerCurrency")||"USD"})}catch(n){Object(w.logError)("PBS: getFloor threw an error: ",n)}s&&s.currency&&!isNaN(parseFloat(s.floor))&&(c.bidfloor=parseFloat(s.floor),c.bidfloorcur=s.currency)}(c.banner||c.video||c.native)&&b.push(c)}),b.length)return(t={id:e.tid,source:{tid:e.tid},tmax:f.timeout,imp:b,test:0,ext:{prebid:{auctiontimestamp:g.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}}}}).ext.prebid=Object(T.default)(t.ext.prebid,{channel:{name:"pbjs",version:jwpb.version}}),er("debug")&&(t.ext.prebid=Object(T.default)(t.ext.prebid,{debug:!0})),f.extPrebid&&"object"==typeof f.extPrebid&&(t.ext.prebid=Object(T.default)(t.ext.prebid,f.extPrebid)),(e=_.b.getConfig("currency.adServerCurrency"))&&"string"==typeof e?t.cur=[e]:Array.isArray(e)&&e.length&&(t.cur=[e[0]]),e=t,a=l[0].refererInfo.referer,o=f.accountId,e&&("object"==typeof _.b.getConfig("app")?(e.app=_.b.getConfig("app"),e.app.publisher={id:o}):(e.site={},Object(w.isPlainObject)(_.b.getConfig("site"))&&(e.site=_.b.getConfig("site")),Object(w.deepAccess)(e.site,"publisher.id")||Object(w.deepSetValue)(e.site,"publisher.id",o),e.site.page||(e.site.page=a)),"object"==typeof _.b.getConfig("device")&&(e.device=_.b.getConfig("device")),e.device||(e.device={}),e.device.w||(e.device.w=window.innerWidth),e.device.h||(e.device.h=window.innerHeight)),(o=Object(w.deepAccess)(l,"0.bids.0.schain"))&&(t.source.ext={schain:o}),Object(w.isEmpty)(m)||(t.ext.prebid.aliases=Object(T.default)({},t.ext.prebid.aliases,m)),a=Object(w.deepAccess)(l,"0.bids.0.userIdAsEids"),Object(w.isArray)(a)&&0<a.length&&Object(w.deepSetValue)(t,"user.ext.eids",a),Object(w.isArray)(Qt)&&0<Qt.length&&(r&&Object(w.isArray)(r)&&Qt.forEach(function(e){e.bidders&&(e.bidders=e.bidders.filter(function(e){return E()(r,e)}))}),Object(w.deepSetValue)(t,"ext.prebid.data.eidpermissions",Qt)),(e=_.b.getConfig("multibid"))&&Object(w.deepSetValue)(t,"ext.prebid.multibid",e.reduce(function(e,t){var r={};return Object.keys(t).forEach(function(e){r[e.toLowerCase()]=t[e]}),e.push(r),e},[])),l&&(g.gdprConsent&&("boolean"==typeof g.gdprConsent.gdprApplies&&(n=g.gdprConsent.gdprApplies?1:0),Object(w.deepSetValue)(t,"regs.ext.gdpr",n),Object(w.deepSetValue)(t,"user.ext.consent",g.gdprConsent.consentString),g.gdprConsent.addtlConsent&&"string"==typeof g.gdprConsent.addtlConsent&&Object(w.deepSetValue)(t,"user.ext.ConsentedProvidersSettings.consented_providers",g.gdprConsent.addtlConsent)),g.uspConsent&&Object(w.deepSetValue)(t,"regs.ext.us_privacy",g.uspConsent)),!0===er("coppa")&&Object(w.deepSetValue)(t,"regs.coppa",1),o=er("ortb2")||{},Object(w.mergeDeep)(t,o),a=t,i=_.b.getBidderConfig(),(e=Object.keys(i).reduce(function(e,t){var r=i[t];return r.ortb2&&(r=Object(w.mergeDeep)({},r.ortb2),e.push({bidders:[t],config:{ortb2:r}})),e},[])).length&&Object(w.deepSetValue)(a,"ext.prebid.bidderconfig",e),t;Object(w.logError)("Request to Prebid Server rejected due to invalid media type(s) in adUnit.")}(p,l,a,p.s2sConfig,m))&&JSON.stringify(o),Object(w.logInfo)("BidRequest: "+t),r=gr(p.s2sConfig.endpoint,s),o&&t&&r?e(r,{success:function(e){var t,r,n,i=e,e=m,a=l,o=f,s=b,d=p.s2sConfig,c=(u=vr(a)).gdprConsent,u=u.uspConsent;try{t=JSON.parse(i),sr(t,a,d).forEach(function(e){var t=e.adUnit,e=e.bid;Object(j.b)(t,e,a)&&o(t,e)}),a.forEach(function(e){return g.a.emit(v.EVENTS.BIDDER_DONE,e)})}catch(i){Object(w.logError)(i)}(!t||t.status&&E()(t.status,"Error"))&&Object(w.logError)("error parsing response: ",t.status),s(),r=c,n=u,e.forEach(function(e){var t=h.default.getBidAdapter(e);t&&t.registerSyncs&&_.b.runWithBidder(e,w.bind.call(t.registerSyncs,t,[],r,n))})},error:b},t,{contentType:"text/plain",withCredentials:!0}):Object(w.logError)("PBS request not made.  Check endpoints."))},g.a.on(v.EVENTS.BID_WON,mr),Object(T.default)(this,{callBids:e.callBids,setBidderCode:e.setBidderCode,type:tr})},"prebidServer");var yr={intentIqId:{source:"intentiq.com",atype:1},naveggId:{source:"navegg.com",atype:1},pubcid:{source:"pubcid.org",atype:1},tdid:{source:"adserver.org",atype:1,getUidExt:function(){return{rtiPartner:"TDID"}}},id5id:{getValue:function(e){return e.uid},source:"id5-sync.com",atype:1,getUidExt:function(e){if(e.ext)return e.ext}},parrableId:{source:"parrable.com",atype:1,getValue:function(e){return e.eid||(e.ccpaOptout?"":null)},getUidExt:function(e){e=Object(w.pick)(e,["ibaOptout","ccpaOptout"]);if(Object.keys(e).length)return e}},idl_env:{source:"liveramp.com",atype:3},lipb:{getValue:function(e){return e.lipbid},source:"liveintent.com",atype:3,getEidExt:function(e){if(Array.isArray(e.segments)&&e.segments.length)return{segments:e.segments}}},britepoolid:{source:"britepool.com",atype:3},dmdId:{source:"hcn.health",atype:3},lotamePanoramaId:{source:"crwdcntrl.net",atype:1},criteoId:{source:"criteo.com",atype:1},merkleId:{source:"merkleinc.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){return e&&e.keyID?{keyID:e.keyID}:void 0}},netId:{source:"netid.de",atype:1},IDP:{source:"zeotap.com",atype:1},haloId:{source:"audigent.com",atype:1},quantcastId:{source:"quantcast.com",atype:1},nextrollId:{source:"nextroll.com",atype:1},idx:{source:"idx.lat",atype:1},connectid:{source:"verizonmedia.com",atype:3},fabrickId:{source:"neustar.biz",atype:1},mwOpenLinkId:{source:"mediawallahscript.com",atype:1},tapadId:{source:"tapad.com",atype:1},novatiq:{getValue:function(e){return e.snowflake},source:"novatiq.com",atype:1},uid2:{source:"uidapi.com",atype:3,getValue:function(e){return e.id}},dapId:{source:"akamai.com",atype:1},deepintentId:{source:"deepintent.com",atype:3},admixerId:{source:"admixer.net",atype:3},adtelligentId:{source:"adtelligent.com",atype:3},amxId:{source:"amxrtb.com",atype:1},publinkId:{source:"epsilon.com",atype:3},kpuid:{source:"kpuid.com",atype:3},imuid:{source:"intimatemerger.com",atype:1},connectId:{source:"yahoo.com",atype:3}};function hr(e){var t,r,n=[];for(t in e)e.hasOwnProperty(t)&&("pubProvidedId"===t?n=n.concat(e.pubProvidedId):(r=function(e,t){if((t=yr[t])&&e){var r,n={},i=(n.source=t.source,Object(w.isFn)(t.getValue)?t.getValue(e):e);if(Object(w.isStr)(i))return i={id:i,atype:t.atype},Object(w.isFn)(t.getUidExt)&&(r=t.getUidExt(e))&&(i.ext=r),n.uids=[i],Object(w.isFn)(t.getEidExt)&&(r=t.getEidExt(e))&&(n.ext=r),n}return null}(e[t],t))&&n.push(r));return n}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b,jr,Ir,Ar,xr="_pbjs_userid_consent_data",Sr=30,s=Object(ct.a)("userid"),Er=[],Tr=!1,wr=[],_r=[],Cr=[];function kr(e,t){var r=e.config.storage,n="function"==typeof e.submodule.domainOverride?e.submodule.domainOverride():null;try{var i=Object(w.isPlainObject)(t)?JSON.stringify(t):t,a=new Date(Date.now()+864e5*r.expires).toUTCString();"cookie"===r.type?(s.setCookie(r.name,i,a,"Lax",n),"number"==typeof r.refreshInSeconds&&s.setCookie(r.name+"_last",(new Date).toUTCString(),a,"Lax",n)):"html5"===r.type&&(s.setDataInLocalStorage(r.name+"_exp",a),s.setDataInLocalStorage(r.name,encodeURIComponent(i)),"number"==typeof r.refreshInSeconds&&s.setDataInLocalStorage(r.name+"_last",(new Date).toUTCString()))}catch(e){Object(w.logError)(e)}}function Pr(e){var r,t=Object(w.getPrebidInternal)().setEidPermissions;"function"==typeof t&&Object(w.isArray)(e)&&t((r=[],e.filter(function(e){return Object(w.isPlainObject)(e.idObj)&&Object.keys(e.idObj).length}).forEach(function(t){Object.keys(t.idObj).forEach(function(e){Object(w.deepAccess)(t,"config.bidders")&&Array.isArray(t.config.bidders)&&Object(w.deepAccess)(yr,e+".source")&&r.push({source:yr[e].source,bidders:t.config.bidders})})}),r))}function Rr(e,t){var r,n,t=(t=void 0===t?void 0:t)?e.name+"_"+t:e.name;try{"cookie"===e.type?r=s.getCookie(t):"html5"===e.type&&(""===(n=s.getDataFromLocalStorage(e.name+"_exp"))?r=s.getDataFromLocalStorage(t):n&&0<new Date(n).getTime()-Date.now()&&(r=decodeURIComponent(s.getDataFromLocalStorage(t)))),"string"==typeof r&&"{"===r.trim().charAt(0)&&(r=JSON.parse(r))}catch(e){Object(w.logError)(e)}return r}function Dr(e){var t={consentString:"",gdprApplies:!1,apiVersion:0};return e&&(t.consentString=e.consentString,t.gdprApplies=e.gdprApplies,t.apiVersion=e.apiVersion),Object(w.cyrb53Hash)(JSON.stringify(t))}function Ur(e){try{var t=new Date(Date.now()+864e5*Sr).toUTCString();s.setCookie(xr,Dr(e),t,"Lax")}catch(e){Object(w.logError)(e)}}function Br(){try{return s.getCookie(xr)}catch(e){Object(w.logError)(e)}}function Nr(e){if(e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies){if(!e.consentString)return;if(1===e.apiVersion&&!1===Object(w.deepAccess)(e,"vendorData.purposeConsents.1"))return;if(2===e.apiVersion&&!1===Object(w.deepAccess)(e,"vendorData.purpose.consents.1"))return}return 1}function qr(e){if(void 0===e&&(e=window.location.hostname),!s.cookiesAreEnabled())return e;var t,r=e.split(".");if(2==r.length)return e;var n=-2,i="_rdc"+Date.now();do{var a=r.slice(n).join("."),o=new Date(Object(w.timestamp)()+1e4).toUTCString()}while(s.setCookie(i,"writeable",o,"Lax",a,void 0),"writeable"===s.getCookie(i,void 0)?(t=!1,s.setCookie(i,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,a,void 0)):(n+=-1,t=Math.abs(n)<=r.length),t);return a}function zr(e,t){var r=function(){};t&&(r=Object(w.delayExecution)(function(){clearTimeout(jr),t()},e.length)),e.forEach(function(t){t.callback(function(e){e?(t.config.storage&&kr(t,e),t.idObj=t.submodule.decode(e,t.config)):Object(w.logInfo)("User ID: "+t.submodule.name+" - request id responded with an empty value"),r()}),t.callback=void 0})}function Mr(e){return Array.isArray(e)&&e.length?e.filter(function(e){return Object(w.isPlainObject)(e.idObj)&&Object.keys(e.idObj).length}).reduce(function(t,r){return Object.keys(r.idObj).forEach(function(e){t[e]=r.idObj[e]}),t},{}):{}}function Fr(e,n){[e].some(function(e){return!Array.isArray(e)||!e.length})||e.forEach(function(e){e.bids&&Object(w.isArray)(e.bids)&&e.bids.forEach(function(e){r=n,t=e.bidder;var t,r=Array.isArray(r)&&r.length&&t?r.filter(function(e){return!e.config.bidders||!Object(w.isArray)(e.config.bidders)||E()(e.config.bidders,t)}).filter(function(e){return Object(w.isPlainObject)(e.idObj)&&Object.keys(e.idObj).length}).reduce(function(t,r){return Object.keys(r.idObj).forEach(function(e){t[e]=r.idObj[e]}),t},{}):{};Object.keys(r).length&&(e.userId=r,e.userIdAsEids=hr(r))})})}function Vr(e){var t,r,n,i=!1;void 0===b&&(b=function(e,r){var e=Lr(e,r),t=e.userIdModules;if(!e.hasValidated&&!Nr(r))return Object(w.logWarn)("User ID - gdpr permission not valid for local storage or cookies, exit module"),[];var n=Br();return Ur(r),t.reduce(function(e,t){return Hr(t,r,n,!1),e.push(t),e},[])}(wr,h.gdprDataHandler.getConsentData())).length&&(Pr(b),(t=b.filter(function(e){return Object(w.isFn)(e.callback)})).length&&(e&&0<Ar?(r=!(i=!0),n=function(){r||(r=!0,e())},Object(w.logInfo)("User ID - auction delayed by "+Ar+" at most to fetch ids"),jr=setTimeout(n,Ar),zr(t,n)):g.a.on(v.EVENTS.AUCTION_END,function e(){g.a.off(v.EVENTS.AUCTION_END,e),0<Ir?setTimeout(function(){zr(t)},Ir):zr(t)}))),e&&!i&&e()}function Wr(e,t){Vr(function(){Fr(t.adUnits||te().adUnits,b),e.call(this,t)})}var Gr,Lr=Object(r.b)("sync",function(e,t){return{userIdModules:e,hasValidated:t&&t.hasValidated}},"validateGdprEnforcement");function Hr(e,t,r,n){var i,a,o,s;e.config.storage?(a=Rr(e.config.storage),o=!1,"number"==typeof e.config.storage.refreshInSeconds&&(o=(s=new Date(Rr(e.config.storage,"last")))&&Date.now()-s.getTime()>1e3*e.config.storage.refreshInSeconds),!a||o||n||null==r||r!==Dr(t)?i=e.submodule.getId(e.config,t,a):"function"==typeof e.submodule.extendId&&(i=e.submodule.extendId(e.config,t,a)),Object(w.isPlainObject)(i)&&(i.id&&(kr(e,i.id),a=i.id),"function"==typeof i.callback&&(e.callback=i.callback)),a&&(e.idObj=e.submodule.decode(a,e.config))):e.config.value?e.idObj=e.config.value:(s=e.submodule.getId(e.config,t,void 0),Object(w.isPlainObject)(s)&&("function"==typeof s.callback&&(e.callback=s.callback),s.id&&(e.idObj=e.submodule.decode(s.id,e.config))))}function Kr(){e=_r,r=Er;var r,e,n=Array.isArray(e)?e.reduce(function(e,t){return t&&!Object(w.isEmptyStr)(t.name)&&(t.storage&&!Object(w.isEmptyStr)(t.storage.type)&&!Object(w.isEmptyStr)(t.storage.name)&&-1!==r.indexOf(t.storage.type)||Object(w.isPlainObject)(t.value)||!t.storage&&!t.value)&&e.push(t),e},[]):[];n.length&&(e=Cr.filter(function(t){return!C()(wr,function(e){return e.name===t.name})}),wr=e.map(function(t){var e=C()(n,function(e){return e.name&&(e.name.toLowerCase()===t.name.toLowerCase()||t.aliasName&&e.name.toLowerCase()===t.aliasName.toLowerCase())});return e&&t.name!==e.name&&(e.name=t.name),t.findRootDomain=qr,e?{submodule:t,config:e,callback:void 0,idObj:void 0}:null}).filter(function(e){return null!==e}),!Tr&&wr.length&&(te().requestBids.before(Wr,40),Object(w.logInfo)("User ID - usersync config updated for "+wr.length+" submodules: ",wr.map(function(e){return e.submodule.name})),Tr=!0))}Gr=_.b,wr=[],Tr=!(_r=[]),b=void 0,-1!==(Er=[s.localStorageIsEnabled()?"html5":null,s.cookiesAreEnabled()?"cookie":null].filter(function(e){return null!==e})).indexOf("cookie")&&s.getCookie("_pbjs_id_optout")?Object(w.logInfo)("User ID - opt-out cookie found, exit module"):-1!==Er.indexOf("html5")&&s.getDataFromLocalStorage("_pbjs_id_optout")?Object(w.logInfo)("User ID - opt-out localStorage found, exit module"):(Gr.getConfig(function(e){e=e.userSync;e&&e.userIds&&(_r=e.userIds,Ir=Object(w.isNumber)(e.syncDelay)?e.syncDelay:500,Ar=Object(w.isNumber)(e.auctionDelay)?e.auctionDelay:0,Kr())}),te().getUserIds=function(){return Vr(),Mr(b)},te().getUserIdsAsEids=function(){return Vr(),hr(Mr(b))},te().refreshUserIds=function(e,u){var p=(p=e?e.submoduleNames:null)||[];Vr(function(){var e=h.gdprDataHandler.getConsentData(),t=Lr(wr,e),r=t.userIdModules;if(t.hasValidated||Nr(e)){var n=Br();Ur(e);for(var i=[],a=function(e,t){var r,n;if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator])return(r=e[Symbol.iterator]()).next.bind(r);if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return Or(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Or(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(r);!(o=a()).done;){var o=o.value;if(!(0<p.length&&-1===p.indexOf(o.submodule.name))){Object(w.logInfo)("User ID - refreshing "+o.submodule.name),Hr(o,e,n,!0);{s=void 0;d=void 0;c=void 0;var s=o;for(var d=!1,c=0;c<b.length;c++)if(s.config.name.toLowerCase()===b[c].config.name.toLowerCase()){d=!0,b[c]=s;break}d||b.push(s)}b.length&&Pr(b),Object(w.isFn)(o.callback)&&i.push(o)}}0<i.length&&zr(i),u&&u()}else Object(w.logWarn)("User ID - gdpr permission not valid for local storage or cookies, exit module")})}),Object(r.c)("userId",function(t){C()(Cr,function(e){return e.name===t.name})||(Cr.push(t),Kr())});var Yr,Jr,Xr,Qr,$r={purpose1:{id:1,name:"storage"},purpose2:{id:2,name:"basicAds"},purpose7:{id:7,name:"measurement"}},Zr=[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:[]},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:[]}],en=[],tn=[],rn=[],nn=!1,an={getGvlidForBidAdapter:function(e){var t=null;return t=(e=e||_.b.getCurrentBidder())&&(e=h.default.getBidAdapter(e))&&e.getSpec?e.getSpec().gvlid:t},getGvlidForUserIdModule:function(e){return"object"==typeof e?e.gvlid:null},getGvlidForAnalyticsAdapter:function(e){return h.default.getAnalyticsAdapter(e)&&(h.default.getAnalyticsAdapter(e).gvlid||null)}};function on(e){var t=null;if(e){var r=_.b.getConfig("gvlMapping"),n="string"==typeof e?e:e.name;if(r&&r[n])return r[n];t=an.getGvlidForBidAdapter(n)||an.getGvlidForUserIdModule(e)||an.getGvlidForAnalyticsAdapter(n)}return t}function sn(t,e,r,n){var i=$r[Object.keys($r).filter(function(e){return $r[e].name===t.purpose})[0]].id;if(E()(t.vendorExceptions||[],r))return!0;r=Object(w.deepAccess)(e,"vendorData.purpose.consents."+i),n=Object(w.deepAccess)(e,"vendorData.vendor.consents."+n),e=Object(w.deepAccess)(e,"vendorData.purpose.legitimateInterests."+i),r=!1===t.enforcePurpose||!0===r,n=!1===t.enforceVendor||!0===n;return 2===i?r&&n||!0===e:r&&n}function dn(e,t,r,n){var i,a;n=Object(T.default)({},{hasEnforcementHook:!0}),Object(w.hasDeviceAccess)()?(a=h.gdprDataHandler.getConsentData())&&a.gdprApplies&&2===a.apiVersion?(t=(i=_.b.getCurrentBidder())&&i!=r&&h.default.aliasRegistry[i]===r?on(i):on(r)||t,sn(Yr,a,a=r||i,t)?n.valid=!0:(a&&Object(w.logWarn)("TCF2 denied device access for "+a),n.valid=!1,en.push(a))):n.valid=!0:(Object(w.logWarn)("Device access is disabled by Publisher"),n.valid=!1),e.call(this,t,r,n)}function cn(e){for(var t,r,n=h.gdprDataHandler.getConsentData(),i=arguments.length,a=new Array(1<i?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];n&&n.gdprApplies&&2===n.apiVersion?(r=on(t=_.b.getCurrentBidder()),sn(Yr,n,t,r)?e.call.apply(e,[this].concat(a)):(Object(w.logWarn)("User sync not allowed for "+t),en.push(t))):e.call.apply(e,[this].concat(a))}function un(e,t,n){var r;n&&n.gdprApplies&&2===n.apiVersion?(r=t.map(function(e){var t=on(e.submodule),r=e.submodule.name;if(sn(Yr,n,r,t))return e;Object(w.logWarn)("User denied permission to fetch user id for "+r+" User id module"),en.push(r)}).filter(function(e){return e}),e.call(this,r,Object(T.default)({},n,{hasValidated:!0}))):e.call(this,t,n)}function pn(e,t){for(var r=h.gdprDataHandler.getConsentData(),n=arguments.length,i=new Array(2<n?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];r&&r.gdprApplies&&2===r.apiVersion&&t.forEach(function(e){e.bids=e.bids.filter(function(e){var e=e.bidder,t=on(e);if(E()(tn,e))return!1;t=!!sn(Jr,r,e,t);return t||(Object(w.logWarn)("TCF2 blocked auction for "+e),tn.push(e)),t})}),e.call.apply(e,[this,t].concat(i))}function ln(e,t){var n=h.gdprDataHandler.getConsentData();n&&n.gdprApplies&&2===n.apiVersion&&(t=(t=Object(w.isArray)(t)?t:[t]).filter(function(e){var t=e.provider,r=on(t),r=!!sn(Xr,n,t,r);return r||(rn.push(t),Object(w.logWarn)("TCF2 blocked analytics adapter "+e.provider)),r})),e.call(this,t)}g.a.on(v.EVENTS.AUCTION_END,function(){function e(r){return r.filter(function(e,t){return null!==e&&r.indexOf(e)===t})}var t={storageBlocked:e(en),biddersBlocked:e(tn),analyticsBlocked:e(rn)};g.a.emit(v.EVENTS.TCF2_ENFORCEMENT,t)});function fn(e){return e.purpose===$r.purpose1.name}function bn(e){return e.purpose===$r.purpose2.name}function mn(e){return e.purpose===$r.purpose7.name}_.b.getConfig("consentManagement",function(e){e=e.consentManagement;e=Object(w.deepAccess)(e,"gdpr.rules"),Qr=e||(Object(w.logWarn)("TCF2: enforcing P1 and P2 by default"),Zr),Yr=C()(Qr,fn),Jr=C()(Qr,bn),Xr=C()(Qr,mn),Yr=Yr||Zr[0],Jr=Jr||Zr[1],Yr&&!nn&&(nn=!0,ct.d.before(dn,49),j.e.before(cn,48),Object(r.a)("validateGdprEnforcement").before(un,47)),Jr&&Object(r.a)("makeBidRequests").before(pn),Xr&&Object(r.a)("enableAnalyticsCb").before(ln)});function gn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];w.logInfo.apply(void 0,["UID2:  "].concat(t))}var vn,yn=Object(ct.b)(887,"uid2"),t={name:"uid2",gvlid:887,decode:function(e){if(e){var t={};if(e)return t.uid2={id:e},gn("Decoded value "+JSON.stringify(t)),t}},getId:function(e,t){gn("Creating UID 2.0");var r=(yn.cookiesAreEnabled()?yn.getCookie("__uid2_advertising_token"):null)||(yn.localStorageIsEnabled()?yn.getDataFromLocalStorage("__uid2_advertising_token"):null);return gn("The advertising token: "+r),{id:r}}},hn=(Object(r.d)("userId",t),te()),On={env:"vp",gdfp_req:1,output:"vast",unviewed_position_start:1},c={};function jn(e,t,r){if(!_.b.getConfig("cache.url"))if(Object(w.deepAccess)(t,r+".description_url"))Object(w.logError)("input cannnot contain description_url");else{t=e&&e.vastUrl;if(t)return encodeURIComponent(t)}}function In(e,t){var r=e&&e.adserverTargeting||{},n={},i=t&&t.adUnit,a=(i&&(n=(a=p.getAllTargeting(i.code))?a[i.code]:{}),Object(T.default)({},{hb_uuid:e&&e.videoCacheKey},{hb_cache_id:e&&e.videoCacheKey},n,r)),n=(g.a.emit(v.EVENTS.SET_TARGETING,((e={})[i.code]=a,e)),Object(w.deepAccess)(t,"params.cust_params")),r=Object(T.default)({},a,n);return encodeURIComponent(Object(w.formatQS)(r))}_.b.getConfig("brandCategoryTranslation.translationFile")&&Object(r.a)("registerAdserver").before(function(e){e.call(this,"dfp")}),vn={buildVideoUrl:function(e){if(e.params||e.url){var t=e.adUnit,r=e.bid||p.getWinningBids(t.code)[0],n={};if(e.url&&(n=Object(w.parseUrl)(e.url,{noDecodeWholeURL:!0}),Object(w.isEmpty)(e.params)))return o=e,(s=jn(a=r,i=n,"search"))&&(i.search.description_url=s),s=In(a,o),i.search.cust_params=i.search.cust_params?i.search.cust_params+"%26"+s:s,Object(w.buildUrl)(i);a={correlator:Date.now(),sz:Object(w.parseSizesInput)(Object(w.deepAccess)(t,"mediaTypes.video.playerSize")).join("|"),url:encodeURIComponent(location.href)},o=n.search,s=o&&o.sz,i=(s&&(a.sz=s+"|"+a.sz),In(r,e)),t=o.cust_params,t=(t&&(i=t+"%26"+i),Object(T.default)({},On,n.search,a,e.params,{cust_params:i})),r=jn(r,e,"params"),e=(r&&(t.description_url=r),h.gdprDataHandler.getConsentData()),r=(e&&("boolean"==typeof e.gdprApplies&&(t.gdpr=Number(e.gdprApplies)),e.consentString&&(t.gdpr_consent=e.consentString),e.addtlConsent&&(t.addtl_consent=e.addtlConsent)),h.uspDataHandler.getConsentData());return r&&(t.us_privacy=r),Object(w.buildUrl)(Object(T.default)({protocol:"https",host:"securepubads.g.doubleclick.net",pathname:"/gampad/ads"},n,{search:t}))}var i,a,o,s;Object(w.logError)("A params object or a url is required to use jwpb.adServers.dfp.buildVideoUrl")},buildAdpodVideoUrl:function(e){var n,t,e=void 0===e?{}:e,i=e.code,a=e.params,o=e.callback;a&&o?(n={correlator:Date.now(),sz:(t=i,e=m.getAdUnits().filter(function(e){return e.code===t}),e=Object(w.deepAccess)(e[0],"mediaTypes.video.playerSize"),Object(w.parseSizesInput)(e).join("|")),url:encodeURIComponent(location.href)},c.getTargeting({codes:[i],callback:function(e,t){var r;e?o(e,null):((e={})[c.TARGETING_KEY_PB_CAT_DUR]=void 0,e[c.TARGETING_KEY_CACHE_ID]=void 0,r={},t[i]&&(r=t[i].reduce(function(e,t){return Object.keys(t)[0]===c.TARGETING_KEY_PB_CAT_DUR?e[c.TARGETING_KEY_PB_CAT_DUR]=void 0!==e[c.TARGETING_KEY_PB_CAT_DUR]?e[c.TARGETING_KEY_PB_CAT_DUR]+","+t[c.TARGETING_KEY_PB_CAT_DUR]:t[c.TARGETING_KEY_PB_CAT_DUR]:Object.keys(t)[0]===c.TARGETING_KEY_CACHE_ID&&(e[c.TARGETING_KEY_CACHE_ID]=t[c.TARGETING_KEY_CACHE_ID]),e},e)),t=encodeURIComponent(Object(w.formatQS)(r)),e=Object(T.default)({},On,n,a,{cust_params:t}),(r=h.gdprDataHandler.getConsentData())&&("boolean"==typeof r.gdprApplies&&(e.gdpr=Number(r.gdprApplies)),r.consentString&&(e.gdpr_consent=r.consentString),r.addtlConsent&&(e.addtl_consent=r.addtlConsent)),(t=h.uspDataHandler.getConsentData())&&(e.us_privacy=t),r=Object(w.buildUrl)({protocol:"https",host:"securepubads.g.doubleclick.net",pathname:"/gampad/ads",search:e}),o(null,r))}})):Object(w.logError)("A params object and a callback is required to use pbjs.adServers.dfp.buildAdpodVideoUrl")},getAdpodTargeting:function(e){return c.getTargeting(e)}},hn.adServers=hn.adServers||{},hn.adServers.dfp=hn.adServers.dfp||{},Object.keys(vn).forEach(function(e){hn.adServers.dfp[e]?Object(w.logWarn)("Attempting to add an already registered function property "+e+" for AdServer dfp."):hn.adServers.dfp[e]=vn[e]}),Object(r.d)("adpod",c);function An(e){return"https://vpb-"+e+".jwplayer.com/"}var xn,Sn=["video/mp4","video/ogg","video/webm","video/aac","application/vnd.apple.mpegurl"],En=An("server"),Tn={adtelligent:"Adtelligent",appnexus:"AppNexus",districtm:"DistrictM",emx:"EMX",mediagrid:"MediaGrid",medianet:"MediaNet",indexexchange:"IndexExchange",onevideo:"OneVideo",openx:"OpenX",pubmatic:"PubMatic",rubicon:"Rubicon",smartadserver:"SmartAdServer",sonobi:"Sonobi",spotx:"SpotX",synacormedia:"SynacorMedia",unruly:"Unruly",videobyte:"VideoByte",yahoossp:"YahooSSP"},a=["Adtelligent","AppNexus","DistrictM","EMX","IndexExchange","MediaNet","MediaGrid","OneVideo","OpenX","PubMatic","Rubicon","SmartAdServer","Sonobi","SpotX","SynacorMedia","Unruly","VideoByte","YahooSSP"],wn=((t={})[["dfp"]]=a,t[["jwp"]]=a,t[["jwpdfp"]]=a,t[["jwpspotx"]]=["SpotX"],t),_n=["sonobi","smartadserver","videobyte","openx","unruly"],Cn=((a={})[["noBid"]]=0,a[["bid"]]=1,a[["timeout"]]=2,a[["invalid"]]=3,a[["abort"]]=4,a[["error"]]=5,a[["blocked"]]=6,a),kn=["",1,2],Pn={default:function(){return"ghb"+kn[xn++%kn.length]+".adtelligent.com"},navelix:function(){return"ghb.hb.navelix.com"},appaloosa:function(){return"ghb.hb.appaloosa.media"},onefiftytwomedia:function(){return"ghb.ads.152media.com"},mediafuse:function(){return"ghb.hbmp.mediafuse.com"},bidsxchange:function(){return"ghb.hbd.bidsxchange.com"},streamkey:function(){return"ghb.hb.streamkey.net"}},Rn={},t={code:"adtelligent",gvlid:410,aliases:["onefiftytwomedia","selectmedia","appaloosa","bidsxchange","streamkey",{code:"navelix",gvlid:380},{code:"mediafuse",skipPbsAliasing:!(xn=0)}],supportedMediaTypes:[x.d,x.b],isBidRequestValid:function(e){return!!Object(w.deepAccess)(e,"params.aid")},getUserSyncs:function(n,e){var i=[];function t(e){var t=e.cookieURLs,r=e.cookieURLSTypes||[];Array.isArray(t)&&t.forEach(function(e,t){t=r[t]||"image";!n.pixelEnabled&&"image"===t||!n.iframeEnabled&&"iframe"===t||Rn[e]||(Rn[e]=!0,i.push({type:t,url:e}))})}return(n.pixelEnabled||n.iframeEnabled)&&Object(w.isArray)(e)&&e.forEach(function(e){e.body&&(Object(w.isArray)(e.body)?e.body.forEach(function(e){t(e)}):t(e.body))}),i},buildRequests:function(e,t){var r=_.b.getConfig(t.bidderCode),r=Object(w.deepAccess)(r,"chunkSize",10),e=function(e,t){var r={Domain:Object(w.deepAccess)(t,"refererInfo.referer")};!0===_.b.getConfig("coppa")&&(r.Coppa=1),Object(w.deepAccess)(t,"gdprConsent.gdprApplies")&&(r.GDPR=1,r.GDPRConsent=Object(w.deepAccess)(t,"gdprConsent.consentString")),Object(w.deepAccess)(t,"uspConsent")&&(r.USP=Object(w.deepAccess)(t,"uspConsent")),Object(w.deepAccess)(e[0],"schain")&&(r.Schain=Object(w.deepAccess)(e[0],"schain")),Object(w.deepAccess)(e[0],"userId")&&(r.UserIds=Object(w.deepAccess)(e[0],"userId")),Object(w.deepAccess)(e[0],"userIdAsEids")&&(r.UserEids=Object(w.deepAccess)(e[0],"userIdAsEids")),window.adtDmp&&window.adtDmp.ready&&(r.DMPId=window.adtDmp.getUID());for(var n,i,a=[],o=0,s=e.length;o<s;o++){n=e[o],i=d=void 0,d=Object(w.deepAccess)(n,"mediaTypes.video")?x.d:"display",i=d===x.d?Object(w.deepAccess)(n,"mediaTypes.video.playerSize"):Object(w.deepAccess)(n,"mediaTypes.banner.sizes"),(i={CallbackId:n.bidId,Aid:n.params.aid,AdType:d,Sizes:Object(w.parseSizesInput)(i).join(",")}).PlacementId=n.adUnitCode,n.params.iframe&&(i.AdmType="iframe"),n.params.vpb_placement_id&&(i.PlacementId=n.params.vpb_placement_id),d===x.d&&Object(w.deepAccess)(n,"mediaTypes.video.context")===x.a&&(i.Adpod=Object(w.deepAccess)(n,"mediaTypes.video"));var d=i;a.push(d)}return{tag:r,bids:a}}(e,t),n=e.tag,e=e.bids,e=Object(w.chunk)(e,r);return Object(w._map)(e,function(e){return{data:Object(T.default)({},n,{BidRequests:e}),adapterRequest:t,method:"POST",url:(e=t.bidderCode.split("_")[0],"https://"+(Pn[e]||Pn.default)()+"/v2/auction/")}})},interpretResponse:function(e,t){var r=t.adapterRequest,n=(e=e.body,[]);return Object(w.isArray)(e)?(e.forEach(function(e){n=Object(w.flatten)(n,Dn(e,r))}),n):Dn(e,r)},transformBidParams:function(e){return Object(w.convertTypes)({aid:"number"},e)}};function Dn(e,o){var t=!e||!Object(w.isArray)(e.bids),s=[];return t||e.bids.forEach(function(t){var e,r,n,i,a=C()(o.bids,function(e){return e.bidId===t.requestId});0!==t.cpm&&void 0!==a&&(e=t,r=a=a,r=Object(w.deepAccess)(r,"mediaTypes.video")?x.d:x.b,n=Object(w.deepAccess)(a,"mediaTypes.video.context"),i={requestId:e.requestId,creativeId:e.cmpId,height:e.height,currency:e.cur,width:e.width,cpm:e.cpm,netRevenue:!0,mediaType:r,ttl:300,meta:{advertiserDomains:e.adomain||[]}},r=r===x.b?Object(T.default)(i,{ad:e.ad,adUrl:e.adUrl}):(n===x.a&&Object(T.default)(i,{meta:{primaryCatId:e.primaryCatId},video:{context:x.a,durationSeconds:e.durationSeconds}}),Object(T.default)(i,{vastUrl:e.vastUrl}),"outstream"===n&&Object(T.default)(i,{adResponse:e,renderer:function(e,t){e=k.install({id:e,url:"https://player.adtelligent.com/outstream-unit/2.01/outstream.min.js",config:t.outstream||{},loaded:!1});return e.setRender(Un),e}(e.requestId,a.params)}),i),s.push(r))}),s}function Un(t){t.renderer.push(function(){var e=Object(T.default)({},t.renderer.getConfig(),{width:t.width,height:t.height,vastUrl:t.vastUrl,elId:t.adUnitCode});window.VOutstreamAPI.initOutstreams([e])})}Object(j.d)(t);var Bn=t.code;function Nn(e,t){return{bidder:Bn,params:{aid:parseInt(t.id)}}}function qn(e){return!!e&&void 0!==e.id}var zn=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],Mn=["minduration","maxduration","skip","skipafter","playbackmethod","api"],Fn=["age","externalUid","segments","gender","dnt","language"],Vn=["geo","device_id"],Wn=["enabled","dongle","member_id","debug_timeout"],Gn={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5}},Ln={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},Hn=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,Kn=Object(ct.b)(32,"appnexus"),a={code:"appnexus",gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"brealtime"},{code:"emxdigital",gvlid:183},{code:"pagescience"},{code:"defymedia"},{code:"gourmetads"},{code:"matomy"},{code:"featureforward"},{code:"oftmedia"},{code:"districtm",gvlid:144},{code:"adasta"},{code:"beintoo",gvlid:618},{code:"targetVideo"}],supportedMediaTypes:[x.b,x.d,x.c],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.member&&e.params.invCode)},buildRequests:function(e,t){var p=e.map($n),n=C()(e,ei),i={};!0===_.b.getConfig("coppa")&&(i={coppa:!0}),n&&Object.keys(n.params.user).filter(function(e){return E()(Fn,e)}).forEach(function(e){var t,r=Object(w.convertCamelToUnderscore)(e);"segments"===e&&Object(w.isArray)(n.params.user[e])?(t=[],n.params.user[e].forEach(function(e){Object(w.isNumber)(e)?t.push({id:e}):Object(w.isPlainObject)(e)&&t.push(e)}),i[r]=t):"segments"!==e&&(i[r]=n.params.user[e])});var r,a=C()(e,ri);a&&a.params&&a.params.app&&(r={},Object.keys(a.params.app).filter(function(e){return E()(Vn,e)}).forEach(function(e){return r[e]=a.params.app[e]}));var o=C()(e,ni),s=(o&&o.params&&a.params.app&&a.params.app.id&&(u={appid:o.params.app.id}),{}),d={},c=Kn.getCookie("apn_prebid_debug")||null;if(c)try{s=JSON.parse(c)}catch(e){Object(w.logError)("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{c=C()(e,ii);c&&c.debug&&(s=c.debug)}s&&s.enabled&&Object.keys(s).filter(function(e){return E()(Wn,e)}).forEach(function(e){d[e]=s[e]});var u,l,f,b,m,g,c=C()(e,ti),c=c?parseInt(c.params.member,10):0,v=e[0].schain,y=C()(e,oi),h={tags:[].concat(p),user:i,sdk:{source:"pbjs",version:"5.20.2"},schain:v};return y&&(h.iab_support={omidpn:"Appnexus",omidpv:"5.20.2"}),0<c&&(h.member_id=c),a&&(h.device=r),o&&(h.app=u),_.b.getConfig("adpod.brandCategoryExclusion")&&(h.brand_category_uniqueness=!0),d.enabled&&(h.debug=d,Object(w.logInfo)("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(d,null,4))),t&&t.gdprConsent&&(h.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))&&(y=(v=t.gdprConsent.addtlConsent).substring(v.indexOf("~")+1),h.gdpr_consent.addtl_consent=y.split(".").map(function(e){return parseInt(e,10)})),t&&t.uspConsent&&(h.us_privacy=t.uspConsent),t&&t.refererInfo&&(c={rd_ref:encodeURIComponent(t.refererInfo.referer),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map(function(e){return encodeURIComponent(e)}).join(",")},h.referrer_detection=c),C()(e,ai)&&e.filter(ai).forEach(function(t){c=p,i=(r=t).mediaTypes.video,a=i.durationRangeSec,i=i.requireExactDuration,u=r.mediaTypes.video,e=u.adPodDurationSec,d=u.durationRangeSec,u=u.requireExactDuration,o=Object(w.getMinValueFromArray)(d),e=Math.floor(e/o),o=u?Math.max(e,d.length):e,s=Object(w.getMaxValueFromArray)(a),u=c.filter(function(e){return e.uuid===r.bidId}),d=w.fill.apply(void 0,u.concat([o])),i?(e=Math.ceil(o/a.length),n=Object(w.chunk)(d,e),a.forEach(function(t,e){n[e].map(function(e){si(e,"minduration",t),si(e,"maxduration",t)})})):d.map(function(e){return si(e,"maxduration",s)});var r,e,n,i,a,o,s,d,c=d,u=h.tags.filter(function(e){return e.uuid!==t.bidId});h.tags=[].concat(u,c)}),e[0].userId&&(ci(o=[],Object(w.deepAccess)(e[0],"userId.flocId.id"),"chrome.com",null),ci(o,Object(w.deepAccess)(e[0],"userId.criteoId"),"criteo.com",null),ci(o,Object(w.deepAccess)(e[0],"userId.netId"),"netid.de",null),ci(o,Object(w.deepAccess)(e[0],"userId.idl_env"),"liveramp.com",null),ci(o,Object(w.deepAccess)(e[0],"userId.tdid"),"adserver.org","TDID"),ci(o,Object(w.deepAccess)(e[0],"userId.uid2.id"),"uidapi.com","UID2"),o.length&&(h.eids=o)),p[0].publisher_id&&(h.publisher_id=p[0].publisher_id),u=h,b=[],m={withCredentials:!0},g="https://ib.adnxs.com/ut/v3/prebid",Qn(l=t)||(g="https://ib.adnxs-simple.com/ut/v3/prebid"),"TRUE"!==Object(w.getParameterByName)("apn_test").toUpperCase()&&!0!==_.b.getConfig("apn_test")||(m.customHeaders={"X-Is-Test":1}),15<u.tags.length?(f=Object(w.deepClone)(u),Object(w.chunk)(u.tags,15).forEach(function(e){f.tags=e;e=JSON.stringify(f);b.push({method:"POST",url:g,data:e,bidderRequest:l,options:m})})):(u=JSON.stringify(u),b={method:"POST",url:g,data:u,bidderRequest:l,options:m}),b},interpretResponse:function(e,t){var r=this,n=t.bidderRequest,i=(e=e.body,[]);return!e||e.error?(t="in response for "+n.bidderCode+" adapter",e&&e.error&&(t+=": "+e.error),Object(w.logError)(t)):(e.tags&&e.tags.forEach(function(e){var t=(t=e)&&t.ads&&t.ads.length&&C()(t.ads,function(e){return e.rtb});t&&0!==t.cpm&&E()(r.supportedMediaTypes,t.ad_type)&&((e=function(t,r,e){var n=Object(w.getBidRequest)(t.uuid,[e]),i={requestId:t.uuid,cpm:r.cpm,creativeId:r.creative_id,dealId:r.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:n.adUnitCode,appnexus:{buyerMemberId:r.buyer_member_id,dealPriority:r.deal_priority,dealCode:r.deal_code}};if(r.adomain&&(i.meta=Object(T.default)({},i.meta,{advertiserDomains:[]})),r.advertiser_id&&(i.meta=Object(T.default)({},i.meta,{advertiserId:r.advertiser_id})),r.brand_id&&(i.meta=Object(T.default)({},i.meta,{brandId:r.brand_id})),r.rtb.video)switch(Object(T.default)(i,{width:r.rtb.video.player_width,height:r.rtb.video.player_height,vastImpUrl:r.notify_url,ttl:3600}),Object(w.deepAccess)(n,"mediaTypes.video.context")){case x.a:var a=Object(j.a)(n.bidder,r.brand_category_id),a=(i.meta=Object(T.default)({},i.meta,{primaryCatId:a}),r.deal_priority);i.video={context:x.a,durationSeconds:Math.floor(r.rtb.video.duration_ms/1e3),dealTier:a},i.vastUrl=r.rtb.video.asset_url;break;case ce.b:i.adResponse=t,i.adResponse.ad=i.adResponse.ads[0],i.adResponse.ad.video=i.adResponse.ad.rtb.video,i.vastXml=r.rtb.video.content,r.renderer_url&&(a=C()(e.bids,function(e){return e.bidId===t.uuid}),a=Object(w.deepAccess)(a,"renderer.options"),i.renderer=function(e,t){t=k.install({id:r.renderer_id,url:r.renderer_url,config:t=void 0===t?{}:t,loaded:!1,adUnitCode:e});try{t.setRender(di)}catch(e){Object(w.logWarn)("Prebid Error calling setRender on renderer",e)}return t.setEventHandlers({impression:function(){return Object(w.logMessage)("AppNexus outstream video impression event")},loaded:function(){return Object(w.logMessage)("AppNexus outstream video loaded event")},ended:function(){Object(w.logMessage)("AppNexus outstream renderer video event"),document.querySelector("#"+e).style.display="none"}}),t}(i.adUnitCode,a));break;case ce.a:i.vastUrl=r.notify_url+"&redir="+encodeURIComponent(r.rtb.video.asset_url)}else if(r.rtb[x.c]){var o=r.rtb[x.c],s=r.viewability.config.replace("src=","data-src="),d=o.javascript_trackers;null==d?d=s:Object(w.isStr)(d)?d=[d,s]:d.push(s),i[x.c]={title:o.title,body:o.desc,body2:o.desc2,cta:o.ctatext,rating:o.rating,sponsoredBy:o.sponsored,privacyLink:o.privacy_link,address:o.address,downloads:o.downloads,likes:o.likes,phone:o.phone,price:o.price,salePrice:o.saleprice,clickUrl:o.link.url,displayUrl:o.displayurl,clickTrackers:o.link.click_trackers,impressionTrackers:o.impression_trackers,javascriptTrackers:d},o.main_img&&(i.native.image={url:o.main_img.url,height:o.main_img.height,width:o.main_img.width}),o.icon&&(i.native.icon={url:o.icon.url,height:o.icon.height,width:o.icon.width})}else{Object(T.default)(i,{width:r.rtb.banner.width,height:r.rtb.banner.height,ad:r.rtb.banner.content});try{if(r.rtb.trackers)for(var c=0;c<r.rtb.trackers[0].impression_urls.length;c++){var u=r.rtb.trackers[0].impression_urls[c],p=Object(w.createTrackPixelHtml)(u);i.ad+=p}}catch(t){Object(w.logError)("Error appending tracking pixel",t)}}return i}(e,t,n)).mediaType=(t=t.ad_type)===x.d?x.d:t===x.c?x.c:x.b,i.push(e))}),e.debug&&e.debug.debug_info&&(t=(t="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info).replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),Object(w.logMessage)("https://console.appnexus.com/docs/understanding-the-debug-auction"),Object(w.logMessage)(t))),i},getMappingFileInfo:function(){return{url:"https://acdn.adnxs-simple.com/prebid/appnexus-mapping/mappings.json",refreshInDays:2}},getUserSyncs:function(e,t,r){if(e.iframeEnabled&&Qn({gdprConsent:r}))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:function(r,e){return r=Object(w.convertTypes)({member:"string",invCode:"string",placementId:"number",keywords:w.transformBidderParamKeywords,publisherId:"number"},r),e&&(r.use_pmt_rule="boolean"==typeof r.usePaymentRule&&r.usePaymentRule,r.usePaymentRule&&delete r.usePaymentRule,Yn(r.keywords)&&r.keywords.forEach(Jn),Object.keys(r).forEach(function(e){var t=Object(w.convertCamelToUnderscore)(e);t!==e&&(r[t]=r[e],delete r[e])})),r},onBidWon:function(e){if(e.native){var t,r,n=e,e=function(e){var t;if(Object(w.isStr)(e)&&Xn(e))t=e;else if(Object(w.isArray)(e))for(var r=0;r<e.length;r++){var n=e[r];Xn(n)&&(t=n)}return t}(n.native.javascriptTrackers);if(e)for(var i="pbjs_adid="+n.adId+";pbjs_auc="+n.adUnitCode,a=(t=(e=e).indexOf('src="')+5,r=e.indexOf('"',t),e.substring(t,r)),o=a.replace("dom_id=%native_dom_id%",i),s=document.getElementsByTagName("iframe"),d=!1,c=0;c<s.length&&!d;c++){var u=s[c];try{var p=u.contentDocument||u.contentWindow.document;if(p)for(var l=p.getElementsByTagName("script"),f=0;f<l.length&&!d;f++){var b=l[f];b.getAttribute("data-src")==a&&(b.setAttribute("src",o),b.setAttribute("data-src",""),b.removeAttribute&&b.removeAttribute("data-src"),d=!0)}}catch(n){if(!(n instanceof DOMException&&"SecurityError"===n.name))throw n}}}}};function Yn(e){return Object(w.isArray)(e)&&0<e.length}function Jn(e){Yn(e.value)&&""===e.value[0]&&delete e.value}function Xn(e){var t=e.match(Hn),t=null!=t&&1<=t.length,r=e.match("trk.js"),r=null!=r&&1<=r.length;return e.startsWith("<script")&&r&&t}function Qn(e){var t=!0;return t=e&&e.gdprConsent&&e.gdprConsent.gdprApplies&&2===e.gdprConsent.apiVersion?!(!0!==Object(w.deepAccess)(e.gdprConsent,"vendorData.purpose.consents.1")):t}function $n(r){var n={},e=(n.sizes=Zn(r.sizes),n.primary_size=n.sizes[0],n.ad_types=[],n.uuid=r.bidId,r.params.placementId?n.id=parseInt(r.params.placementId,10):n.code=r.params.invCode,n.allow_smaller_sizes=r.params.allowSmallerSizes||!1,n.use_pmt_rule=r.params.usePaymentRule||!1,n.prebid=!0,n.disable_psa=!0,function(e){if(!Object(w.isFn)(e.getFloor))return e.params.reserve||null;e=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return Object(w.isPlainObject)(e)&&!isNaN(e.floor)&&"USD"===e.currency?e.floor:null}(r));e&&(n.reserve=e),r.params.position&&(n.position={above:1,below:2}[r.params.position]||0),r.params.trafficSourceCode&&(n.traffic_source_code=r.params.trafficSourceCode),r.params.privateSizes&&(n.private_sizes=Zn(r.params.privateSizes)),r.params.supplyType&&(n.supply_type=r.params.supplyType),r.params.pubClick&&(n.pubclick=r.params.pubClick),r.params.extInvCode&&(n.ext_inv_code=r.params.extInvCode),r.params.publisherId&&(n.publisher_id=parseInt(r.params.publisherId,10)),r.params.externalImpId&&(n.external_imp_id=r.params.externalImpId),Object(w.isEmpty)(r.params.keywords)||(0<(e=Object(w.transformBidderParamKeywords)(r.params.keywords)).length&&e.forEach(Jn),n.keywords=e);var i,a,e=Object(w.deepAccess)(r,"ortb2Imp.ext.data.pbadslot"),o=(e&&(n.gpid=e),(r.mediaType===x.c||Object(w.deepAccess)(r,"mediaTypes."+x.c))&&(n.ad_types.push(x.c),0===n.sizes.length&&(n.sizes=Zn([1,1])),r.nativeParams)&&(i=r.nativeParams,a={},Object.keys(i).forEach(function(e){var t=Ln[e]&&Ln[e].serverName||Ln[e]||e,r=Ln[e]&&Ln[e].requiredParams;a[t]=Object(T.default)({},r,i[e]),t!==Ln.image.serverName&&t!==Ln.icon.serverName||!a[t].sizes||(r=a[t].sizes,(Object(w.isArrayOfNums)(r)||Object(w.isArray)(r)&&0<r.length&&r.every(function(e){return Object(w.isArrayOfNums)(e)}))&&(a[t].sizes=Zn(a[t].sizes))),t===Ln.privacyLink&&(a.privacy_supported=!0)}),e=a,n[x.c]={layouts:[e]}),Object(w.deepAccess)(r,"mediaTypes."+x.d)),e=Object(w.deepAccess)(r,"mediaTypes.video.context"),e=(n.hb_source=o&&"adpod"===e?7:1,r.mediaType!==x.d&&!o||n.ad_types.push(x.d),(r.mediaType===x.d||o&&"outstream"!==e)&&(n.require_asset_url=!0),r.params.video&&(n.video={},Object.keys(r.params.video).filter(function(e){return E()(zn,e)}).forEach(function(e){switch(e){case"context":case"playback_method":var t=r.params.video[e],t=Object(w.isArray)(t)?t[0]:t;n.video[e]=Gn[e][t];break;case"frameworks":break;default:n.video[e]=r.params.video[e]}}),r.params.video.frameworks&&Object(w.isArray)(r.params.video.frameworks)&&(n.video_frameworks=r.params.video.frameworks)),o&&(n.video=n.video||{},Object.keys(o).filter(function(e){return E()(Mn,e)}).forEach(function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof n.video[e]&&(n.video[e]=o[e]);break;case"skip":"boolean"!=typeof n.video.skippable&&(n.video.skippable=1===o[e]);break;case"skipafter":"number"!=typeof n.video.skipoffset&&(n.video.skippoffset=o[e]);break;case"playbackmethod":"number"!=typeof n.video.playback_method&&(t=o[e],1<=(t=Object(w.isArray)(t)?t[0]:t)&&t<=4&&(n.video.playback_method=t));break;case"api":var t;!n.video_frameworks&&Object(w.isArray)(o[e])&&(t=o[e].map(function(e){e=4===e?5:5===e?4:e;if(1<=e&&e<=5)return e}).filter(function(e){return e}),n.video_frameworks=t)}})),r.renderer&&(n.video=Object(T.default)({},n.video,{custom_renderer_present:!0})),r.params.frameworks&&Object(w.isArray)(r.params.frameworks)&&(n.banner_frameworks=r.params.frameworks),C()(m.getAdUnits(),function(e){return r.transactionId===e.transactionId}));return e&&e.mediaTypes&&e.mediaTypes.banner&&n.ad_types.push(x.b),0===n.ad_types.length&&delete n.ad_types,n}function Zn(e){var t=[],r={};if(Object(w.isArray)(e)&&2===e.length&&!Object(w.isArray)(e[0]))r.width=parseInt(e[0],10),r.height=parseInt(e[1],10),t.push(r);else if("object"==typeof e)for(var n=0;n<e.length;n++){var i=e[n];(r={}).width=parseInt(i[0],10),r.height=parseInt(i[1],10),t.push(r)}return t}function ei(e){return!!e.params.user}function ti(e){return!!parseInt(e.params.member,10)}function ri(e){if(e.params)return!!e.params.app}function ni(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function ii(e){return!!e.debug}function ai(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===x.a}function oi(e){var t=!1,r=e.params,n=e.params.video;return t=!(t=r.frameworks&&Object(w.isArray)(r.frameworks)?E()(e.params.frameworks,6):t)&&n&&n.frameworks&&Object(w.isArray)(n.frameworks)?E()(e.params.video.frameworks,6):t}function si(e,t,r){Object(w.isEmpty)(e.video)&&(e.video={}),e.video[t]=r}function di(e){var t=e.adUnitCode,r=((t=document.getElementById(t).querySelectorAll("div[id^='google_ads']"))[0]&&t[0].style.setProperty("display","none"),e.adUnitCode);try{var n=document.getElementById(r).querySelectorAll("script[id^='sas_script']");n[0].nextSibling&&"iframe"===n[0].nextSibling.localName&&n[0].nextSibling.style.setProperty("display","none")}catch(r){}e.renderer.push(function(){window.ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},function(e,t,r){e.renderer.handleVideoEvent({id:t,eventName:r})}.bind(null,e))})}function ci(e,t,r,n){t&&(n?e.push({source:r,id:t,rti_partner:n}):e.push({source:r,id:t}))}Object(j.d)(a);var ui=a.code;function pi(e,t,r,n){var i=e.settings,e=e.params,a={placementId:parseInt(t.id),member:""+t.member,invCode:""+t.invCode,publisherId:parseInt(t.publisherId),allowSmallerSizes:!0},i=i.floorPriceCents,i=(void 0!==i&&(a.reserve=i/100),t.optionalParams);return i&&Object(T.default)(a,i),a.video={id:r.id,context:(t=n.placement,i=Zo(e.offset),3===t?"outstream":0===i?"pre_roll":-2===i?"post_roll":"mid_roll")},{bidder:ui,params:a}}function li(e){return!!e&&(void 0!==e.id||void 0!==e.member&&void 0!==e.invCode)}var fi="https://dmx.districtm.io/b/v1",t={code:"districtmDMX",gvlid:144,aliases:["dmx"],supportedFormat:[x.b,x.d],supportedMediaTypes:[x.d,x.b],isBidRequestValid:function(e){return!!e.params.memberid},interpretResponse:function(e,o){return(e=e.body||{}).seatbid&&Object(w.isArray)(e.seatbid)?e.seatbid.reduce(function(e,t){t=t.bid.reduce(function(e,t){var r,n,i,a;return e.price<t.price?(n=t.impid,i=(r=o.bidderRequest.bids.filter(function(e){return e.bidId===n})[0]).sizes,(a={}).width=mi(i)[0],a.height=mi(i)[1],i=a.width,a=a.height,t.cpm=parseFloat(t.price).toFixed(2),t.bidId=t.impid,t.requestId=t.impid,t.width=t.w||i,t.height=t.h||a,t.ttl=300,t.mediaType=r.mediaTypes&&r.mediaTypes.video?"video":"banner","video"===t.mediaType&&(t.vastXml=function(e,t){try{var r,n=/<img\s[^>]*?src\s*=\s*['\"]([^'\"]*?)['\"][^>]*?>/,i=e.match(n),a=i[0],o=i[1];return e=e.replace(n,""),a&&o&&(r="<Impression><![CDATA["+o+"]]></Impression>",e=e.replace("</Impression>","</Impression>"+r)),e}catch(n){return t?e.replace("</Impression>","</Impression>"+("<Impression><![CDATA["+t+"]]></Impression>")):e}}(t.adm,t.nurl),t.ttl=3600),t.dealid&&(t.dealId=t.dealid),t.uuid=t.bidId,t.ad=t.adm,t.netRevenue=!0,t.creativeId=t.crid,t.currency="USD",t.meta=t.meta||{},t.adomain&&0<t.adomain.length&&(t.meta.advertiserDomains=t.adomain),t):(e.cpm=e.price,e)},{price:0});return t.adm&&e.push(t),e},[]).filter(function(e){return!!e.bidId}):[]},buildRequests:function(e,t){var r,n=_.b.getConfig("bidderTimeout"),n={id:Object(w.generateUUID)(),cur:["USD"],tmax:n-300,test:this.test()||0,site:{publisher:{id:String(e[0].params.memberid)||null}}};try{var i=_.b.getConfig("dmx"),a=(n.user=i.user||{},i.site||{});n.site=Object(T.default)({},n.site,a)}catch(e){}i=[];e[0]&&e[0].userId&&(I(i,Object(w.deepAccess)(e[0],"userId.idl_env"),"liveramp.com",1),I(i,Object(w.deepAccess)(e[0],"userId.id5id.uid"),"id5-sync.com",1),I(i,Object(w.deepAccess)(e[0],"userId.pubcid"),"pubcid.org",1),I(i,Object(w.deepAccess)(e[0],"userId.tdid"),"adserver.org",1),I(i,Object(w.deepAccess)(e[0],"userId.criteoId"),"criteo.com",1),I(i,Object(w.deepAccess)(e[0],"userId.britepoolid"),"britepool.com",1),I(i,Object(w.deepAccess)(e[0],"userId.lipb.lipbid"),"liveintent.com",1),I(i,Object(w.deepAccess)(e[0],"userId.intentiqid"),"intentiq.com",1),I(i,Object(w.deepAccess)(e[0],"userId.lotamePanoramaId"),"lotame.com",1),I(i,Object(w.deepAccess)(e[0],"userId.parrableId"),"parrable.com",1),I(i,Object(w.deepAccess)(e[0],"userId.netId"),"netid.de",1),n.user=n.user||{},n.user.ext=n.user.ext||{},n.user.ext.eids=i),n.test||delete n.test,t.gdprConsent&&(n.regs={},n.regs.ext={},n.regs.ext.gdpr=!0===t.gdprConsent.gdprApplies?1:0,!0===t.gdprConsent.gdprApplies&&(n.user={},n.user.ext={},n.user.ext.consent=t.gdprConsent.consentString)),n.regs=n.regs||{},n.regs.coppa=!0===_.b.getConfig("coppa")?1:0,t&&t.uspConsent&&(n.regs=n.regs||{},n.regs.ext=n.regs.ext||{},n.regs.ext.us_privacy=t.uspConsent);try{r=e[0].schain,n.source={},n.source.ext={},n.source.ext.schain=r||{}}catch(e){}a=e.map(function(e){var t,r,n,i={};return i.id=e.bidId,i.tagid=String(e.params.dmxid||e.adUnitCode),i.secure=1,i.bidfloor=(n=null)!==(n="function"!=typeof(t=e).getFloor||"object"!=typeof(r=t.getFloor({currency:"USD",mediaType:t.mediaTypes.video?"video":"banner",size:t.sizes.map(function(e){return{w:e[0],h:e[1]}})}))||"USD"!==r.currency||isNaN(parseFloat(r.floor))?n:parseFloat(r.floor))?n:t.params.floor,e.mediaTypes&&e.mediaTypes.video?i.video={topframe:1,skip:e.mediaTypes.video.skip||0,linearity:e.mediaTypes.video.linearity||1,minduration:e.mediaTypes.video.minduration||5,maxduration:e.mediaTypes.video.maxduration||60,playbackmethod:e.mediaTypes.video.playbackmethod||[2],api:function(e){e=e.api;return e&&Array.isArray(e)&&0<e.length?e:[2]}(e.mediaTypes.video),mimes:e.mediaTypes.video.mimes||["video/mp4"],protocols:function(e){e=e.protocols;return e&&Array.isArray(e)&&0<e.length?e:[2,3,5,6,7,8]}(e.mediaTypes.video),h:e.mediaTypes.video.playerSize[0][1],w:e.mediaTypes.video.playerSize[0][0]}:i.banner={topframe:1,w:bi(e.sizes,"w"),h:bi(e.sizes,"h"),format:bi(e.sizes).map(function(e){return{w:e[0],h:e[1]}}).filter(function(e){return"number"==typeof e.w&&"number"==typeof e.h})},i});if(a.length<=5)return n.imp=a,{method:"POST",url:fi,data:JSON.stringify(n),bidderRequest:t};for(var o=a,s=n,d=t,c=[];0!==o.length;)5<=o.length?c.push(o.splice(0,5)):c.push(o.splice(0,o.length));return c.map(function(e){return s.imp=e,{method:"POST",url:"https://dmx.districtm.io/b/v1",data:JSON.stringify(s),bidderRequest:d}})},test:function(){return-1!==window.location.href.indexOf("dmTest=true")?1:0},getUserSyncs:function(e,t,r,n){var i=[],a="https://cdn.districtm.io/ids/index.html";if(r&&r.gdprApplies&&"string"==typeof r.consentString&&i.push(["gdpr",r.consentString]),n&&i.push(["ccpa",n]),0<i.length&&(a+="?"+i.map(function(e){return e.join("=")}).join("&")),e.iframeEnabled)return[{type:"iframe",url:a}]}};function bi(e,t){r=[{size:[300,250],s:100},{size:[728,90],s:95},{size:[320,50],s:90},{size:[160,600],s:88},{size:[300,600],s:85},{size:[300,50],s:80},{size:[970,250],s:75},{size:[970,90],s:60}],n=(e=e).filter(function(e){return-1===r.map(function(e){return e.size[0]+"x"+e.size[1]}).indexOf(e[0]+"x"+e[1])}),e=e.reduce(function(t,e){return 0===t.length?(t.push(e),t):(t.push(e),(t=(t=r.filter(function(e){return-1!==t.map(function(e){return e[0]+"x"+e[1]}).indexOf(e.size[0]+"x"+e.size[1])})).sort(function(e,t){return t.s-e.s})).map(function(e){return e.size}))},[]);var r,n,i,a=(i=[].concat(e,n)).filter(function(e,t){return i.map(function(e){return e[0]+"x"+e[1]}).indexOf(e[0]+"x"+e[1])===t});switch(t){case"w":return a[0][0]||0;case"h":return a[0][1]||0;default:return a}}function mi(e){return Array.isArray(e)&&Array.isArray(e[0])?e[0]:e}function I(e,t,r,n){Object(w.isStr)(t)&&Array.isArray(e)&&e.push({source:r,uids:[{id:t,atype:n}]})}Object(j.d)(t);var gi=t.code;function vi(e,t){t={dmxid:parseInt(t.id),memberid:parseInt(t.pubid)},e=e.settings.floorPriceCents;return void 0!==e&&(t.floor=e/100),{bidder:gi,params:t}}function yi(e){return!!(e=void 0===e?{}:e)&&void 0!==e.id&&void 0!==e.pubid}var hi="https://js.brealtime.com/outstream/1.30.0/bundle.js",Oi=[{key:"idl_env",source:"liveramp.com",rtiPartner:"idl",queryParam:"idl"},{key:"uid2.id",source:"uidapi.com",rtiPartner:"UID2",queryParam:"uid2"}],A={validateSizes:function(e){return Object(w.isArray)(e)&&void 0!==e[0]?e.every(function(e){return Object(w.isArray)(e)&&2===e.length}):(Object(w.logWarn)("emx_digital: Sizes should be an array"),!1)},checkVideoContext:function(e){return e&&e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context&&("instream"===e.mediaTypes.video.context||"outstream"===e.mediaTypes.video.context)},buildBanner:function(e){var t=[],t=(e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes?e.mediaTypes.banner:e).sizes;return A.validateSizes(t)||(Object(w.logWarn)("emx_digital: could not detect mediaType banner sizes. Assigning to bid sizes instead"),t=e.sizes),{format:t.map(function(e){return{w:e[0],h:e[1]}}),w:t[0][0],h:t[0][1]}},formatVideoResponse:function(t,e,r){return t.vastXml=e.adm,r.bidderRequest&&r.bidderRequest.bids&&0<r.bidderRequest.bids.length&&C()(r.bidderRequest.bids,function(e){return t.requestId&&e.bidId&&t.requestId===e.bidId&&e.mediaTypes&&e.mediaTypes.video&&"outstream"===e.mediaTypes.video.context})&&(t.renderer=A.createRenderer(t,{id:e.id,url:hi})),t},isMobile:function(){return/(ios|ipod|ipad|iphone|android)/i.test(navigator.userAgent)},isConnectedTV:function(){return/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\.tv|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b)/i.test(navigator.userAgent)},getDevice:function(){return{ua:navigator.userAgent,js:1,dnt:"yes"===navigator.doNotTrack||"1"===navigator.doNotTrack||"1"===navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,devicetype:A.isMobile()?1:A.isConnectedTV()?3:2,language:navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage}},cleanProtocols:function(e){return e.protocols&&E()(e.protocols,7)&&(Object(w.logWarn)("emx_digital: VAST 4.0 is currently not supported. This protocol has been filtered out of the request."),e.protocols=e.protocols.filter(function(e){return 7!==e})),e},outstreamRender:function(t){t.renderer.push(function(){var e=t&&t.params&&t.params[0]&&t.params[0].video?t.params[0].video:{};window.emxVideoQueue=window.emxVideoQueue||[],window.queueEmxVideo({id:t.adUnitCode,adsResponses:t.vastXml,options:e}),window.emxVideoReady&&window.videojs&&window.emxVideoReady()})},createRenderer:function(e,t){t=k.install({id:t.id,url:hi,loaded:!1});try{t.setRender(A.outstreamRender)}catch(e){Object(w.logWarn)("Prebid Error calling setRender on renderer",e)}return t},buildVideo:function(e){var t=Object(T.default)(e.mediaTypes.video,e.params.video);return Object(w.isArray)(e.mediaTypes.video.playerSize[0])?(t.w=e.mediaTypes.video.playerSize[0][0],t.h=e.mediaTypes.video.playerSize[0][1]):(t.w=e.mediaTypes.video.playerSize[0],t.h=e.mediaTypes.video.playerSize[1]),A.cleanProtocols(t)},parseResponse:function(e){try{return decodeURIComponent(e.replace(/%(?![0-9][0-9a-fA-F]+)/g,"%25"))}catch(e){Object(w.logError)("emx_digitalBidAdapter","error",e)}},getReferrer:function(){try{return window.top.document.referrer}catch(e){return document.referrer}},getSite:function(e){return{domain:Object(w.parseUrl)(e.referer).hostname,page:e.referer,ref:A.getReferrer()}},getGdpr:function(e,t){return e.gdprConsent&&(t.regs={ext:{gdpr:!0===e.gdprConsent.gdprApplies?1:0}}),e.gdprConsent&&e.gdprConsent.gdprApplies&&(t.user={ext:{consent:e.gdprConsent.consentString}}),t},getSupplyChain:function(e,t){return e.bids[0]&&e.bids[0].schain&&(t.source={ext:{schain:e.bids[0].schain}}),t},getEids:function(e){return Oi.map(A.getUserId(e)).filter(function(e){return e})},getUserId:function(n){return function(e){var t=e.key,r=e.source,e=e.rtiPartner,t=Object(w.deepAccess)(n,"userId."+t);return t?A.formatEid(t,r,e):null}},formatEid:function(e,t,r){return{source:t,uids:[{id:e,ext:{rtiPartner:r}}]}}},a={code:"emx_digital",gvlid:183,supportedMediaTypes:[x.b,x.d],isBidRequestValid:function(e){if(!e||!e.params)return Object(w.logWarn)("emx_digital: Missing bid or bid params."),!1;if("emx_digital"!==e.bidder)return Object(w.logWarn)('emx_digital: Must use "emx_digital" as bidder code.'),!1;if(!e.params.tagid||!Object(w.isStr)(e.params.tagid))return Object(w.logWarn)("emx_digital: Missing tagid param or tagid present and not type String."),!1;var t;if(e.mediaTypes&&e.mediaTypes.banner){if(t=e.mediaTypes.banner.sizes||e.sizes,!A.validateSizes(t))return Object(w.logWarn)("emx_digital: Missing sizes in bid"),!1}else if(e.mediaTypes&&e.mediaTypes.video){if(!A.checkVideoContext(e))return Object(w.logWarn)("emx_digital: Missing video context: instream or outstream"),!1;if(!e.mediaTypes.video.playerSize)return Object(w.logWarn)("emx_digital: Missing video playerSize"),!1}return!0},buildRequests:function(e,t){var i=[],r="https://hb.emxdgt.com?t="+(t.timeout||"")+"&ts="+Date.now()+"&src=pbjs",a=-1<location.protocol.indexOf("https")?1:0,n=A.getDevice(),o=A.getSite(t.refererInfo),e=(Object(w._each)(e,function(e){var t=Object(w.getBidIdParameter)("tagid",e.params),r=parseFloat(function(e){if(!Object(w.isFn)(e.getFloor))return parseFloat(Object(w.getBidIdParameter)("bidfloor",e.params));e=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return Object(w.isPlainObject)(e)&&!isNaN(e.floor)&&"USD"===e.currency?e.floor:null}(e))||0,n=!!e.mediaTypes.video,t={id:e.bidId,tid:e.transactionId,tagid:t,secure:a},n=n?{video:A.buildVideo(e)}:{banner:A.buildBanner(e)},e=0<r?{bidfloor:r,bidfloorcur:"USD"}:{},r=Object(T.default)(t,n,e);i.push(r)}),{id:t.auctionId,imp:i,device:n,site:o,cur:"USD",version:"1.5.1"}),e=A.getGdpr(t,Object(T.default)({},e));return e=A.getSupplyChain(t,Object(T.default)({},e)),t&&t.uspConsent&&(e.us_privacy=t.uspConsent),t.userId&&0<(n=A.getEids(t)).length&&(e.user&&e.user.ext?e.user.ext.eids=n:e.user={ext:{eids:n}}),{method:"POST",url:r,data:JSON.stringify(e),options:{withCredentials:!0},bidderRequest:t}},interpretResponse:function(e,n){var i=[],e=e.body||{};return e.seatbid&&0<e.seatbid.length&&e.seatbid[0].bid&&e.seatbid.forEach(function(e){e=e.bid[0];var t=!1,r=A.parseResponse(e.adm)||"",r={requestId:e.id,cpm:e.price,width:e.w,height:e.h,creativeId:e.crid||e.id,dealId:e.dealid||null,currency:"USD",netRevenue:!0,ttl:e.ttl,ad:r};e.adm&&-1<e.adm.indexOf("<?xml version=")&&(t=!0,r=A.formatVideoResponse(r,Object(T.default)({},e),n)),r.mediaType=t?x.d:x.b,e.adomain&&e.adomain.length&&(r.meta={advertiserDomains:e.adomain}),i.push(r)}),i},getUserSyncs:function(e,t,r,n){var i=[];return e.iframeEnabled&&(e="https://biddr.brealtime.com/check.html",r&&"string"==typeof r.consentString&&("boolean"==typeof r.gdprApplies?e+="?gdpr="+Number(r.gdprApplies)+"&gdpr_consent="+r.consentString:e+="?gdpr_consent="+r.consentString),i.push({type:"iframe",url:e})),i}},ji=(Object(j.d)(a),a.code);function Ii(e,t,r,n){var t={tagid:""+t.id,content:r},r={mimes:n.mimes,minduration:n.minduration,maxduration:n.maxduration,protocols:n.protocols,startdelay:n.startdelay,placement:n.placement,linearity:n.linearity,playbackmethod:n.playbackmethod,api:n.api},i=e.settings.floorPriceCents,i=(void 0!==i&&(t.bidfloor=i/100),n.skip),i=(void 0!==i&&(r.skip=i,i=n.skipmin,n=n.skipafter,void 0!==i&&(r.skipmin=i),void 0!==n&&(r.skipafter=n)),e.params.jwpseg);return Array.isArray(i)&&i.length&&(r.ext={custom:{jwpseg:i}}),t.video=r,{bidder:ji,params:t}}function Ai(e){return void 0!==(e=void 0===e?{}:e).id}d.bidderSettings[ji]={sendStandardTargeting:!1,adserverTargeting:[{key:"vpb_emx_bid",val:function(e){return $o(d.getConfig("priceGranularity"),e)}},{key:"vpb_emx_key",val:function(e){return e.videoCacheKey}}]};var xi=e(55),Si=!1,Ei=["mimes","protocols","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype"],t={code:"gridNM",supportedMediaTypes:[x.d],isBidRequestValid:function(e){var t=!(e.params.source&&Object(w.isStr)(e.params.source)&&e.params.secid&&Object(w.isStr)(e.params.secid)&&e.params.pubid&&Object(w.isStr)(e.params.pubid)),r=Object(w.deepAccess)(e,"mediaTypes.video")||{},e=Object(w.deepAccess)(e,"params.video")||{},n=e.protocols,n=void 0===n?r.protocols:n,e=e.mimes,r=void 0===e?r.mimes:e;return!(t=(t=(t=t||(!n||!r))||(!Object(w.isArray)(r)||!r.length||r.filter(function(e){return!(e&&Object(w.isStr)(e))}).length))?t:!Object(w.isArray)(n)||!n.length||n.filter(function(e){return!(Object(w.isNumber)(e)&&0<e&&!(e%1))}).length)},buildRequests:function(e,t){var e=e||[],O=[],t=t||{},j=t.bidderRequestId,I=t.auctionId,A=t.gdprConsent,x=t.uspConsent,S=t.timeout,t=t.refererInfo,E=t?encodeURIComponent(t.referer):"";return e.forEach(function(e){var t,r,n=e.schain,i=e.userIdAsEids,a=(j=j||e.bidderRequestId,I=I||e.auctionId,e.params),o=a.floorcpm,s=a.pubdata,d=a.source,c=a.secid,u=a.pubid,p=a.content,a=a.video,l=e.mediaTypes,f=e.bidId,b=e.adUnitCode,m=e.rtd,g=e.ortb2Imp,v=e.sizes,y=(h=l||{},y=e,o=Object(w.isNumber)(o)&&o,h=h.video?"video":"banner",o="function"!=typeof y.getFloor||"object"!=typeof(h=y.getFloor({currency:"USD",mediaType:h,size:y.sizes.map(function(e){return{w:e[0],h:e[1]}})}))||"USD"!==h.currency||isNaN(parseFloat(h.floor))?o:Math.max(o,parseFloat(h.floor))),h=m&&m.jwplayer&&m.jwplayer.targeting,o=s&&s.jwpseg||h&&h.segments,m=p||h&&h.content,s={id:f.toString(),tagid:c.toString(),video:function(e,t,r){var n=e.mind,i=e.maxd,a=e.size,o=Object(xi.a)(e,["mind","maxd","size"]);void 0===r&&(r={}),Ei.forEach(function(e){!(e in o)&&e in r&&(o[e]=r[e])}),a&&Object(w.isStr)(a)&&2===(e=a.split("x")).length&&parseInt(e[0])&&parseInt(e[1])&&(o.w=parseInt(e[0]),o.h=parseInt(e[1]));o.w&&o.h||(a=r.playerSize&&2===r.playerSize.length?r.playerSize:t)&&(e=a[0])&&Object(T.default)(o,Object(w.parseGPTSingleSizeArrayToRtbSize)(e));t=r.durationRangeSec||[],a=n||t[0]||r.minduration,e=i||t[1]||r.maxduration;return a&&(o.minduration=a),e&&(o.maxduration=e),o}(a,v,l&&l.video),ext:{divid:b.toString()}},p=(g&&g.ext&&g.ext.data&&(s.ext.data=g.ext.data,s.ext.data.adserver&&s.ext.data.adserver.adslot?s.ext.gpid=s.ext.data.adserver.adslot.toString():s.ext.gpid=g.ext.data.pbadslot&&g.ext.data.pbadslot.toString()),y&&(s.bidfloor=y),[s]),h={tid:I&&I.toString(),ext:{wrapper:"Prebid_js",wrapper_version:"5.20.2"}},f=(n&&(h.ext.schain=n),_.b.getConfig("bidderTimeout")||S),c=S?Math.min(f,S):f,a={id:j&&j.toString(),site:{page:E,publisher:{id:u}},source:h,tmax:c,imp:p};m&&(a.site.content=m),o&&o.length&&(t={data:[{name:"iow_labs_pub_data",segment:o.map(function(e){return{name:"jwpseg",value:e}})}]}),A&&A.consentString&&(r={consent:A.consentString}),i&&i.length&&((r=r||{}).eids=[].concat(i)),r&&Object.keys(r).length&&((t=t||{}).ext=r),t&&(a.user=t),A&&A.gdprApplies&&(a.regs={ext:{gdpr:A.gdprApplies?1:0}}),x&&(a.regs||(a.regs={ext:{}}),a.regs.ext.us_privacy=x),!0===_.b.getConfig("coppa")&&(a.regs||(a.regs={}),a.regs.coppa=1),O.push({method:"POST",url:"https://grid.bidswitch.net/hbjson?no_mapping=1&sp="+d,bid:e,data:a})}),O},interpretResponse:function(e,t){var r,n,i=[];return(e=e&&e.body)?e.seatbid&&!e.seatbid.length&&(r="Response has empty seatbid array"):r="Response is empty",!r&&e.seatbid&&((e=e.seatbid[0])?e.bid?e.bid[0]||Object(w.logError)("Array of bid objects is empty"):Object(w.logError)("Seatbid from response has no array of bid objects - "+JSON.stringify(e)):Object(w.logError)("Seatbid array from response has empty item"),(e=e&&e.bid&&e.bid[0])&&(e.adm||e.nurl?e.price?"video"!==e.content_type&&(r="Bid from response has wrong content_type parameter - "+e.content_type):r="Bid from response has no price parameter - "+JSON.stringify(e):r="Bid from response has no adm parameter - "+JSON.stringify(e),!r)&&(n={requestId:(t=t.bid).bidId,cpm:e.price,width:e.w,height:e.h,creativeId:e.auid||t.bidderRequestId,currency:"USD",netRevenue:!0,ttl:360,dealId:e.dealid,mediaType:x.d,meta:{advertiserDomains:e.adomain||[]}},e.adm?(n.vastXml=e.adm,n.adResponse={content:n.vastXml}):e.nurl&&(n.vastUrl=e.nurl),t.renderer||t.mediaTypes&&t.mediaTypes.video&&"outstream"!==t.mediaTypes.video.context||(n.renderer=function(e){e=k.install({id:e.id,url:e.url,loaded:!1});try{e.setRender(Ti)}catch(e){Object(w.logWarn)("Prebid Error calling setRender on renderer",e)}return e}({id:t.bidId,url:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js"})),i.push(n))),r&&Object(w.logError)(r),i},getUserSyncs:function(e,t,r,n){if(!Si&&e.pixelEnabled)return e="",r&&"string"==typeof r.consentString&&("boolean"==typeof r.gdprApplies?e+="&gdpr="+Number(r.gdprApplies)+"&gdpr_consent="+r.consentString:e+="&gdpr_consent="+r.consentString),n&&(e+="&us_privacy="+n),Si=!0,{type:"image",url:"https://x.bidswitch.net/sync?ssp=themediagrid"+e}}};function Ti(e){e.renderer.push(function(){window.ANOutstreamVideo.renderAd({targetId:e.adUnitCode,adResponse:e.adResponse})})}Object(j.d)(t);var wi=t.code;function _i(e,t,r,n){var i=e.params,e=e.settings,t={source:"jwp",secid:""+t.id,pubid:""+t.pubid,content:r},r=n.playerSize,r={mimes:n.mimes,mind:n.minduration,maxd:n.maxduration,protocols:n.protocols,startdelay:n.startdelay,placement:n.placement,linearity:n.linearity,playbackmethod:n.playbackmethod,api:n.api,size:r[0]+"x"+r[1]},e=e.floorPriceCents,e=(void 0!==e&&(t.floorcpm=e/100),n.skip),e=(void 0!==e&&(r.skip=e,e=n.skipmin,n=n.skipafter,void 0!==e&&(r.skipmin=e),void 0!==n&&(r.skipafter=n)),i.jwpseg);return Array.isArray(e)&&e.length&&(t.pubdata={jwpseg:e}),t.video=r,{bidder:wi,params:t}}function Ci(e){return void 0!==(e=void 0===e?{}:e).pubid}function ki(e,t){var r,n;if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator])return(r=e[Symbol.iterator]()).next.bind(r);if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return Pi(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Pi(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}d.bidderSettings[wi]={sendStandardTargeting:!1,adserverTargeting:[{key:"vpb_mediagrid_bid",val:function(e){return $o(d.getConfig("priceGranularity"),e)}},{key:"vpb_mediagrid_key",val:function(e){return e.videoCacheKey}}]};var Ri=[x.b,x.d],Di={JPY:1},Ui="p",Bi="x",Ni={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},qi={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID"},zi=["britepoolid","id5id","lipbid","haloId","criteoId","lotamePanoramaId","merkleId","parrableId","connectid","tapadId","quantcastId","pubcid","TDID","flocId"],Mi=["mimes","minduration","maxduration"],Fi=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h"];function Vi(e){var t={},e=(t.id=e.bidId,t.ext={},t.ext.siteID=e.params.siteId,!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||(t.ext.sid=String(e.params.id)),Object(w.deepAccess)(e,"ortb2Imp.ext.data.adserver.adslot"));return e&&(t.ext.dfp_ad_unit_code=e),t}function Wi(e,t,r){var n=null,i=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(n={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),Object(w.isFn)(e.getFloor)){var a="*",o="*";r&&Object(w.contains)(Ri,r)&&(o=[(r=t[a=r]).w,r.h]);try{i=e.getFloor({mediaType:a,size:o})}catch(e){Object(w.logWarn)("priceFloors module call getFloor failed, error : ",e)}}i?(t.bidfloor=i.floor,t.bidfloorcur=i.currency,t.ext.fl=Ui):n&&(t.bidfloor=n.floor,t.bidfloorcur=n.currency,t.ext.fl=Bi)}function Gi(e){return Array.isArray(e)&&2===e.length&&Object(w.isInteger)(e[0])&&Object(w.isInteger)(e[1])}function Li(e,t){if(void 0===t&&(t=[]),Gi(e=void 0===e?[]:e))return e[0]===t[0]&&e[1]===t[1];for(var r=0;r<e.length;r++)if(e[r][0]===t[0]&&e[r][1]===t[1])return 1}function Hi(e,t){var r=[];e||Object(w.logWarn)("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");for(var n=ki(Mi);!(i=n()).done;){var i=i.value,a=e&&e.hasOwnProperty(i),o=t&&t.hasOwnProperty(i);a||o||r.push("IX Bid Adapter: "+i+" is not included in either the adunit or params level")}var s=e&&e.hasOwnProperty("protocol"),d=e&&e.hasOwnProperty("protocols"),c=t&&t.hasOwnProperty("protocol"),u=t&&t.hasOwnProperty("protocols");return s||d||c||u||r.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),r}function Ki(e){return Gi(e=void 0===e?[]:e)?e:!!Gi(e[0])&&e[0]}function Yi(f,e,b,t){var m="https://htlb.casalemedia.com/cygnus",r=function(e,t){var r=[],n={};if(Object(w.isArray)(e))for(var i=ki(e);!(a=i()).done;){var a=a.value;qi[a.source]&&Object(w.deepAccess)(a,"uids.0")&&(n[a.source]=!0,a.uids[0].ext={rtiPartner:qi[a.source]},delete a.uids[0].atype,r.push(a))}return t&&t.id&&t.version&&(e={source:"chrome.com",uids:[{id:t.id,ext:{rtiPartner:"flocId",ver:t.version}}]},r.push(e),n["chrome.com"]=!0),{toSend:r,seenSources:n}}(Object(w.deepAccess)(f,"0.userIdAsEids"),Object(w.deepAccess)(f,"0.userId.flocId")),n=r.toSend;if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo){var i=window.headertag.getIdentityInfo();if(i&&"object"==typeof i)for(var a in i)!i.hasOwnProperty(a)||!(a=i[a]).responsePending&&a.data&&"object"==typeof a.data&&Object.keys(a.data).length&&!r.seenSources[a.data.source]&&n.push(a.data)}if(e&&"roundel"===e.bidderCode&&!r.seenSources["liveramp.com"])return[];var o,g={},s=(g.id=f[0].bidderRequestId.toString(),g.site={},g.ext={},g.ext.source="prebid",g.ext.ixdiag={},g.ext.ixdiag.msd=0,g.ext.ixdiag.msi=0,g.imp=[],g.at=1,function(r){for(var n,e,t,i=r.map(function(e){return e.transactionId}).filter(function(e,t,r){return r.indexOf(e)===t}),a={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"5.20.2",userIds:(e=r[0],t=e.userId||{},zi.filter(function(e){return t[e]}))},o=0;o<i.length;o++)!function(t){var e;n=r.filter(function(e){return e.transactionId===i[t]})[0],Object(w.deepAccess)(n,"mediaTypes")&&(1<Object.keys(n.mediaTypes).length&&a.mfu++,Object(w.deepAccess)(n,"mediaTypes.native")&&a.nu++,Object(w.deepAccess)(n,"mediaTypes.banner")&&a.bu++,"outstream"===Object(w.deepAccess)(n,"mediaTypes.video.context")&&(a.ou++,e="object"==typeof(Object(w.deepAccess)(n,"renderer")||Object(w.deepAccess)(n,"mediaTypes.video.renderer")),a.ren=a.ren&&e?Object(w.deepAccess)(a,"ren"):e),"instream"===Object(w.deepAccess)(n,"mediaTypes.video.context")&&a.iu++,a.allu++)}(o);return a}(f));for(o in s)g.ext.ixdiag[o]=s[o];f[0].schain&&(g.source={ext:{schain:f[0].schain}}),0<n.length&&(g.user={},g.user.eids=n),document.referrer&&""!==document.referrer&&(g.site.ref=document.referrer),e&&(e.gdprConsent&&((d=e.gdprConsent).hasOwnProperty("gdprApplies")&&(g.regs={ext:{gdpr:d.gdprApplies?1:0}}),d.hasOwnProperty("consentString")&&(g.user=g.user||{},g.user.ext={consent:d.consentString||""},d.hasOwnProperty("addtlConsent")&&d.addtlConsent&&(g.user.ext.consented_providers_settings={consented_providers:d.addtlConsent}))),e.uspConsent&&Object(w.deepSetValue)(g,"regs.ext.us_privacy",e.uspConsent),e.refererInfo&&(g.site.page=e.refererInfo.referer)),_.b.getConfig("coppa")&&Object(w.deepSetValue)(g,"regs.coppa",1);var v={},d=(v.s=f[0].params.siteId,v.v=t,v.ac="j",v.sd=1,8.1===t&&(v.nf=1),e&&e.bidderCode||"ix"),t=_.b.getConfig(d),y=[],h=0,O=Object.keys(b),j=(m+Object(w.parseQueryStringParameters)(Object(T.default)({},v,{r:JSON.stringify(g)}))).length;if(8e3<j)return Object(w.logError)("ix bidder: Base request size has exceeded maximum request size."),y;var I=j,A=!1;if(t){if("object"==typeof t.firstPartyData){var c,u=t.firstPartyData,p="?";for(c in u)u.hasOwnProperty(c)&&(p+=encodeURIComponent(c)+"="+encodeURIComponent(u[c])+"&");p=p.slice(0,-1),(e=encodeURIComponent(p).length)<8e3?("page"in g.site?g.site.page+=p:g.site.page=p,I+=e):Object(w.logError)("ix bidder: IX config FPD request size has exceeded maximum request size.")}"number"==typeof t.timeout&&(v.t=t.timeout),"boolean"==typeof t.detectMissingSizes?g.ext.ixdiag.dms=t.detectMissingSizes:g.ext.ixdiag.dms=!0}for(var l=0;l<O.length&&"break"!==function(e){if(8e3<=I||4<=y.length)return"break";for(var t=b[O[e]],r=t.missingCount,r=void 0===r?0:r,n=t.missingImps,n=void 0===n?[]:n,t=t.ixImps,i=!1,a=8e3-I,o={ixImps:void 0===t?[]:t,missingBannerImpressions:n},s=Object.keys(o).map(function(e){return o[e]}).filter(function(e){return Array.isArray(e)}).reduce(function(e,t){return e.concat.apply(e,t)},[]),d=encodeURIComponent(JSON.stringify({impressionObjects:s})).length;s.length&&a<d;)i=!0,s.pop(),d=encodeURIComponent(JSON.stringify({impressionObjects:s})).length;s.length&&x.b in s[0]?(p=(t=s[0]).id,l=t.banner.topframe,t=t.ext,p={id:p,banner:{topframe:l,format:s.map(function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}})}},t.dfp_ad_unit_code&&(p.ext={dfp_ad_unit_code:t.dfp_ad_unit_code}),"bidfloor"in s[0]&&(p.bidfloor=s[0].bidfloor),"bidfloorcur"in s[0]&&(p.bidfloorcur=s[0].bidfloorcur),g.imp.push(p),g.ext.ixdiag.msd+=r,g.ext.ixdiag.msi+=n.length):(l=g.imp).push.apply(l,s),I+=d;var c,u,p,l,t=_.b.getConfig("ortb2")||{},n=(Object(w.isEmpty)(t)||A||(g.ext.ixdiag.fpd=!0,c=Object(T.default)({},t.site||t.context),Object.keys(c).forEach(function(e){-1===Ni.SITE.indexOf(e)&&delete c[e]}),u=Object(T.default)({},t.user),Object.keys(u).forEach(function(e){-1===Ni.USER.indexOf(e)&&delete u[e]}),(p=Object(w.deepClone)(g)).site=Object(w.mergeDeep)({},p.site,c),p.user=Object(w.mergeDeep)({},p.user,u),(m+Object(w.parseQueryStringParameters)(Object(T.default)({},v,{r:JSON.stringify(p)}))).length<8e3?(g.site=Object(w.mergeDeep)({},g.site,c),g.user=Object(w.mergeDeep)({},g.user,u),A=!0,r=encodeURIComponent(JSON.stringify(Object(T.default)({},c,u))).length,I+=r):Object(w.logError)("ix bidder: FPD request size has exceeded maximum request size.")),e===O.length-1);(i||n)&&(l=Object(w.deepClone)(v),n&&!h||(g.ext.ixdiag.sn=h,l.sn=h),h++,l.r=JSON.stringify(g),y.push({method:"GET",url:m,data:l,validBidRequests:f}),I=j,g.imp=[],g.ext.ixdiag.msd=0,g.ext.ixdiag.msi=0,A=!1)}(l);l++);return y}function Ji(e,t){if(t)for(var r=0;r<e.length;r++){var n=e[r];if(t[0]===n[0]&&t[1]===n[1]){e.splice(r,1);break}}}function Xi(e,t){var r=function(e){var t,r=Vi(e),n=Object(w.deepAccess)(e,"mediaTypes.video"),i=Object(w.deepAccess)(e,"params.video");if(Hi(n,i).length)return{};for(t in r.video=i?Object(w.deepClone)(e.params.video):{},n)-1===Fi.indexOf(t)||r.video.hasOwnProperty(t)||(r.video[t]=n[t]);if(r.video.minduration>r.video.maxduration)return Object(w.logError)("IX Bid Adapter: video minduration ["+r.video.minduration+"] cannot be greater than video maxduration ["+r.video.maxduration+"]"),{};i=i&&i.context||n&&n.context;if(i&&!r.video.hasOwnProperty("placement")&&(i===ce.a?r.video.placement=1:i===ce.b?r.video.placement=4:Object(w.logWarn)("IX Bid Adapter: Video context '"+i+"' is not supported")),!r.video.w||!r.video.h){i=Ki(Object(w.deepAccess)(r,"video.playerSize"))||Ki(Object(w.deepAccess)(e,"params.size"));if(!i)return Object(w.logWarn)("IX Bid Adapter: Video size is missing in [mediaTypes.video] missing"),{};r.video.w=i[0],r.video.h=i[1],Object(w.deepAccess)(r,"ext.sid")||(r.ext.sid=Object(w.parseGPTSingleSizeArray)(i))}return Wi(e,r,x.d),r}(e);0!=Object.keys(r).length&&(t[e.transactionId]={},t[e.transactionId].ixImps=[],t[e.transactionId].ixImps.push(r))}function Qi(e,t,r){var n,i,a,o=Object(T.default)({},{detectMissingSizes:!0},_.b.getConfig("ix")),s=((i=Vi(n=e)).banner={},(s=Object(w.deepAccess)(n,"params.size"))&&(i.banner.w=s[0],i.banner.h=s[1],Object(w.deepAccess)(i,"ext.sid")||(i.ext.sid=Object(w.parseGPTSingleSizeArray)(s))),i.banner.topframe=Object(w.inIframe)()?0:1,Wi(n,i,x.b),i);Li(Object(w.deepAccess)(e,"mediaTypes.banner.sizes"),Object(w.deepAccess)(e,"params.size"))&&(r.hasOwnProperty(e.transactionId)||(r[e.transactionId]={}),r[e.transactionId].hasOwnProperty("ixImps")||(r[e.transactionId].ixImps=[]),r[e.transactionId].ixImps.push(s)),o.hasOwnProperty("detectMissingSizes")&&o.detectMissingSizes&&(n=t,i=s,o=(r=e).transactionId,n.hasOwnProperty(o)?(a=[],Ji(a=n[o].hasOwnProperty("missingSizes")?n[o].missingSizes:a,r.params.size),n[o].missingSizes=a):Object(w.deepAccess)(r,"mediaTypes.banner.sizes")&&(Ji(a=Object(w.deepClone)(r.mediaTypes.banner.sizes),r.params.size),n[o]={missingSizes:a,impression:i}))}function $i(t){t.renderer.push(function(){var e={width:t.width,height:t.height,timeout:3e3};window.IXOutstreamPlayer(t.vastUrl,t.adUnitCode,e)})}var a={code:"ix",gvlid:10,aliases:[{code:"roundel",gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:Ri,isBidRequestValid:function(e){var t=Object(w.deepAccess)(e,"params.video"),r=Object(w.deepAccess)(e,"params.size"),n=Object(w.deepAccess)(e,"mediaTypes.banner.sizes"),i=Object(w.deepAccess)(e,"mediaTypes.video"),a=Object(w.deepAccess)(e,"mediaTypes.video.playerSize"),o=e.params.hasOwnProperty("bidFloor"),s=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!Object(w.contains)(Ri,e.mediaType))return!1;if(Object(w.deepAccess)(e,"mediaTypes.banner")&&!n)return!1;if(r){r=Ki(r);if(!r)return Object(w.logError)("ix bidder params: size has invalid format."),!1;if(!Li(e.sizes,r)&&!Li(a,r)&&!Li(n,r))return Object(w.logError)("ix bidder params: bid size is not included in ad unit sizes or player size."),!1}if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return Object(w.logError)("ix bidder params: siteId must be string or number value."),!1;if((o||s)&&!(o&&s&&(a=e.params.bidFloor,n=e.params.bidFloorCur,Boolean("number"==typeof a&&"string"==typeof n&&n.match(/^[A-Z]{3}$/)))))return Object(w.logError)("ix bidder params: bidFloor / bidFloorCur parameter has invalid format."),!1;if(i&&t){r=Hi(i,t);if(r.length)return r.forEach(function(e){Object(w.logError)(e)}),!1}return!0},buildRequests:function(e,t){var r,n,i,a=[],o={},s={},d={},c={};for(r in e.forEach(function(e){var t,r=Object.keys(Object(w.deepAccess)(e,"mediaTypes",{}));switch(t=e,Object(w.deepAccess)(t,"params.video")&&Object(w.deepAccess)(t,"mediaTypes.video")?x.d:x.b){case x.b:Qi(e,c,o);break;case x.d:Xi(e,s)}E()(r,x.b)&&E()(r,x.d)&&(d[e.transactionId]=e)}),Object.keys(d).forEach(function(e){var t=d[e];o[e]||Qi(t,c,o),s[e]||Xi(t,s)}),c)if(c.hasOwnProperty(r)){var u=c[r].missingSizes;o.hasOwnProperty(r)||(o[r]={}),o[r].hasOwnProperty("missingImps")||(o[r].missingImps=[],o[r].missingCount=0);for(var p=c[r].impression,l=0;l<u.length;l++){n=e[0],i=p,f=u[l],(i=Object(w.deepClone)(i)).ext.sid=Object(w.parseGPTSingleSizeArray)(f),i.banner.w=f[0],i.banner.h=f[1],Wi(n,i,x.b);var f=i;o[r].missingImps.push(f),o[r].missingCount++}}return 0<Object.keys(o).length&&a.push.apply(a,Yi(e,t,o,7.2)),0<Object.keys(s).length&&a.push.apply(a,Yi(e,t,s,8.1)),a},interpretResponse:function(e,t){var r=[],n=null;if(!e.hasOwnProperty("body")||!e.body.hasOwnProperty("seatbid"))return r;for(var i,a,o,s,d,c=e.body,u=c.seatbid,p=0;p<u.length;p++)if(u[p].hasOwnProperty("bid"))for(var l=u[p].bid,f=JSON.parse(t.data.r),b=0;b<l.length;b++){var m=function(t,e,r){if(t)return Object(T.default)({},C()(r,function(e){return e.bidId===t}),C()(e,function(e){return e.id===t}))}(l[b].impid,f.imp,t.validBidRequests);i=l[b],a=c.cur,m=m,d=s=o=void 0,o={},s=!(!Object(w.deepAccess)(i,"exp")||!Object(w.isInteger)(i.exp)),d=Object(w.deepAccess)(i,"dealid")||Object(w.deepAccess)(i,"ext.dealid"),Di.hasOwnProperty(a)?o.cpm=i.price/Di[a]:o.cpm=i.price/100,o.requestId=i.impid,d&&(o.dealId=d),o.netRevenue=!0,o.currency=a,o.creativeId=i.hasOwnProperty("crid")?i.crid:"-",Object(w.deepAccess)(i,"ext.vasturl")?(o.vastUrl=i.ext.vasturl,o.width=m.video.w,o.height=m.video.h,o.mediaType=x.d,o.mediaTypes=m.mediaTypes,o.ttl=s?i.exp:3600):(o.ad=i.adm,o.width=i.w,o.height=i.h,o.mediaType=x.b,o.ttl=s?i.exp:300),o.meta={},o.meta.networkId=Object(w.deepAccess)(i,"ext.dspid"),o.meta.brandId=Object(w.deepAccess)(i,"ext.advbrandid"),o.meta.brandName=Object(w.deepAccess)(i,"ext.advbrand"),i.adomain&&0<i.adomain.length&&(o.meta.advertiserDomains=i.adomain),n=o,Object(w.deepAccess)(n,"mediaTypes.video.renderer")||"outstream"!==Object(w.deepAccess)(n,"mediaTypes.video.context")||(n.mediaTypes.video.renderer=function(e){var t=k.install({id:e,url:"https://js-sec.indexww.com/htv/video-player.js",loaded:!1});try{t.setRender($i)}catch(e){Object(w.logWarn)("Prebid Error calling setRender on renderer",e)}return t}(l[b].bidId)),r.push(n)}return r},transformBidParams:function(e,t){return Object(w.convertTypes)({siteID:"number"},e)},getUserSyncs:function(e,t){return e.iframeEnabled?[{type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"}]:[]}},Zi=(Object(j.d)(a),a.code);function ea(e,t,r,n){var i={mimes:n.mimes,minduration:n.minduration,maxduration:n.maxduration,protocols:n.protocols,linearity:n.linearity,placement:n.placement,playbackmethod:n.playbackmethod,startdelay:n.startdelay,api:n.api},a=n.skip,a=(void 0!==a&&(i.skip=a,a=n.skipmin,o=n.skipafter,void 0!==a&&(i.skipmin=a),void 0!==o&&(i.skipafter=o)),e.params.jwpseg),o=t.optionalParams||{};return Array.isArray(a)&&a.length&&(o.jwpseg=a),e.engine.setConfig({ix:{firstPartyData:o}}),{bidder:Zi,params:{id:"JWPlayer",siteId:t.id,size:n.playerSize,video:i,content:r}}}function ta(e){return void 0!==(e=void 0===e?{}:e).id}var t=e(58),a=Object(t.a)(),o={};function ra(e){e={domain:(e=e||{}).domain||o.urlData.domain,page:e.page||o.urlData.page,ref:e.ref||function(){try{return window.top.document.referrer}catch(e){return document.referrer}}(),isTop:e.isTop||o.urlData.isTop};return Object(T.default)(e,function(){if(o.pageMeta)return o.pageMeta;var e=na('link[rel="canonical"]',"href"),t=na('meta[property="og:url"]',"content"),r=na('meta[name="twitter:url"]',"content");return o.pageMeta=Object(T.default)({},e&&{canonical_url:e},t&&{og_url:t},r&&{twitter_url:r}),o.pageMeta}())}function na(e,t){var e=function(e,t){try{var r=Object(w.getWindowTop)().document.querySelector(e);if(null!==r&&r[t])return r[t]}catch(e){}}(e,t);return e&&(t=e,(e=Object(w.getWindowTop)().document.createElement("a")).href=t,e.href)}function ia(e,t){return e.filter(function(e){return e.type===t})}function aa(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function oa(e,t,r,n){e=e.getFloor({currency:"USD",mediaType:t,size:r});1<r.length&&(e.size=r),e.mediaType=t,n.push(e)}function sa(e){return e.reduce(function(e,t){return t.h*t.w<e.h*e.w?t:e})}function da(e,t){var r,n=t.w*t.h,i=pa.getWindowSize(),t={x:e.x+t.w,y:e.y+t.h};return 0==n||-1===i.w||-1===i.h?0:(e=e,t=t,r={x:0,y:0},i={x:i.w,y:i.h},(e.x>i.x||t.x<r.x||e.y>i.y||t.y<r.y?0:(Math.min(t.x,i.x)-Math.max(e.x,r.x))*(Math.min(t.y,i.y)-Math.max(e.y,r.y)))/n)}function ca(e,t){var r,t={protocol:"https",hostname:"qsearch-a.akamaihd.net/log",search:(e=e,t=t,t=Object(w.isArray)(t)&&t||[],(r={logid:"kfk",evtid:"projectevents",project:"prebid"}).acid=Object(w.deepAccess)(t,"0.auctionId")||"",r.cid=jwpb.medianetGlobals.cid||"",r.crid=t.map(function(e){return Object(w.deepAccess)(e,"params.0.crid")||e.adUnitCode}).join("|"),r.adunit_count=t.length||0,r.dn=o.urlData.domain||"",r.requrl=o.urlData.page||"",r.istop=o.urlData.isTop||"",r.event=e.name||"",r.value=e.value||"",r.rd=e.related_data||"",r)};Object(w.triggerPixel)(Object(w.buildUrl)(t))}function ua(e){var t=Object(w.deepAccess)(e,"context")||"",r=Object(w.deepAccess)(e,"vto");"outstream"==t&&r&&(e.renderer=((t=k.install({url:"https://prebid.media.net/video/bundle.js"})).setRender(function(r){window.mnet.queue.push(function(){var e={width:r.width,height:r.height,vastTimeout:r.vto,maxAllowedVastTagRedirects:r.mavtr,allowVpaid:r.avp,autoPlay:r.ap,preload:r.pl,mute:r.mt},t=r.dfp_id,t=Object(w.getGptSlotInfoForAdUnitCode)(t).divId||t;window.mnet.mediaNetoutstreamPlayer(r,t,e)})}),t))}window.mnet=window.mnet||{},window.mnet.queue=window.mnet.queue||[],o.urlData={domain:Object(w.parseUrl)(a.referer).hostname,page:a.referer,isTop:a.reachedTop},jwpb.medianetGlobals=jwpb.medianetGlobals||{};var pa={code:"medianet",gvlid:142,supportedMediaTypes:[x.b,x.c,x.d],isBidRequestValid:function(e){return e.params?e.params.cid&&Object(w.isStr)(e.params.cid)&&!Object(w.isEmptyStr)(e.params.cid)?(Object(T.default)(jwpb.medianetGlobals,!jwpb.medianetGlobals.cid&&{cid:e.params.cid}),!0):(Object(w.logError)("medianet : cid should be a string"),!1):(Object(w.logError)("medianet : Missing bid parameters"),!1)},buildRequests:function(e,t){t=t;var r,n,i,a,o,s,d,c,u={site:ra((e=e)[0].params.site),ext:(r=e[0],n=t,u=Object(w.deepAccess)(r,"params"),i=Object(w.deepAccess)(n,"gdprConsent"),n=Object(w.deepAccess)(n,"uspConsent"),a=Object(w.deepAccess)(r,"userId"),r=Object(w.deepAccess)(r,"schain")||{},o=pa.getWindowSize(),s=!(!i||!i.gdprApplies),d=!!n,c=!!_.b.getConfig("coppa"),Object(T.default)({},{customer_id:u.cid},{prebid_version:jwpb.version},{gdpr_applies:s},s&&{gdpr_consent_string:i.consentString||""},{usp_applies:d},d&&{usp_consent_string:n||""},{coppa_applies:c},-1!==o.w&&-1!==o.h&&{screen:o},a&&{user_id:a},jwpb.medianetGlobals.analyticsEnabled&&{analytics:!0},!Object(w.isEmpty)(r)&&{schain:r})),id:e[0].auctionId,imp:e.map(function(e){var r,n,t=e,e={id:t.bidId,ext:{dfp_id:t.adUnitCode,display_count:t.bidRequestsCount},all:t.params},i=(t.ortb2Imp&&(e.ortb2Imp=t.ortb2Imp),Object(w.deepAccess)(t,"mediaTypes.banner.sizes")||[]),a=Object(w.deepAccess)(t,"mediaTypes.video")||{},o=Object(w.deepAccess)(t,"params.video")||{},o=Object(T.default)({},o,a);if(Object(w.isEmpty)(o)||(e.video=o),0<i.length&&(e.banner=(a=i,Object(w.isArray)(a)&&2===a.length&&!Object(w.isArray)(a[0])?[aa(a)]:a.map(aa))),t.nativeParams)try{e.native=JSON.stringify(t.nativeParams)}catch(t){Object(w.logError)("medianet : Incorrect JSON : bidRequest.nativeParams")}return t.params.crid&&(e.tagid=t.params.crid.toString()),(o=parseFloat(t.params.bidfloor||t.params.bidFloor))&&(e.bidfloor=o),i=t.adUnitCode,(a=document.getElementById(i))||-1===i.indexOf("/")||(i=Object(w.getGptSlotInfoForAdUnitCode)(i).divId,Object(w.isStr)(i)&&(a=document.getElementById(i))),(o=a&&a.getBoundingClientRect?(i=a.getBoundingClientRect(),(a={}).top_left={y:i.top,x:i.left},a.bottom_right={y:i.bottom,x:i.right},a):null)&&e.banner&&0!==e.banner.length?(i={top_left:{x:o.top_left.x+window.pageXOffset,y:o.top_left.y+window.pageYOffset},bottom_right:{x:o.bottom_right.x+window.pageXOffset,y:o.bottom_right.y+window.pageYOffset}},e.ext.coordinates=i,e.ext.viewability=da(o.top_left,sa(e.banner)),.5<da(i.top_left,sa(e.banner))?e.ext.visibility=1:e.ext.visibility=2):e.ext.visibility=0,n=[],"function"==typeof(r=t).getFloor&&[x.b,x.d,x.c].forEach(function(t){r.mediaTypes.hasOwnProperty(t)&&(t==x.b?r.mediaTypes.banner.sizes.forEach(function(e){oa(r,t,e,n)}):oa(r,t,"*",n))}),0<(a=n).length&&(e.bidfloors=a),e}),tmax:t.timeout||_.b.getConfig("bidderTimeout")};return{method:"POST",url:(s=u.ext.customer_id,"https://prebid.media.net/rtb/prebid?cid="+encodeURIComponent(s)),data:JSON.stringify(u)}},interpretResponse:function(e,t){var r=[];if(!e||!e.body)return Object(w.logInfo)("medianet : response is empty"),r;e=e.body.bidList;return Object(w.isArray)(e)&&0!==e.length?(r=e.filter(function(e){return!1===e.no_bid&&0<parseFloat(e.cpm)})).forEach(ua):Object(w.logInfo)("medianet : no bids"),r},getUserSyncs:function(e,t){t=t;t=!Object(w.isEmpty)(t)&&t[0].body&&t[0].body.ext&&Object(w.isArray)(t[0].body.ext.csUrl)?t[0].body.ext.csUrl:[];return e.iframeEnabled?ia(t,"iframe"):e.pixelEnabled?ia(t,"image"):void 0},onTimeout:function(e){try{ca({name:"client_timeout",value:e.length,related_data:e[0].timeout||_.b.getConfig("bidderTimeout")},e)}catch(e){}},onBidWon:function(e){try{ca({name:"client_bid_won",value:e.cpm},[e])}catch(e){}},clearMnData:function(){o={}},getWindowSize:function(){return{w:window.screen.width||-1,h:window.screen.height||-1}}},la=(Object(j.d)(pa),pa.code);function fa(e,t,r){t={cid:""+t.pubid,crid:""+t.id,site:{content:r}},r=e.settings.floorPriceCents,void 0!==r&&(t.bidfloor=r/100),r=e.params.jwpseg;return Array.isArray(r)&&r.length&&(t.ccd=r),{bidder:la,params:t}}function ba(e){return!!e&&void 0!==e.pubid&&void 0!==e.id}var ma={code:"oneVideo",VERSION:"3.1.2",ENDPOINT:"https://ads.adaptv.advertising.com/rtb/openrtb?ext_id=",E2ETESTENDPOINT:"https://ads-wc.v.ssp.yahoo.com/rtb/openrtb?ext_id=",SYNC_ENDPOINT1:"https://pixel.advertising.com/ups/57304/sync?gdpr=&gdpr_consent=&_origin=0&redir=true",SYNC_ENDPOINT2:"https://match.adsrvr.org/track/cmf/generic?ttd_pid=adaptv&ttd_tpi=1",supportedMediaTypes:["video","banner"],isBidRequestValid:function(e){if("oneVideo"!==e.bidder||void 0===e.params)return!1;if(e.params&&e.params.video&&e.params.video.e2etest)return!0;if(void 0===e.mediaTypes.video&&void 0===e.mediaTypes.banner)return Object(w.logError)("Failed validation: adUnit mediaTypes.video OR mediaTypes.banner not declared"),!1;if(e.mediaTypes.video){if(void 0===e.mediaTypes.video.playerSize&&e.params.video&&(void 0===e.params.video.playerWidth||void 0===e.params.video.playerHeight))return Object(w.logError)("Failed validation: Player size not declared in either mediaTypes.playerSize OR bid.params.video.plauerWidth & bid.params.video.playerHeight."),!1;if(void 0===e.mediaTypes.video.mimes&&(!e.params.video||void 0===e.params.video.mimes))return Object(w.logError)("Failed validation: adUnit mediaTypes.mimes OR params.video.mimes not declared"),!1;if("outstream"===e.mediaTypes.video.context&&e.params.video&&1===e.params.video.display)return Object(w.logError)("Failed validation: Dynamic Ad Placement cannot be used with context Outstream (params.video.display=1)"),!1}return void 0!==e.params.pubId||(Object(w.logError)("Failed validation: Adapter cannot send requests without bid.params.pubId"),!1)},buildRequests:function(e,n){var i=n?n.gdprConsent:null;return e.map(function(e){var t=ma.ENDPOINT,r=e.params.pubId;return e.params.video.e2etest&&(t=ma.E2ETESTENDPOINT,r="HBExchange"),{method:"POST",url:t+r,data:function(e,t,r){var n=r.refererInfo.referer,n=e.params.site&&e.params.site.page?e.params.site.page:n.href,i=e.params.site&&e.params.site.referrer?e.params.site.referrer:r.refererInfo.referer,a={currency:e.params.cur||"USD",mediaType:"video",size:"*"},o={id:Object(w.generateUUID)(),at:2,imp:[{id:"1",secure:"https:"===document.location.protocol,ext:{hb:1,prebidver:"5.20.2",adapterver:ma.VERSION}}],site:{page:n,ref:i},device:{ua:navigator.userAgent},tmax:200};null==e.params.video.display||1!=e.params.video.display?(o.imp[0].video={linearity:1},e.params.video.playerWidth&&e.params.video.playerHeight?(o.imp[0].video.w=e.params.video.playerWidth,o.imp[0].video.h=e.params.video.playerHeight):(n=ga(e.mediaTypes.video.playerSize),o.imp[0].video.w=n.width,o.imp[0].video.h=n.height),e.params.video.mimes?o.imp[0].video.mimes=e.params.video.mimes:o.imp[0].video.mimes=e.mediaTypes.video.mimes,(e.mediaTypes.video.maxbitrate||e.params.video.maxbitrate)&&(o.imp[0].video.maxbitrate=e.params.video.maxbitrate||e.mediaTypes.video.maxbitrate),(e.mediaTypes.video.maxduration||e.params.video.maxduration)&&(o.imp[0].video.maxduration=e.params.video.maxduration||e.mediaTypes.video.maxduration),(e.mediaTypes.video.minduration||e.params.video.minduration)&&(o.imp[0].video.minduration=e.params.video.minduration||e.mediaTypes.video.minduration),(e.mediaTypes.video.api||e.params.video.api)&&(o.imp[0].video.api=e.params.video.api||e.mediaTypes.video.api),(e.mediaTypes.video.delivery||e.params.video.delivery)&&(o.imp[0].video.delivery=e.params.video.delivery||e.mediaTypes.video.delivery),(e.mediaTypes.video.position||e.params.video.position)&&(o.imp[0].video.pos=e.params.video.position||e.mediaTypes.video.position),(e.mediaTypes.video.playbackmethod||e.params.video.playbackmethod)&&(o.imp[0].video.playbackmethod=e.params.video.playbackmethod||e.mediaTypes.video.playbackmethod),(e.mediaTypes.video.placement||e.params.video.placement)&&(o.imp[0].video.placement=e.params.video.placement||e.mediaTypes.video.placement),e.params.video.rewarded&&(o.imp[0].ext.rewarded=e.params.video.rewarded),(e.mediaTypes.video.linearity||e.params.video.linearity)&&(o.imp[0].video.linearity=e.params.video.linearity||e.mediaTypes.video.linearity||1),(e.mediaTypes.video.protocols||e.params.video.protocols)&&(o.imp[0].video.protocols=e.params.video.protocols||e.mediaTypes.video.protocols||[2,5])):1==e.params.video.display&&(a.mediaType="banner",o.imp[0].banner={mimes:e.params.video.mimes,w:e.params.video.playerWidth,h:e.params.video.playerHeight,pos:e.params.video.position},e.params.video.placement&&(o.imp[0].banner.placement=e.params.video.placement),e.params.video.maxduration&&(o.imp[0].banner.ext=o.imp[0].banner.ext||{},o.imp[0].banner.ext.maxduration=e.params.video.maxduration),e.params.video.minduration&&(o.imp[0].banner.ext=o.imp[0].banner.ext||{},o.imp[0].banner.ext.minduration=e.params.video.minduration));Object(w.isFn)(e.getFloor)?(i=e.getFloor(a),o.imp[0].bidfloor=i.floor,o.cur=i.currency):o.imp[0].bidfloor=e.params.bidfloor;if(e.params.video.inventoryid&&(o.imp[0].ext.inventoryid=e.params.video.inventoryid),e.params.video.sid?(o.source={ext:{schain:{complete:1,nodes:[{sid:e.params.video.sid,rid:o.id}]}}},1==e.params.video.hp&&(o.source.ext.schain.nodes[0].hp=e.params.video.hp)):e.schain&&(o.source={ext:{schain:e.schain}},o.source.ext.schain.nodes[0].rid=o.id),e.params.site&&e.params.site.id&&(o.site.id=e.params.site.id),(va(t)||r&&r.uspConsent)&&(o.regs={ext:{}},va(t)&&(o.regs.ext.gdpr=1),t&&t.consentString&&(o.user={ext:{consent:t.consentString}}),r&&r.uspConsent&&(o.regs.ext.us_privacy=r.uspConsent)),e.params.video.e2etest&&(Object(w.logMessage)("E2E test mode enabled: \n The following parameters are being overridden by e2etest mode:\n* bidfloor:null\n* width:300\n* height:250\n* mimes: video/mp4, application/javascript\n* api:2\n* site.page/ref: verizonmedia.com\n* tmax:1000"),o.imp[0].bidfloor=null,o.imp[0].video.w=300,o.imp[0].video.h=250,o.imp[0].video.mimes=["video/mp4","application/javascript"],o.imp[0].video.api=[2],o.site.page="https://verizonmedia.com",o.site.ref="https://verizonmedia.com",o.tmax=1e3),e.params.video.custom&&Object(w.isPlainObject)(e.params.video.custom))for(var s in o.imp[0].ext.custom={},e.params.video.custom)(Object(w.isStr)(e.params.video.custom[s])||Object(w.isNumber)(e.params.video.custom[s]))&&(o.imp[0].ext.custom[s]=e.params.video.custom[s]);if(e.params.video.content&&Object(w.isPlainObject)(e.params.video.content)){o.site.content={};var d,c=["id","title","series","season","genre","contentrating","language"],u=["episode","prodq","context","livestream","len"],p=["cat"],l=["ext"];for(d in e.params.video.content)-1<c.indexOf(d)&&Object(w.isStr)(e.params.video.content[d])||-1<u.indexOf(d)&&Object(w.isNumber)(e.params.video.content[d])||-1<l.indexOf(d)&&Object(w.isPlainObject)(e.params.video.content[d])||-1<p.indexOf(d)&&Object(w.isArray)(e.params.video.content[d])&&e.params.video.content[d].every(function(e){return Object(w.isStr)(e)})?o.site.content[d]=e.params.video.content[d]:Object(w.logMessage)("oneVideo bid adapter validation error: ",d," is either not supported is OpenRTB V2.5 or value is undefined")}return o}(e,i,n),bidRequest:e}})},interpretResponse:function(e,t){var r,n,i=t.bidRequest;try{r=(e=e.body).seatbid[0].bid[0]}catch(t){e=null}return e&&r&&(r.adm||r.nurl)&&r.price?(n=ga(i.sizes),(n={requestId:i.bidId,bidderCode:ma.code,cpm:r.price,creativeId:r.crid,width:n.width,height:n.height,currency:e.cur,ttl:0<i.params.video.ttl&&i.params.video.ttl<=3600?i.params.video.ttl:300,netRevenue:!0,adUnitCode:i.adUnitCode,meta:{advertiserDomains:r.adomain}}).mediaType=i.mediaTypes.banner?"banner":"video",r.nurl?n.vastUrl=r.nurl:r.adm&&1===i.params.video.display?n.ad=r.adm:r.adm&&(n.vastXml=r.adm),i.mediaTypes.video&&(n.renderer="outstream"===i.mediaTypes.video.context?void((e=i).renderer||(e.renderer={},e.renderer.url="https://cdn.vidible.tv/prod/hb-outstream-renderer/renderer.js",e.renderer.render=function(e){setTimeout(function(){o2PlayerRender(e)},700)})):void 0),n):(Object(w.logWarn)("No valid bids from "+ma.code+" bidder"),[])},getUserSyncs:function(e,t,r){var r=r=void 0===r?{}:r,n=r.gdprApplies,r=r.consentString,r=void 0===r?"":r;if(e.pixelEnabled)return[{type:"image",url:ma.SYNC_ENDPOINT1},{type:"image",url:"https://sync-tm.everesttech.net/upi/pid/m7y5t93k?gdpr="+(n?1:0)+"&gdpr_consent="+r+"&redir=https%3A%2F%2Fpixel.advertising.com%2Fups%2F55986%2Fsync%3Fuid%3D%24%7BUSER_ID%7D%26_origin%3D0"+encodeURI("&gdpr="+(n?1:0)+"&gdpr_consent="+r)},{type:"image",url:ma.SYNC_ENDPOINT2}]}};function ga(e){var e=Object(w.parseSizesInput)(e),e=e.length?e[0].split("x"):[],t=e[0],e=e[1];return{width:parseInt(t,10)||void 0,height:parseInt(e,10)||void 0}}function va(e){return e&&e.gdprApplies}Object(j.d)(ma);var ya=ma.code;function ha(e,t,r,n){var i=n.playerSize,i={playerWidth:i[0],playerHeight:i[1],mimes:n.mimes,protocols:n.protocols,api:n.api,playbackmethod:n.playbackmethod,minduration:n.minduration,maxduration:n.maxduration,placement:n.placement,inventoryid:t.id,content:r},r={pubId:""+t.pubid},t=e.settings.floorPriceCents,e=(void 0!==t&&(r.bidfloor=t/100),n.pos);return void 0!==e&&(i.position=e),r.video=i,{bidder:ya,params:r}}function Oa(e){return!!(e=void 0===e?{}:e)&&void 0!==e.pubid}var ja="openx";function Ia(e,t,r,n){var n={unit:""+t.id,video:n},i=t.delDomain,i=(i&&(n.delDomain=""+i),t.platform),t=(i&&(n.platform=""+i),e.settings.floorPriceCents);return void 0!==t&&(n.customFloor=t/100),{bidder:ja,params:n}}function Aa(e){return!!e&&void 0!==e.id&&(void 0!==e.delDomain||void 0!==e.platform)}var xa="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),Sa={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},S="number",Ea="string",Ta="boolean",wa="array",_a={mimes:wa,minduration:S,maxduration:S,startdelay:S,playbackmethod:wa,api:wa,protocols:wa,w:S,h:S,battr:wa,linearity:S,placement:S,minbitrate:S,maxbitrate:S,skip:S},R={TITLE:{ID:1,KEY:"title",TYPE:0},IMAGE:{ID:2,KEY:"image",TYPE:0},ICON:{ID:3,KEY:"icon",TYPE:0},SPONSOREDBY:{ID:4,KEY:"sponsoredBy",TYPE:1},BODY:{ID:5,KEY:"body",TYPE:2},CLICKURL:{ID:6,KEY:"clickUrl",TYPE:0},VIDEO:{ID:7,KEY:"video",TYPE:0},EXT:{ID:8,KEY:"ext",TYPE:0},DATA:{ID:9,KEY:"data",TYPE:0},LOGO:{ID:10,KEY:"logo",TYPE:0},SPONSORED:{ID:11,KEY:"sponsored",TYPE:1},DESC:{ID:12,KEY:"data",TYPE:2},RATING:{ID:13,KEY:"rating",TYPE:3},LIKES:{ID:14,KEY:"likes",TYPE:4},DOWNLOADS:{ID:15,KEY:"downloads",TYPE:5},PRICE:{ID:16,KEY:"price",TYPE:6},SALEPRICE:{ID:17,KEY:"saleprice",TYPE:7},PHONE:{ID:18,KEY:"phone",TYPE:8},ADDRESS:{ID:19,KEY:"address",TYPE:9},DESC2:{ID:20,KEY:"desc2",TYPE:10},DISPLAYURL:{ID:21,KEY:"displayurl",TYPE:11},CTA:{ID:22,KEY:"cta",TYPE:12}},Ca=1,ka=2,Pa=3,Ra=[{id:R.SPONSOREDBY.ID,required:!0,data:{type:1}},{id:R.TITLE.ID,required:!0},{id:R.IMAGE.ID,required:!0}],Da={1:"PMP",5:"PREF",6:"PMPG"},Ua={bootstrapPlayer:function(e){var t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var r,n=Ua.getRendererId("pubmatic",e.rendererCode),e=document.getElementById(e.adUnitCode),i=0;i<window.bluebillywig.renderers.length;i++)if(window.bluebillywig.renderers[i]._id===n){r=window.bluebillywig.renderers[i];break}r?r.bootstrap(t,e):Object(w.logWarn)("PubMatic: : Couldn't find a renderer with "+n)}else Object(w.logWarn)("PubMatic: : No vastXml or vastUrl on bid, bailing...")},newRenderer:function(e,t){var r=xa.replace("$RENDERER",e),r=k.install({url:r,loaded:!1,adUnitCode:t});try{r.setRender(Ua.outstreamRender)}catch(e){Object(w.logWarn)("PubMatic: : Error tying to setRender on renderer",e)}return r},outstreamRender:function(e){e.renderer.push(function(){Ua.bootstrapPlayer(e)})},getRendererId:function(e,t){return e+"-"+t}},Ba=[x.b,x.d,x.c],Na=0,qa=!1,za={},Ma={};function Fa(e,t){if(Object(w.isStr)(t))switch(e){case"pmzoneid":return t.split(",").slice(0,50).map(function(e){return e.trim()}).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||void 0;case"yob":return parseInt(t)||void 0;default:return t}else t&&Object(w.logWarn)("PubMatic: Ignoring param key: "+e+", expects string-value, found "+typeof t)}function Va(e){var t,r,n,i=Object(w.mergeDeep)(Object(w.deepAccess)(e.mediaTypes,"video"),e.params.video);if(void 0!==i){for(var a in t={},r=i,n=e.adUnitCode,Object(w.deepAccess)(r,"placement")||Object(w.logWarn)("Video.Placement param missing for "+n),_a)i.hasOwnProperty(a)&&(t[a]=function(e,t,r){var n,e="Ignoring param key: "+e+", expects "+r+", found "+typeof t;switch(r){case Ta:n=w.isBoolean;break;case S:n=w.isNumber;break;case Ea:n=w.isStr;break;case wa:n=w.isArray}if(n(t))return t;Object(w.logWarn)("PubMatic: "+e)}(a,i[a],_a[a]));Object(w.isArray)(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):Object(w.isNumber)(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=void 0,Object(w.logWarn)("PubMatic: Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function Wa(e,t,r){var n=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,i="";if(void 0!==n&&""!==n&&n.hasOwnProperty("segments")){var a=n.segments.length;i+="jw-id="+n.content.id;for(var o=0;o<a;o++)i+="|jw-"+n.segments[o]+"=1";r?void 0===e.dctr||0==e.dctr.length?e.dctr=i:e.dctr+="|"+i:(t=e.ext)&&void 0===t.key_val?t.key_val=i:t.key_val+="|"+i}}function Ga(e){var t,r,n,i,a,o,s,d,c,u,p,l={},f={},b=e.hasOwnProperty("sizes")?e.sizes:[],m="",g=[];if(i=l={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:Fa("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:Fa("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?Fa("currency",e.params.currency):"USD"},(a=e).params.deals&&(Object(w.isArray)(a.params.deals)?a.params.deals.forEach(function(e){Object(w.isStr)(e)&&3<e.length?(i.pmp||(i.pmp={private_auction:0,deals:[]}),i.pmp.deals.push({id:e})):Object(w.logWarn)("PubMatic: Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+e)}):Object(w.logWarn)("PubMatic: Error: bid.params.deals should be an array of strings.")),a=l,n="",e.params.dctr&&(n=e.params.dctr,Object(w.isStr)(n)&&0<n.length?(u=n.split("|"),n="",u.forEach(function(e){n+=0<e.length?e.trim()+"|":""}),u=n.length,"|"===n.substring(u,u-1)&&(n=n.substring(0,u-1)),a.ext.key_val=n.trim()):Object(w.logWarn)("PubMatic: Ignoring param : dctr with value : "+n+", expects string-value, found empty or non-string value")),Wa(l,e),e.hasOwnProperty("mediaTypes"))for(m in e.mediaTypes)switch(m){case x.b:void 0!==(t=function(e){var t,r=e.mediaTypes.banner.sizes,n=[];if(void 0!==r&&Object(w.isArray)(r)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===r.length)return t=void 0,Object(w.logWarn)("PubMatic: Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(r[0][0],10),t.h=parseInt(r[0][1],10),r=r.splice(1,r.length-1)}0<r.length&&(n=[],r.forEach(function(e){1<e.length&&n.push({w:e[0],h:e[1]})}),0<n.length&&(t.format=n)),t.pos=0,t.topframe=Object(w.inIframe)()?0:1}else Object(w.logWarn)("PubMatic: Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=void 0;return t}(e))&&(l.banner=t);break;case x.c:f.request=JSON.stringify(function(e){var t,r,n,i={assets:[]};for(t in e){if(e.hasOwnProperty(t)){var a={};if(!(i.assets&&0<i.assets.length&&i.assets.hasOwnProperty(t)))switch(t){case R.TITLE.KEY:e[t].len||e[t].length?a={id:R.TITLE.ID,required:e[t].required?1:0,title:{len:e[t].len||e[t].length,ext:e[t].ext}}:Object(w.logWarn)("PubMatic: Error: Title Length is required for native ad: "+JSON.stringify(e));break;case R.IMAGE.KEY:e[t].sizes&&0<e[t].sizes.length?a={id:R.IMAGE.ID,required:e[t].required?1:0,img:{type:Pa,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:void 0),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:void 0),wmin:e[t].wmin||e[t].minimumWidth||(e[t].minsizes?e[t].minsizes[0]:void 0),hmin:e[t].hmin||e[t].minimumHeight||(e[t].minsizes?e[t].minsizes[1]:void 0),mimes:e[t].mimes,ext:e[t].ext}}:Object(w.logWarn)("PubMatic: Error: Image sizes is required for native ad: "+JSON.stringify(e));break;case R.ICON.KEY:e[t].sizes&&0<e[t].sizes.length?a={id:R.ICON.ID,required:e[t].required?1:0,img:{type:Ca,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:void 0),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:void 0)}}:Object(w.logWarn)("PubMatic: Error: Icon sizes is required for native ad: "+JSON.stringify(e));break;case R.VIDEO.KEY:a={id:R.VIDEO.ID,required:e[t].required?1:0,video:{minduration:e[t].minduration,maxduration:e[t].maxduration,protocols:e[t].protocols,mimes:e[t].mimes,ext:e[t].ext}};break;case R.EXT.KEY:a={id:R.EXT.ID,required:e[t].required?1:0};break;case R.LOGO.KEY:a={id:R.LOGO.ID,required:e[t].required?1:0,img:{type:ka,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:void 0),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:void 0)}};break;case R.SPONSOREDBY.KEY:case R.BODY.KEY:case R.RATING.KEY:case R.LIKES.KEY:case R.DOWNLOADS.KEY:case R.PRICE.KEY:case R.SALEPRICE.KEY:case R.PHONE.KEY:case R.ADDRESS.KEY:case R.DESC2.KEY:case R.DISPLAYURL.KEY:case R.CTA.KEY:r=Ma[t],n=void 0,n=r.KEY,a={id:r.ID,required:e[n].required?1:0,data:{type:r.TYPE,len:e[n].len,ext:e[n].ext}}}}a&&a.id&&(i.assets[i.assets.length]=a)}var o=Ra.length,s=0;return Ra.forEach(function(e){for(var t=i.assets.length,r=0;r<t;r++)if(e.id==i.assets[r].id){s++;break}}),qa=o!=s,i}(e.nativeParams)),qa?Object(w.logWarn)("PubMatic: Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."):l.native=f;break;case x.d:void 0!==(r=Va(e))&&(l.video=r)}else t={pos:0,w:e.params.width,h:e.params.height,topframe:Object(w.inIframe)()?0:1},Object(w.isArray)(b)&&1<b.length&&((b=b.splice(1,b.length-1)).forEach(function(e){g.push({w:e[0],h:e[1]})}),t.format=g),l.banner=t;return c=l,u=e,p=Object(T.default)({},Object(w.deepAccess)(u,"ortb2Imp.ext.data")),Object.keys(p).forEach(function(e){"pbadslot"===e?"string"==typeof p[e]&&p[e]&&Object(w.deepSetValue)(c,"ext.data.pbadslot",p[e]):"adserver"===e?["name","adslot"].forEach(function(e){var t=Object(w.deepAccess)(p,"adserver."+e);"string"==typeof t&&t&&(Object(w.deepSetValue)(c,"ext.data.adserver."+e.toLowerCase(),t),"adslot"===e&&Object(w.deepSetValue)(c,"ext.dfp_ad_unit_code",t))}):Object(w.deepSetValue)(c,"ext.data."+e,p[e])}),o=l,d=-1,"function"!=typeof(s=e).getFloor||_.b.getConfig("pubmatic.disableFloors")||[x.b,x.d,x.c].forEach(function(r){var t;o.hasOwnProperty(r)&&(t=[],"banner"===r&&(o[r].w&&o[r].h&&t.push([o[r].w,o[r].h]),Object(w.isArray)(o[r].format)&&o[r].format.forEach(function(e){return t.push([e.w,e.h])})),0===t.length&&t.push("*"),t.forEach(function(e){var t=s.getFloor({currency:o.bidfloorcur,mediaType:r,size:e});Object(w.logInfo)("PubMatic: ","floor from floor module returned for mediatype:",r," and size:",e," is: currency",t.currency,"floor",t.floor),"object"!=typeof t||t.currency!==o.bidfloorcur||isNaN(parseInt(t.floor))||(e=parseFloat(t.floor),Object(w.logInfo)("PubMatic: ","floor from floor module:",e,"previous floor value",d,"Min:",Math.min(e,d)),d=-1===d?e:Math.min(e,d),Object(w.logInfo)("PubMatic: ","new floor value:",d))}))}),o.bidfloor&&(Object(w.logInfo)("PubMatic: ","floor from floor module:",d,"impObj.bidfloor",o.bidfloor,"Max:",Math.max(d,o.bidfloor)),d=Math.max(d,o.bidfloor)),o.bidfloor=!isNaN(d)&&0<d?d:void 0,Object(w.logInfo)("PubMatic: ","new impObj.bidfloor value:",o.bidfloor),l.hasOwnProperty(x.b)||l.hasOwnProperty(x.c)||l.hasOwnProperty(x.d)?l:void 0}function La(e,t){var r=null,e=Object(w.deepAccess)(e,"0.userId.flocId");return r=e&&e.id?2===t?{id:"FLOC",name:"FLOC",ext:{ver:e.version},segment:[{id:e.id,name:"chrome.com",value:e.id.toString()}]}:{source:"chrome.com",uids:[{atype:1,id:e.id,ext:{ver:e.version}}]}:r}function Ha(e){return!0===Object(w.isArray)(e)&&0<e.length}Object(w._each)(R,function(e){za[e.ID]=e.KEY}),Object(w._each)(R,function(e){Ma[e.KEY]=e});var e={code:"pubmatic",gvlid:76,supportedMediaTypes:[x.b,x.d,x.c],isBidRequestValid:function(e){if(e&&e.params){if(!Object(w.isStr)(e.params.publisherId))return Object(w.logWarn)("PubMatic: Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(x.d)){var t=Object(w.deepAccess)(e.mediaTypes,"video.mimes"),r=Object(w.deepAccess)(e,"params.video.mimes");if(!1===Ha(t)&&!1===Ha(r))return Object(w.logWarn)("PubMatic: Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[x.d].hasOwnProperty("context"))return Object(w.logError)("PubMatic: : no context specified in bid. Rejecting bid: ",e),!1;if("outstream"===e.mediaTypes[x.d].context&&!Object(w.isStr)(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[x.d].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(x.b)||e.mediaTypes.hasOwnProperty(x.c)?(delete e.mediaTypes[x.d],Object(w.logWarn)('PubMatic: : for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: ',e),!0):(Object(w.logError)('PubMatic: : for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: ',e),!1)}return!0}return!1},buildRequests:function(e,t){var r;t&&t.refererInfo&&(r=t.refererInfo);var n,i,a,o,s={pageURL:(i=r)&&i.referer?i.referer:window.location.href,refURL:window.document.referrer},d=(i=s,{id:""+(new Date).getTime(),at:1,cur:["USD"],imp:[],site:{page:i.pageURL,ref:i.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}),c="",u=[],p=[];if(e.forEach(function(e){(n=Object(w.deepClone)(e)).params.adSlot=n.params.adSlot||"",function(e){e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=(r=e.params.adSlot,Object(w.isStr)(r)?r.replace(/^\s+/g,"").replace(/\s+$/g,""):(r&&Object(w.logWarn)("pubmatic: adSlot must be a string. Ignoring adSlot"),""));var t=(r=e.params.adSlot).split(":"),r=t[0];if(2==t.length&&(e.params.adUnitIndex=t[1]),t=r.split("@"),e.params.adUnit=t[0],1<t.length){if(2!=(t=t[1].split("x")).length)return Object(w.logWarn)("PubMatic: AdSlot Error: adSlot not in required format");e.params.width=parseInt(t[0],10),e.params.height=parseInt(t[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(x.b)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var n=0,i=[];n<e.mediaTypes.banner.sizes.length;n++)2===e.mediaTypes.banner.sizes[n].length&&i.push(e.mediaTypes.banner.sizes[n]);e.mediaTypes.banner.sizes=i,1<=e.mediaTypes.banner.sizes.length&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}(n),n.params.hasOwnProperty("video")||n.hasOwnProperty("mediaTypes")&&n.mediaTypes.hasOwnProperty(x.c)||0!==n.params.width||0!==n.params.height?(s.pubId=s.pubId||n.params.publisherId,(s=function(e,t){var r,n,i;for(r in t.kadpageurl||(t.kadpageurl=t.pageURL),Sa)Sa.hasOwnProperty(r)&&(n=e[r])&&("object"==typeof(i=Sa[r])&&(n=i.f(n,t)),Object(w.isStr)(n)?t[r]=n:Object(w.logWarn)("PubMatic: Ignoring param : "+r+" with value : "+Sa[r]+", expects string-value, found "+typeof n));return t}(n.params,s)).transactionId=n.transactionId,""===c?c=n.params.currency||void 0:n.params.hasOwnProperty("currency")&&c!==n.params.currency&&Object(w.logWarn)("PubMatic: Currency specifier ignored. Only one currency permitted."),n.params.currency=c,n.params.hasOwnProperty("dctr")&&Object(w.isStr)(n.params.dctr)&&u.push(n.params.dctr),n.params.hasOwnProperty("bcat")&&Object(w.isArray)(n.params.bcat)&&(p=p.concat(n.params.bcat)),(e=Ga(n))&&d.imp.push(e)):Object(w.logWarn)("PubMatic: Skipping the non-standard adslot: ",n.params.adSlot,JSON.stringify(n))}),0!=d.imp.length)return d.site.publisher.id=s.pubId.trim(),Na=s.pubId.trim(),d.ext.wrapper={},d.ext.wrapper.profile=parseInt(s.profId)||void 0,d.ext.wrapper.version=parseInt(s.verId)||void 0,d.ext.wrapper.wiid=s.wiid||t.auctionId,d.ext.wrapper.wv="prebid_prebid_5.20.2",d.ext.wrapper.transactionId=s.transactionId,d.ext.wrapper.wp="pbjs",d.user.gender=s.gender?s.gender.trim():void 0,d.user.geo={},d.user.geo.lat=Fa("lat",s.lat),d.user.geo.lon=Fa("lon",s.lon),d.user.yob=Fa("yob",s.yob),d.device.geo=d.user.geo,d.site.page=s.kadpageurl.trim()||d.site.page.trim(),d.site.domain=(i=d.site.page,(a=document.createElement("a")).href=i,a.hostname),"object"==typeof _.b.getConfig("content")&&(d.site.content=_.b.getConfig("content")),"object"==typeof _.b.getConfig("device")&&(d.device=Object(T.default)(d.device,_.b.getConfig("device"))),Object(w.deepSetValue)(d,"source.tid",s.transactionId),-1!==window.location.href.indexOf("pubmaticTest=true")&&(d.test=1),e[0].schain&&Object(w.deepSetValue)(d,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&(Object(w.deepSetValue)(d,"user.ext.consent",t.gdprConsent.consentString),Object(w.deepSetValue)(d,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&Object(w.deepSetValue)(d,"regs.ext.us_privacy",t.uspConsent),!0===_.b.getConfig("coppa")&&Object(w.deepSetValue)(d,"regs.coppa",1),i=d,a=e,o=Object(w.deepAccess)(a,"0.userIdAsEids"),(a=La(a,1))&&(o=o||[]).push(a),Object(w.isArray)(o)&&0<o.length&&Object(w.deepSetValue)(i,"user.eids",o),a=d,0<(i=(i=p).filter(function(e){return"string"==typeof e||(Object(w.logWarn)("PubMatic: bcat: Each category should be a string, ignoring category: "+e),!1)}).map(function(e){return e.trim()}).filter(function(e,t,r){if(3<e.length)return r.indexOf(e)===t;Object(w.logWarn)("PubMatic: bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)})).length&&(Object(w.logWarn)("PubMatic: bcat: Selected: ",i),a.bcat=i),o=d,(a=La(e,2))&&(o.user||(o.user={}),o.user.data||(o.user.data=[]),o.user.data.push(a)),(i=_.b.getConfig("ortb2")||{}).site&&Object(w.mergeDeep)(d,{site:i.site}),i.user&&Object(w.mergeDeep)(d,{user:i.user}),"object"==typeof _.b.getConfig("app")&&(d.app=_.b.getConfig("app"),d.app.publisher=d.site.publisher,d.app.ext=d.site.ext||void 0,"object"!=typeof d.app.content&&(d.app.content=d.site.content||void 0),delete d.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(d),bidderRequest:t}},interpretResponse:function(e,c){var t=[],r="USD",n=JSON.parse(c.data),i=n.site&&n.site.ref?n.site.ref:"";try{e.body&&e.body.seatbid&&Object(w.isArray)(e.body.seatbid)&&(r=e.body.cur||r,e.body.seatbid.forEach(function(e){e.bid&&Object(w.isArray)(e.bid)&&e.bid.forEach(function(s){var d={requestId:s.impid,cpm:(parseFloat(s.price)||0).toFixed(2),width:s.w,height:s.h,creativeId:s.crid||s.id,dealId:s.dealid,currency:r,netRevenue:!0,ttl:300,referrer:i,ad:s.adm,pm_seat:e.seat||null,pm_dspid:s.ext&&s.ext.dspid?s.ext.dspid:null,partnerImpId:s.id||""};n.imp&&0<n.imp.length&&n.imp.forEach(function(e){if(s.impid===e.id)switch(function(e,t){if(e.ext&&null!=e.ext.BidType)t.mediaType=Ba[e.ext.BidType];else{Object(w.logInfo)("PubMatic: bid.ext.BidType does not exist, checking alternatively for mediaType");var r,n=e.adm,i=new RegExp(/VAST\s+version/);if(0<=n.indexOf('span class="PubAPIAd"'))t.mediaType=x.b;else if(i.test(n))t.mediaType=x.d;else try{(r=JSON.parse(n.replace(/\\/g,"")))&&r.native&&(t.mediaType=x.c)}catch(e){Object(w.logWarn)("PubMatic: Error: Cannot parse native reponse for ad response: "+n)}}}(s,d),d.mediaType){case x.b:break;case x.d:d.width=(s.hasOwnProperty("w")?s:e.video).w,d.height=(s.hasOwnProperty("h")?s:e.video).h,d.vastXml=s.adm;var t,r,n,i=d,a=c;if(a.bidderRequest&&a.bidderRequest.bids){for(var o=0;o<a.bidderRequest.bids.length;o++)a.bidderRequest.bids[o].bidId===i.requestId&&(t=a.bidderRequest.bids[o].params,r=a.bidderRequest.bids[o].mediaTypes[x.d].context,n=a.bidderRequest.bids[o].adUnitCode);r&&"outstream"===r&&t&&t.outstreamAU&&n&&(i.rendererCode=t.outstreamAU,i.renderer=Ua.newRenderer(i.rendererCode,n))}break;case x.c:!function(e,t){if(t.native={},e.hasOwnProperty("adm")){var r="";try{r=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return Object(w.logWarn)("PubMatic: Error: Cannot parse native reponse for ad response: "+t.adm)}if(r&&r.native&&r.native.assets&&0<r.native.assets.length){t.mediaType=x.c;for(var n=0,i=r.native.assets.length;n<i;n++)switch(r.native.assets[n].id){case R.TITLE.ID:t.native.title=r.native.assets[n].title&&r.native.assets[n].title.text;break;case R.IMAGE.ID:t.native.image={url:r.native.assets[n].img&&r.native.assets[n].img.url,height:r.native.assets[n].img&&r.native.assets[n].img.h,width:r.native.assets[n].img&&r.native.assets[n].img.w};break;case R.ICON.ID:t.native.icon={url:r.native.assets[n].img&&r.native.assets[n].img.url,height:r.native.assets[n].img&&r.native.assets[n].img.h,width:r.native.assets[n].img&&r.native.assets[n].img.w};break;case R.SPONSOREDBY.ID:case R.BODY.ID:case R.LIKES.ID:case R.DOWNLOADS.ID:case R.PRICE:case R.SALEPRICE.ID:case R.PHONE.ID:case R.ADDRESS.ID:case R.DESC2.ID:case R.CTA.ID:case R.RATING.ID:case R.DISPLAYURL.ID:t.native[za[r.native.assets[n].id]]=r.native.assets[n].data&&r.native.assets[n].data.value}t.native.clickUrl=r.native.link&&r.native.link.url,t.native.clickTrackers=r.native.link&&r.native.link.clicktrackers||[],t.native.impressionTrackers=r.native.imptrackers||[],t.native.jstracker=r.native.jstracker||[],t.width||(t.width=0),t.height||(t.height=0)}}}(s,d)}}),s.ext&&s.ext.deal_channel&&(d.dealChannel=Da[s.ext.deal_channel]||null),d.meta={},s.ext&&s.ext.dspid&&(d.meta.networkId=s.ext.dspid),s.ext&&s.ext.advid&&(d.meta.buyerId=s.ext.advid),s.adomain&&0<s.adomain.length&&(d.meta.advertiserDomains=s.adomain,d.meta.clickUrl=s.adomain[0]),e.ext&&e.ext.buyid&&(d.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),t.push(d)})}))}catch(e){Object(w.logError)(e)}return t},getUserSyncs:function(e,t,r,n){var i=""+Na;return r&&(i=(i+="&gdpr="+(r.gdprApplies?1:0))+("&gdpr_consent="+encodeURIComponent(r.consentString||""))),n&&(i+="&us_privacy="+encodeURIComponent(n)),!0===_.b.getConfig("coppa")&&(i+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+i}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+i}]},transformBidParams:function(e,t,r,n){return Wa(e,r.bids[0],!0),Object(w.convertTypes)({publisherId:"string",adSlot:"string"},e)}},Ka=(Object(j.d)(e),e.code);function Ya(e,t,r,n){var i={mimes:n.mimes,minduration:n.minduration,maxduration:n.maxduration,protocols:n.protocols,startdelay:n.startdelay,placement:n.placement,linearity:n.linearity,playbackmethod:n.playbackmethod,api:n.api},n=n.skip,n=(void 0!==n&&(i.skippable=!!n),{publisherId:""+t.pubid,adSlot:""+t.id,content:r}),r=(t.optionalParams&&Object(T.default)(n,t.optionalParams),e.params.jwpseg),t=(Array.isArray(r)&&r.length&&(n.dctr="jwpseg="+r.join(",")),e.settings),r=t.floorPriceCents,e=t.floorPriceCurrency;return void 0!==r&&(n.kadfloor=""+r/100),e&&(n.currency=e),n.video=i,{bidder:Ka,params:n}}function Ja(e){return void 0!==(e=void 0===e?{}:e).id&&void 0!==e.pubid}d.bidderSettings[Ka]={sendStandardTargeting:!1,adserverTargeting:[{key:"vpb_pubmatic_bid",val:function(e){return $o(d.getConfig("priceGranularity"),e)}},{key:"vpb_pubmatic_key",val:function(e){return e.videoCacheKey}}]};var D={},Xa=(_.b.getConfig("rubicon",function(e){Object(w.mergeDeep)(D,e.rubicon)}),{1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656"}),Qa=(Object(w._each)(Xa,function(e,t){return Xa[e]=t}),{code:"rubicon",gvlid:52,supportedMediaTypes:[x.b,x.d],isBidRequestValid:function(e){if("object"!=typeof e.params)return!1;for(var t=0,r=["accountId","siteId","zoneId"];t<r.length;t++)if(e.params[r[t]]=parseInt(e.params[r[t]]),isNaN(e.params[r[t]]))return Object(w.logError)("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var n,i,a,o=no(e,!0);return!!o&&("video"!==o||(n=e,i=!0,o=Object.prototype.toString.call([]),a={mimes:o,protocols:o,linearity:Object.prototype.toString.call(0),api:o},Object.keys(a).forEach(function(e){Object.prototype.toString.call(Object(w.deepAccess)(n,"mediaTypes.video."+e))!==a[e]&&(i=!1,Object(w.logError)("Rubicon: mediaTypes.video."+e+" is required and must be of type: "+a[e]))}),i))},buildRequests:function(e,u){var n,t=e.filter(function(e){return"video"===no(e)}).map(function(e){e.startTime=(new Date).getTime();var t={id:e.transactionId,test:_.b.getConfig("debug")?1:0,cur:["USD"],source:{tid:e.transactionId},tmax:u.timeout,imp:[{exp:_.b.getConfig("s2sConfig.defaultTtl"),id:e.adUnitCode,secure:1,ext:((t={})[e.bidder]=e.params,t),video:Object(w.deepAccess)(e,"mediaTypes.video")||{}}],ext:{prebid:{channel:{name:"pbjs",version:jwpb.version},cache:{vastxml:{returnCreative:!0===D.returnVast}},targeting:{includewinners:!0,includebidderkeys:!1,pricegranularity:{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:(t=_.b).getConfig("customPriceBucket")&&t.getConfig("customPriceBucket").buckets}[t.getConfig("priceGranularity")]}},bidders:{rubicon:{integration:D.int_type||"pbjs"}}}}};"rubicon"!==e.bidder&&(t.ext.prebid.aliases=((o={})[e.bidder]="rubicon",o));var r,n,i,a,o=te().installedModules;if(!o||o.length&&-1===o.indexOf("rubiconAnalyticsAdapter")||Object(w.deepSetValue)(t,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),"function"!=typeof e.getFloor||D.disableFloors)i=parseFloat(Object(w.deepAccess)(e,"params.floor"));else{try{a=e.getFloor({currency:"USD",mediaType:"video",size:eo(e,"video")})}catch(e){Object(w.logError)("Rubicon: getFloor threw an error: ",e)}i="object"!=typeof a||"USD"!==a.currency||isNaN(parseInt(a.floor))?void 0:parseFloat(a.floor)}isNaN(i)||(t.imp[0].bidfloor=i),t.imp[0].ext[e.bidder].video.size_id=(o=e,a=parseInt(Object(w.deepAccess)(o,"params.video.size_id")),isNaN(a)?"outstream"===Object(w.deepAccess)(o,"mediaTypes."+x.d+".context")?203:201:a),n=e,i=u,(r=t)&&("object"==typeof _.b.getConfig("app")?r.app=_.b.getConfig("app"):r.site={page:$a(n,i)},"object"==typeof _.b.getConfig("device")&&(r.device=_.b.getConfig("device")),n.params.video.language&&["site","device"].forEach(function(e){r[e]&&("site"===e?r[e].content=Object(T.default)({language:n.params.video.language},r[e].content):r[e]=Object(T.default)({language:n.params.video.language},r[e]))}));var s=t,d=e,s=("object"==typeof s.imp[0].video&&void 0===s.imp[0].video.skip&&(s.imp[0].video.skip=d.params.video.skip),"object"==typeof s.imp[0].video&&void 0===s.imp[0].video.skipafter&&(s.imp[0].video.skipafter=d.params.video.skipdelay),"object"==typeof s.imp[0].video&&void 0===s.imp[0].video.pos&&("atf"===d.params.position?s.imp[0].video.pos=1:"btf"===d.params.position&&(s.imp[0].video.pos=3)),d=eo(d,"video"),s.imp[0].video.w=d[0],s.imp[0].video.h=d[1],u.gdprConsent&&("boolean"==typeof u.gdprConsent.gdprApplies&&(c=u.gdprConsent.gdprApplies?1:0),Object(w.deepSetValue)(t,"regs.ext.gdpr",c),Object(w.deepSetValue)(t,"user.ext.consent",u.gdprConsent.consentString)),u.uspConsent&&Object(w.deepSetValue)(t,"regs.ext.us_privacy",u.uspConsent),Object(w.deepAccess)(u,"bids.0.userIdAsEids")),d=(s&&s.length&&Object(w.deepSetValue)(t,"user.ext.eids",s),_.b.getConfig("user.id")),c=(d&&Object(w.deepSetValue)(t,"user.id",d),!0===_.b.getConfig("coppa")&&Object(w.deepSetValue)(t,"regs.coppa",1),e.schain&&io(e.schain)&&Object(w.deepSetValue)(t,"source.ext.schain",e.schain),_.b.getConfig("multibid"));return c&&Object(w.deepSetValue)(t,"ext.prebid.multibid",c.reduce(function(e,t){var r={};return Object.keys(t).forEach(function(e){r[e.toLowerCase()]=t[e]}),e.push(r),e},[])),to(e,x.d,t),e.storedAuctionResponse&&Object(w.deepSetValue)(t.imp[0],"ext.prebid.storedauctionresponse.id",e.storedAuctionResponse.toString()),Object(w.deepSetValue)(t.imp[0],"ext.prebid.auctiontimestamp",u.auctionStart),{method:"POST",url:"https://"+(D.videoHost||"prebid-server")+".rubiconproject.com/openrtb2/auction",data:t,bidRequest:e}});return!0!==D.singleRequest?t.concat(e.filter(function(e){return"banner"===no(e)}).map(function(e){var n=Qa.createSlotParams(e,u);return{method:"GET",url:"https://"+(D.bannerHost||"fastlane")+".rubiconproject.com/a/api/fastlane.json",data:Qa.getOrderedParams(n).reduce(function(e,t){var r=n[t];return Object(w.isStr)(r)&&""!==r||Object(w.isNumber)(r)?""+e+ao(t,r)+"&":e},"")+"slots=1&rand="+Math.random(),bidRequest:e}})):(n=e.filter(function(e){return"banner"===no(e)}).reduce(function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e},{}),t.concat(Object.keys(n).reduce(function(t,e){var r=n[e];return r.map(function(e,t){return t%10==0?r.slice(t,t+10):null}).filter(function(e){return e}).forEach(function(e){var n=Qa.combineSlotUrlParams(e.map(function(e){return Qa.createSlotParams(e,u)}));t.push({method:"GET",url:"https://"+(D.bannerHost||"fastlane")+".rubiconproject.com/a/api/fastlane.json",data:Qa.getOrderedParams(n).reduce(function(e,t){var r=n[t];return Object(w.isStr)(r)&&""!==r||Object(w.isNumber)(r)?""+e+ao(t,r)+"&":e},"")+"slots="+e.length+"&rand="+Math.random(),bidRequest:e})}),t},[])))},getOrderedParams:function(e){var t=/^tg_v/,r=/^tg_i/,n=/^eid_|^tpid_/,i=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","rp_schain"].concat(Object.keys(e).filter(function(e){return n.test(e)})).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter(function(e){return t.test(e)})).concat(Object.keys(e).filter(function(e){return r.test(e)})).concat(["tk_flint","x_source.tid","x_source.pchain","p_screen_res","rp_floor","rp_secure","tk_user_key"]);return i.concat(Object.keys(e).filter(function(e){return-1===i.indexOf(e)}))},combineSlotUrlParams:function(i){if(1===i.length)return i[0];var n=i.reduce(function(t,r,n){return Object.keys(r).forEach(function(e){t.hasOwnProperty(e)||(t[e]=new Array(i.length)),t[e].splice(n,1,r[e])}),t},{}),a=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(n).forEach(function(e){var t=n[e].join(";"),r=t.match(a);n[e]=r?r[1]:t}),n},createSlotParams:function(e,t){e.startTime=(new Date).getTime();var r,n=e.params,i=eo(e,"banner"),a=n.latLong||[],o=a[0],a=a[1],s={account_id:n.accountId,site_id:n.siteId,zone_id:n.zoneId,size_id:i[0],alt_size_ids:i.slice(1).join(",")||void 0,rp_floor:.01<=(n.floor=parseFloat(n.floor))?n.floor:void 0,rp_secure:"1",tk_flint:(D.int_type||"pbjs_lite")+"_v5.20.2","x_source.tid":e.transactionId,"x_source.pchain":n.pchain,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:n.userId,"p_geo.latitude":isNaN(parseFloat(o))?void 0:parseFloat(o).toFixed(4),"p_geo.longitude":isNaN(parseFloat(a))?void 0:parseFloat(a).toFixed(4),"tg_fl.eid":e.code,rf:$a(e,t)};if("function"==typeof e.getFloor&&!D.disableFloors){try{r=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){Object(w.logError)("Rubicon: getFloor threw an error: ",e)}s.rp_hard_floor="object"!=typeof r||"USD"!==r.currency||isNaN(parseInt(r.floor))?void 0:r.floor}i={1:"atf",3:"btf"}[Object(w.deepAccess)(e,"mediaTypes.banner.pos")]||"",s.p_pos="atf"===n.position||"btf"===n.position?n.position:i,o=_.b.getConfig("user.id");return o&&(s.ppuid=o),e.userIdAsEids&&e.userIdAsEids.forEach(function(e){try{var t;"adserver.org"===e.source?(s.tpid_tdid=e.uids[0].id,s["eid_adserver.org"]=e.uids[0].id):"liveintent.com"===e.source?(s["tpid_liveintent.com"]=e.uids[0].id,s["eid_liveintent.com"]=e.uids[0].id,e.ext&&Array.isArray(e.ext.segments)&&e.ext.segments.length&&(s["tg_v.LIseg"]=e.ext.segments.join(","))):"liveramp.com"===e.source?s.x_liverampidl=e.uids[0].id:"id5-sync.com"===e.source?s["eid_id5-sync.com"]=e.uids[0].id+"^"+e.uids[0].atype+"^"+(e.uids[0].ext&&e.uids[0].ext.linkType||""):s["eid_"+e.source]=e.uids[0].id+"^"+(e.uids[0].atype||""),s.ppuid||(t=C()(e.uids,function(e){return e.ext&&"ppuid"===e.ext.stype}))&&t.id&&(s.ppuid=t.id)}catch(t){Object(w.logWarn)("Rubicon: error reading eid:",e,t)}}),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(s.gdpr=Number(t.gdprConsent.gdprApplies)),s.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(s.us_privacy=encodeURIComponent(t.uspConsent)),s.rp_maxbids=t.bidLimit||1,to(e,x.b,s),!0===_.b.getConfig("coppa")&&(s.coppa=1),e.schain&&io(e.schain)&&(s.rp_schain=Qa.serializeSupplyChain(e.schain)),s},serializeSupplyChain:function(e){if(!io(e))return"";var t=e.ver,r=e.complete,e=e.nodes;return t+","+r+"!"+Qa.serializeSupplyChainNodes(e)},serializeSupplyChainNodes:function(e){var r=["asi","sid","hp","rid","name","domain"];return e.map(function(t){return r.map(function(e){return encodeURIComponent(t[e]||"")}).join(",")}).join("!")},interpretResponse:function(o,e){var i,s=e.bidRequest;if(!(o=o.body)||"object"!=typeof o)return[];if(o.seatbid)return e=Object(w.deepAccess)(o,"ext.errors.rubicon"),Array.isArray(e)&&0<e.length&&Object(w.logWarn)("Rubicon: Error in video response"),i=[],o.seatbid.forEach(function(n){(n.bid||[]).forEach(function(e){var t={requestId:s.bidId,currency:o.cur||"USD",creativeId:e.crid,cpm:e.price||0,bidderCode:n.seat,ttl:300,netRevenue:!1!==D.netRevenue,width:e.w||Object(w.deepAccess)(s,"mediaTypes.video.w")||Object(w.deepAccess)(s,"params.video.playerWidth"),height:e.h||Object(w.deepAccess)(s,"mediaTypes.video.h")||Object(w.deepAccess)(s,"params.video.playerHeight")},r=(e.id&&(t.seatBidId=e.id),e.dealid&&(t.dealId=e.dealid),e.adomain&&Object(w.deepSetValue)(t,"meta.advertiserDomains",Array.isArray(e.adomain)?e.adomain:[e.adomain]),Object(w.deepAccess)(e,"ext.bidder.rp.advid")&&Object(w.deepSetValue)(t,"meta.advertiserId",e.ext.bidder.rp.advid),Object(w.deepAccess)(o,"ext.responsetimemillis.rubicon"));s&&r&&(s.serverResponseTimeMs=r),Object(w.deepAccess)(e,"ext.prebid.type")===x.d?(t.mediaType=x.d,Object(w.deepSetValue)(t,"meta.mediaType",x.d),(r=Object(w.deepAccess)(e,"ext.prebid.targeting"))&&"object"==typeof r&&(t.adserverTargeting=r),e.ext.prebid.cache&&"object"==typeof e.ext.prebid.cache.vastXml&&e.ext.prebid.cache.vastXml.cacheId&&e.ext.prebid.cache.vastXml.url?t.vastUrl=e.ext.prebid.cache.vastXml.url:r&&r.hb_uuid&&r.hb_cache_host&&r.hb_cache_path&&(t.vastUrl="https://"+r.hb_cache_host+r.hb_cache_path+"?uuid="+r.hb_uuid),e.adm&&(t.vastXml=e.adm),e.nurl&&(t.vastUrl=e.nurl),!t.vastUrl&&e.nurl&&(t.vastUrl=e.nurl),"outstream"===Object(w.deepAccess)(s,"mediaTypes.video.context").toLowerCase()&&(t.renderer=function(){var e=k.install({id:t.adId,url:D.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.0.0.js",config:D.rendererConfig||{},loaded:!1,adUnitCode:t.adUnitCode});try{e.setRender(Za)}catch(e){Object(w.logWarn)("Prebid Error calling setRender on renderer",e)}return e}())):Object(w.logWarn)("Rubicon: video response received non-video media type"),i.push(t)})}),i;var d,e=o.ads,c=0;return"object"!=typeof s||Array.isArray(s)||"video"!==no(s)||"object"!=typeof e||(e=e[s.adUnitCode]),!Array.isArray(e)||e.length<1?[]:e.reduce(function(e,t,r){if(t.impression_id&&d===t.impression_id?c++:d=t.impression_id,"ok"!==t.status)return e;var n,i,a=Array.isArray(s)?s[r-c]:s;return a&&"object"==typeof a?(n={requestId:a.bidId,currency:"USD",creativeId:t.creative_id||(t.network||"")+"-"+(t.advertiser||""),cpm:t.cpm||0,dealId:t.deal,ttl:300,netRevenue:!1!==D.netRevenue,rubicon:{advertiserId:t.advertiser,networkId:t.network},meta:{advertiserId:t.advertiser,networkId:t.network,mediaType:x.b}},t.creative_type&&(n.mediaType=t.creative_type),t.adomain&&(n.meta.advertiserDomains=Array.isArray(t.adomain)?t.adomain:[t.adomain]),t.creative_type===x.d?(n.width=a.params.video.playerWidth,n.height=a.params.video.playerHeight,n.vastUrl=t.creative_depot_url,n.impression_id=t.impression_id):(n.ad=(i=t.script,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='"+t.impression_id+"'>\n<script type='text/javascript'>"+i+"<\/script>\n</div>\n</body>\n</html>"),i=Xa[t.size_id].split("x").map(function(e){return Number(e)}),n.width=i[0],n.height=i[1]),n.rubiconTargeting=(Array.isArray(t.targeting)?t.targeting:[]).reduce(function(e,t){return e[t.key]=t.values[0],e},{rpfl_elemid:a.adUnitCode}),e.push(n)):Object(w.logError)("Rubicon: bidRequest undefined at index position:"+r,s,o),e},[]).sort(function(e,t){return(t.cpm||0)-(e.cpm||0)})},getUserSyncs:function(e,t,r,n){if(!oo&&e.iframeEnabled)return e="",r&&"string"==typeof r.consentString&&("boolean"==typeof r.gdprApplies?e+="?gdpr="+Number(r.gdprApplies)+"&gdpr_consent="+r.consentString:e+="?gdpr_consent="+r.consentString),n&&(e+=(e?"&":"?")+"us_privacy="+encodeURIComponent(n)),oo=!0,{type:"iframe",url:"https://"+(D.syncHost||"eus")+".rubiconproject.com/usync.html"+e}},transformBidParams:function(e,t){return Object(w.convertTypes)({accountId:"number",siteId:"number",zoneId:"number"},e)}});function $a(e,t){var r=_.b.getConfig("pageUrl"),r=e.params.referrer||r||t.refererInfo.referer;return e.params.secure?r.replace(/^http:/i,"https:"):r}function Za(e){var t,r=document.getElementById(e.adUnitCode),n=((t=r.querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),(t=(t=r.querySelector("script[id^='sas_script']"))&&t.nextSibling)&&"iframe"===t.localName&&t.style.setProperty("display","none"),e.renderer.getConfig());e.renderer.push(function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:"#"+e.adUnitCode,align:n.align||"center",position:n.position||"append"},closeButton:n.closeButton||!1,label:n.label||void 0,collapse:n.collapse||!0})})}function eo(e,t){var r=e.params;if("video"===t)return t=[],r.video&&r.video.playerWidth&&r.video.playerHeight?t=[r.video.playerWidth,r.video.playerHeight]:Array.isArray(Object(w.deepAccess)(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?t=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&0<e.sizes.length&&Array.isArray(e.sizes[0])&&1<e.sizes[0].length&&(t=e.sizes[0]),t;var i,t=[];return Array.isArray(r.sizes)?t=r.sizes:void 0!==Object(w.deepAccess)(e,"mediaTypes.banner.sizes")?t=ro(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&0<e.sizes.length?t=ro(e.sizes):Object(w.logWarn)("Rubicon: no sizes are setup or found"),i=[15,2,9],t.sort(function(e,t){var r=i.indexOf(e),n=i.indexOf(t);return-1<r||-1<n?-1===r?1:-1===n?-1:r-n:e-t})}function to(e,t,i){function r(e,t,r,n){void 0===n&&(n=!0),e=function(e,t,r){if("data"===t&&Array.isArray(e))return e.filter(function(e){return e.segment&&Object(w.deepAccess)(e,"ext.segtax")&&s[r]&&-1!==s[r].indexOf(Object(w.deepAccess)(e,"ext.segtax"))}).map(function(e){e=e.segment.filter(function(e){return e.id}).reduce(function(e,t){return e.push(t.id),e},[]);if(0<e.length)return e.toString()}).toString();if("object"!=typeof e||Array.isArray(e)){if(void 0!==e)return(Array.isArray(e)?e.filter(function(e){if("object"!=typeof e&&void 0!==e)return e.toString();Object(w.logWarn)("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")}):e).toString()}else Object(w.logWarn)("Rubicon: Filtered FPD key: ",t,": Expected value to be string, integer, or an array of strings/ints")}(e,r,t),i[n=d[r]&&n?""+d[r]:"data"===r?d[t]+"iab":""+d[t]+r]=i[n]?i[n].concat(",",e):e}var n={user:{ext:{data:Object(T.default)({},e.params.visitor)}},site:{ext:{data:Object(T.default)({},e.params.inventory)}}},a=(e.params.keywords&&(n.site.keywords=Object(w.isArray)(e.params.keywords)?e.params.keywords.join(","):e.params.keywords),Object(w.mergeDeep)({},_.b.getConfig("ortb2")||{},n)),o=Object(w.deepAccess)(e.ortb2Imp,"ext.data")||{},s={user:[4],site:[1,2,5,6]},d={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"};Object.keys(o).forEach(function(t){"adserver"===t?["name","adslot"].forEach(function(e){o[t][e]&&(o[t][e]=o[t][e].toString().replace(/^\/+/,""))}):"pbadslot"===t&&(o[t]=o[t].toString().replace(/^\/+/,""))}),t===x.b?(["site","user"].forEach(function(t){Object.keys(a[t]).forEach(function(e){"site"===t&&"content"===e&&a[t][e].data?r(a[t][e].data,t,"data"):"ext"!==e?r(a[t][e],t,e):a[t][e].data&&Object.keys(a[t].ext.data).forEach(function(e){r(a[t].ext.data[e],t,e,!1)})})}),Object.keys(o).forEach(function(e){"adserver"===e?r(o[e].adslot,name,e):r(o[e],"site",e)})):(Object.keys(o).length&&Object(w.mergeDeep)(i.imp[0].ext,{data:o}),Object(w.mergeDeep)(i,a))}function ro(e){return Object(w.parseSizesInput)(e).reduce(function(e,t){t=parseInt(Xa[t],10);return t&&e.push(t),e},[])}function no(e,t){return void 0===t&&(t=!1),r=e,"object"==typeof Object(w.deepAccess)(r,"params.video")&&void 0!==Object(w.deepAccess)(r,"mediaTypes."+x.d)?-1===["outstream","instream"].indexOf(Object(w.deepAccess)(e,"mediaTypes."+x.d+".context"))?void(t&&Object(w.logError)("Rubicon: mediaTypes.video.context must be outstream or instream")):eo(e,"video").length<2?void(t&&Object(w.logError)("Rubicon: could not determine the playerSize of the video")):(t&&Object(w.logMessage)("Rubicon: making video request for adUnit",e.adUnitCode),"video"):0===eo(e,"banner").length?void(t&&Object(w.logError)("Rubicon: could not determine the sizes for banner request")):(t&&Object(w.logMessage)("Rubicon: making banner request for adUnit",e.adUnitCode),"banner");var r}function io(e){var t=!1,r=["asi","sid","hp"];return e.nodes&&((t=e.nodes.reduce(function(e,t){return e&&r.every(function(e){return t.hasOwnProperty(e)})},!0))||Object(w.logError)("Rubicon: required schain params missing")),t}function ao(e,t){return"rp_schain"===e?"rp_schain="+t:e+"="+encodeURIComponent(t)}var oo=!1,so=(Object(j.d)(Qa),Qa.code);function co(e,t){var t={accountId:""+t.pubid,siteId:""+t.siteId,zoneId:""+t.zoneId},r={},n=e.player,i=n.getAudioTracks(),n=(i&&i.length&&(i=i[n.getCurrentAudioTrack()],r.language=i.language),e.settings.floorPriceCents);return void 0!==n&&(t.floor=n/100),t.video=r,{bidder:so,params:t}}function uo(e){return!!e&&void 0!==e.pubid&&void 0!==e.siteId&&void 0!==e.zoneId}var po="smartadserver";function lo(e,t){var r={networkId:parseInt(t.networkId)},n=parseInt(t.siteId),n=(n&&(r.siteId=n),parseInt(t.pageId)),n=(n&&(r.pageId=n),parseInt(t.formatId)),t=(n&&(r.formatId=n),e.settings.floorPriceCents);return void 0!==t&&(r.bidfloor=t/100),{bidder:po,params:r}}function fo(e){if(!e)return!1;var t=void 0!==e.siteId&&void 0!==e.pageId&&void 0!==e.formatId,r=void 0===e.siteId&&void 0===e.pageId&&void 0===e.formatId;return void 0!==e.networkId&&(t||r)}var bo="sonobi";function mo(e,t){t={TagID:""+t.id},e=e.settings.floorPriceCents;return void 0!==e&&(t.floor=e/100),{bidder:bo,params:t}}function go(e){return!!e&&void 0!==e.id}var vo={consented_providers:["3","7","11","12","15","20","22","35","43","46","48","55","57","61","62","66","70","80","83","85","86","89","93","108","122","124","125","126","131","134","135","136","143","144","147","149","153","154","159","161","162","165","167","171","178","184","188","192","195","196","202","209","211","218","221","228","229","230","236","239","241","253","255","259","266","271","272","274","286","291","294","303","308","310","311","313","314","316","317","322","323","327","336","338","340","348","350","358","359","363","367","370","371","384","385","389","393","394","397","398","407","414","415","424","429","430","432","436","438","440","442","443","445","448","449","453","459","479","482","486","491","492","494","495","503","505","510","522","523","528","537","540","550","559","560","568","571","574","575","576","584","585","587","588","590","591","592","595","609","621","624","723","725","733","737","776","780","782","787","797","798","802","803","814","817","820","821","827","829","839","853","864","867","874","899","904","922","926","931","932","933","938","955","973","976","979","981","985","987","991","1003","1024","1025","1027","1028","1029","1033","1034","1040","1047","1048","1051","1052","1053","1054","1062","1063","1067","1072","1085","1092","1095","1097","1099","1100","1107","1126","1127","1143","1149","1152","1162","1166","1167","1170","1171","1172","1188","1192","1199","1201","1204","1205","1211","1212","1215","1220","1225","1226","1227","1230","1232","1236","1241","1248","1250","1252","1268","1275","1276","1284","1286","1298","1301","1307","1312","1313","1317","1329","1336","1344","1345","1356","1362","1365","1375","1403","1409","1411","1415","1416","1419","1423","1440","1442","1449","1451","1455","1456","1468","1496","1503","1509","1512","1514","1517","1520","1525","1540","1547","1548","1555","1558","1570","1575","1577","1579","1583","1584","1591","1598","1603","1608","1613","1616","1626","1631","1633","1638","1642","1648","1651","1652","1653","1660","1665","1667","1669","1671","1674","1677","1678","1682","1684","1697","1703","1705","1716","1720","1721","1722","1725","1732","1733","1735","1739","1741","1745","1750","1753","1760","1765","1769","1776","1780","1782","1786","1791","1794","1799","1800","1801","1810","1827","1831","1832","1834","1837","1840","1843","1844","1845","1858","1859","1863","1866","1870","1872","1875","1878","1880","1882","1883","1889","1892","1896","1898","1899","1902","1905","1911","1922","1928","1929","1934","1942","1943","1944","1945","1958","1960","1962","1963","1964","1967","1968","1978","1985","1986","1987","1998","2003","2007","2012","2013","2027","2035","2038","2039","2044","2047","2052","2056","2059","2062","2064","2068","2070","2072","2078","2079","2084","2088","2090","2095","2100","2103","2107","2109","2113","2115","2121","2127","2130","2133","2137","2140","2141","2145","2147","2150","2156","2166","2170","2171","2176","2177","2179","2183","2186","2192","2198","2202","2205","2214","2216","2219","2220","2222","2223","2224","2225","2227","2228","2234","2238","2247","2251","2253","2262","2264","2271","2276","2278","2279","2282","2290","2292","2295","2299","2305","2306","2310","2311","2312","2315","2320","2325","2328","2331","2334","2335","2336","2337","2343","2346","2354","2357","2358","2359","2366","2370","2373","2376","2377","2380","2382","2387","2389","2392","2394","2400","2403","2405","2406","2407","2410","2411","2413","2414","2415","2416","2418","2422","2425","2427","2435","2437","2440","2441","2447","2453","2459","2461","2462","2464","2467","2468","2472","2477","2481","2484","2486","2492","2493","2496","2497","2498","2499","2504","2506","2510","2511","2512","2517","2526","2527","2531","2532","2534","2542","2544","2552","2555","2559","2563","2564","2567","2568","2569","2571","2572","2573","2575","2577","2579","2583","2584","2586","2589","2595","2596","2597","2601","2604","2605","2609","2610","2612","2614","2621","2622","2624","2628","2629","2632","2634","2636","2639","2643","2645","2646","2647","2649","2650","2651","2652","2656","2657","2658","2660","2661","2662","2663","2664","2669","2670","2673","2676","2677","2678","2681","2682","2684","2685","2686","2689","2690","2691","2695","2698","2699","2702","2704","2705","2706","2707","2709","2710","2713","2714","2727","2729","2739","2758","2765","2766","2767","2768","2770","2771","2772","2776","2777","2778","2779","2780","2783","2784","2786","2787","2791","2792","2793","2797","2798","2801","2802","2803","2805","2808","2809","2810","2811","2812","2813","2814","2817","2818","2824","2826","2827","2829","2830","2831","2832","2834","2836","2838","2840","2842","2843","2844","2850","2851","2852","2854","2858","2860","2862","2864","2865","2866","2867","2868","2869","2871"]},t={code:"spotx",gvlid:165,aliases:["spotx"],supportedMediaTypes:[x.d],isBidRequestValid:function(e){if(e&&"object"!=typeof e.params)return Object(w.logError)("spotx: params is not defined or is incorrect in the bidder settings."),!1;if(!Object(w.deepAccess)(e,"mediaTypes.video"))return Object(w.logError)("spotx: mediaTypes.video is not present in the bidder settings."),!1;var t=Object(w.deepAccess)(e,"mediaTypes.video.playerSize");if(!t||!Object(w.isArray)(t))return Object(w.logError)("spotx: mediaTypes.video.playerSize is not defined in the bidder settings."),!1;if(!Object(w.getBidIdParameter)("channel_id",e.params))return Object(w.logError)("spotx: channel_id is not present in bidder params"),!1;if(("outstream"==Object(w.deepAccess)(e,"mediaTypes.video.context")||"outstream"==Object(w.deepAccess)(e,"params.ad_unit"))&&!Object(w.getBidIdParameter)("outstream_function",e.params)){if(!Object(w.getBidIdParameter)("outstream_options",e.params))return Object(w.logError)("spotx: please define outstream_options parameter or override the default SpotX outstream rendering by defining your own Outstream function using field outstream_function."),!1;if(!Object(w.getBidIdParameter)("slot",e.params.outstream_options))return Object(w.logError)("spotx: please define parameter slot in outstream_options object in the configuration."),!1}return!0},buildRequests:function(e,f){var b=f.refererInfo.referer,m=!!b.match(/^https:/);return e.map(function(e){var t=Object(w.getBidIdParameter)("page",e.params)?Object(w.getBidIdParameter)("page",e.params):_.b.getConfig("pageUrl")?_.b.getConfig("pageUrl"):b,r=Object(w.getBidIdParameter)("channel_id",e.params),n=null,i=Object(w.deepAccess)(e,"mediaTypes.video.playerSize"),a=i[0][0],i=i[0][1],o=m||(Object(w.getBidIdParameter)("secure",e.params)?1:0),s={sdk_name:"Prebid 1+",versionOrtb:"2.3"};if(""!=Object(w.getBidIdParameter)("hide_skin",e.params)&&(s.hide_skin=+!!Object(w.getBidIdParameter)("hide_skin",e.params)),""!=Object(w.getBidIdParameter)("ad_volume",e.params)&&(s.ad_volume=Object(w.getBidIdParameter)("ad_volume",e.params)),""!=Object(w.getBidIdParameter)("ad_unit",e.params)&&(s.ad_unit=Object(w.getBidIdParameter)("ad_unit",e.params)),""!=Object(w.getBidIdParameter)("outstream_options",e.params)&&(s.outstream_options=Object(w.getBidIdParameter)("outstream_options",e.params)),""!=Object(w.getBidIdParameter)("outstream_function",e.params)&&(s.outstream_function=Object(w.getBidIdParameter)("outstream_function",e.params)),""!=Object(w.getBidIdParameter)("custom",e.params)&&(s.custom=Object(w.getBidIdParameter)("custom",e.params)),""!=Object(w.getBidIdParameter)("pre_market_bids",e.params)&&Object(w.isArray)(Object(w.getBidIdParameter)("pre_market_bids",e.params))){var d,c=Object(w.getBidIdParameter)("pre_market_bids",e.params);for(d in s.pre_market_bids=[],c){var u=c[d],p="";u.vast_url?p='<?xml version="1.0" encoding="utf-8"?><VAST version="2.0"><Ad><Wrapper><VASTAdTagURI>'+u.vast_url+"</VASTAdTagURI></Wrapper></Ad></VAST>":u.vast_string&&(p=u.vast_string),s.pre_market_bids.push({id:u.deal_id,seatbid:[{bid:[{impid:Date.now(),dealid:u.deal_id,price:u.price,adm:p}]}],cur:u.currency,ext:{event_log:[{}]}})}}var l=Object(w.getBidIdParameter)("mimes",e.params)||["application/javascript","video/mp4","video/webm"],o={id:e.bidId,secure:o,video:{w:a,h:i,ext:s,mimes:l}},i=(Object(w.isFn)(e.getFloor)?"USD"===(a=e.getFloor({currency:"USD",mediaType:"video",size:"*"})).currency&&(o.bidfloor=a.floor):""!=Object(w.getBidIdParameter)("price_floor",e.params)&&(o.bidfloor=Object(w.getBidIdParameter)("price_floor",e.params)),""!=Object(w.getBidIdParameter)("start_delay",e.params)&&(o.video.startdelay=0+Boolean(Object(w.getBidIdParameter)("start_delay",e.params))),""!=Object(w.getBidIdParameter)("min_duration",e.params)&&(o.video.minduration=Object(w.getBidIdParameter)("min_duration",e.params)),""!=Object(w.getBidIdParameter)("max_duration",e.params)&&(o.video.maxduration=Object(w.getBidIdParameter)("max_duration",e.params)),""!=Object(w.getBidIdParameter)("placement_type",e.params)&&(o.video.ext.placement=Object(w.getBidIdParameter)("placement_type",e.params)),""!=Object(w.getBidIdParameter)("position",e.params)&&(o.video.ext.pos=Object(w.getBidIdParameter)("position",e.params)),e.crumbs&&e.crumbs.pubcid&&(n=e.crumbs.pubcid),navigator.language?"language":"userLanguage"),l={id:r,imp:o,site:{id:"",page:t,content:"content"},device:{h:screen.height,w:screen.width,dnt:Object(w.getDNT)()?1:0,language:navigator[i].split("-")[0],make:navigator.vendor||"",ua:navigator.userAgent},ext:{wrap_response:1}},a=(_.b.getConfig("cache")&&_.b.getConfig("cache.url")&&!0===_.b.getConfig("cache.ignoreBidderCacheKey")&&(l.ext.wrap_response=0),Object(w.getBidIdParameter)("number_of_ads",e.params)&&(l.ext.number_of_ads=Object(w.getBidIdParameter)("number_of_ads",e.params)),{});return 1==Object(w.getBidIdParameter)("spotx_all_google_consent",e.params)&&(a.consented_providers_settings=vo),f&&f.gdprConsent&&(a.consent=f.gdprConsent.consentString,void 0!==f.gdprConsent.gdprApplies&&Object(w.deepSetValue)(l,"regs.ext.gdpr",f.gdprConsent.gdprApplies?1:0)),f&&f.uspConsent&&Object(w.deepSetValue)(l,"regs.ext.us_privacy",f.uspConsent),Object(w.deepAccess)(e,"userId.id5id.uid")&&(a.eids=a.eids||[],a.eids.push({source:"id5-sync.com",uids:[{id:e.userId.id5id.uid,ext:e.userId.id5id.ext||{}}]})),n&&(a.fpc=n),e&&e.schain&&(l.source={ext:{schain:e.schain}}),e&&e.userId&&e.userId.tdid&&(a.eids=a.eids||[],a.eids.push({source:"adserver.org",uids:[{id:e.userId.tdid,ext:{rtiPartner:"TDID"}}]})),Object(w.isEmpty)(a)||(l.user={ext:a}),{method:"POST",url:"https://search.spotxchange.com/openrtb/2.3/dados/"+r+"?src_sys=prebid",data:l,bidRequest:f}})},interpretResponse:function(e,o){var s=[],d=e.body;return d&&Object(w.isArray)(d.seatbid)&&Object(w._each)(d.seatbid,function(e){Object(w._each)(e.bid,function(t){var e,r={};for(e in o.bidRequest.bids)t.impid==o.bidRequest.bids[e].bidId&&(r=o.bidRequest.bids[e]);Object(w._each)(r.params.pre_market_bids,function(e){e.deal_id==t.id&&(t.price=e.price,d.cur=e.currency)});var n={requestId:r.bidId,currency:d.cur||"USD",cpm:t.price,creativeId:t.crid||"",dealId:t.dealid||"",ttl:360,netRevenue:!0,channel_id:d.id,mediaType:x.d,width:t.w,height:t.h},i=(_.b.getConfig("cache")&&_.b.getConfig("cache.url")&&!0===_.b.getConfig("cache.ignoreBidderCacheKey")?n.vastXml=t.adm:(n.cache_key=t.ext.cache_key,n.vastUrl="https://search.spotxchange.com/ad/vast.html?key="+t.ext.cache_key,n.videoCacheKey=t.ext.cache_key),n.meta=n.meta||{},t&&t.adomain&&0<t.adomain.length&&(n.meta.advertiserDomains=t.adomain),Object(w.deepAccess)(r,"mediaTypes.video.context")),a=Object(w.deepAccess)(r,"params.ad_unit");if("outstream"==i||"outstream"==a){i=Object(w.deepAccess)(r,"mediaTypes.video.playerSize"),a=k.install({id:0,url:"/",config:{adText:"SpotX Outstream Video Ad via Prebid.js",player_width:i[0][0],player_height:i[0][1],content_page_url:Object(w.deepAccess)(o,"data.site.page"),ad_mute:+!!Object(w.deepAccess)(r,"params.ad_mute"),hide_skin:+!!Object(w.deepAccess)(r,"params.hide_skin"),outstream_options:Object(w.deepAccess)(r,"params.outstream_options"),outstream_function:Object(w.deepAccess)(r,"params.outstream_function")}});try{a.setRender(yo),a.setEventHandlers({impression:function(){return Object(w.logMessage)("SpotX outstream video impression event")},loaded:function(){return Object(w.logMessage)("SpotX outstream video loaded event")},ended:function(){Object(w.logMessage)("SpotX outstream renderer video event")}})}catch(t){Object(w.logWarn)("Prebid Error calling setRender or setEventHandlers on renderer",t)}n.renderer=a}s.push(n)})}),s}};function yo(e){var t=function(e){var t,r,n,i,a,o=Object(w.getBidIdParameter)("slot",e.renderer.config.outstream_options),s=(Object(w.logMessage)("[SPOTX][renderer] Handle SpotX outstream renderer"),window.document.createElement("script")),d=(s.type="text/javascript",s.src="https://js.spotx.tv/easi/v1/"+e.channel_id+".js",{}),c=(d["data-spotx_channel_id"]=""+e.channel_id,d["data-spotx_vast_url"]=""+e.vastUrl,d["data-spotx_content_page_url"]=e.renderer.config.content_page_url,d["data-spotx_ad_unit"]="incontent",Object(w.logMessage)("[SPOTX][renderer] Default behavior"),Object(w.getBidIdParameter)("ad_mute",e.renderer.config.outstream_options)&&(d["data-spotx_ad_mute"]="1"),d["data-spotx_collapse"]="0",d["data-spotx_autoplay"]="1",d["data-spotx_blocked_autoplay_override_mode"]="1",d["data-spotx_video_slot_can_autoplay"]="1",Object(w.getBidIdParameter)("playersize_auto_adapt",e.renderer.config.outstream_options)),u=(c&&Object(w.isBoolean)(c)&&!0===c&&(c=e.width&&Object(w.isNumber)(e.width)&&e.height&&Object(w.isNumber)(e.height)?e.width/e.height:4/3,o=window.document.getElementById(o).clientWidth,t=e.renderer.config.player_width,r=e.renderer.config.player_height,i=n=0,o<t&&(r=(t=o)/c),i=c<=1?(n=Math.round(r*c),r):(n=t,Math.round(t/c)),d["data-spotx_content_width"]=""+n,d["data-spotx_content_height"]=""+i),Object(w.getBidIdParameter)("custom_override",e.renderer.config.outstream_options));if(u&&Object(w.isPlainObject)(u))for(var p in Object(w.logMessage)("[SPOTX][renderer] Custom behavior."),u)u.hasOwnProperty(p)&&("channel_id"===p||"vast_url"===p||"content_page_url"===p||"ad_unit"===p?Object(w.logWarn)("[SPOTX][renderer] Custom behavior: following option cannot be overridden: "+p):d["data-spotx_"+p]=u[p]);for(a in d)d.hasOwnProperty(a)&&s.setAttribute(a,d[a]);return s}(e);if(null!=e.renderer.config.outstream_function&&"function"==typeof e.renderer.config.outstream_function)e.renderer.config.outstream_function(e,t);else try{var r,n,i,a=Object(w.getBidIdParameter)("in_iframe",e.renderer.config.outstream_options);(a&&"IFRAME"==window.document.getElementById(a).nodeName?(n=!(n=(r=window.document.getElementById(a)).contentDocument)&&r.contentWindow?r.contentWindow.document:n).body:(i=Object(w.getBidIdParameter)("slot",e.renderer.config.outstream_options))&&window.document.getElementById(i)?window.document.getElementById(i):window.document.getElementsByTagName("head")[0]).appendChild(t)}catch(e){Object(w.logError)("[SPOTX][renderer] Error:"+e.message)}}Object(j.d)(t);var ho=t.code;function Oo(e,t,r,n){var r={content:r,channel_id:t.id,ad_unit:n.context,ad_volume:e.player.getVolume(),hide_skin:!0,start_delay:n.startdelay,min_duration:n.minduration,max_duration:n.maxduration},n=n.mimes,i=t.optionalParams,i=(i&&(Object(T.default)(r,i),i.no_vpaid_ads)&&(i=n.indexOf("application/javascript"),n.splice(i,1)),r.mimes=n,e.settings.floorPriceCents),n=(t.passFloorPrice&&void 0!==i&&(r.price_floor=i/100),e.params.jwpseg);return Array.isArray(n)&&n.length&&(r.custom={jwpseg:n}),{bidder:ho,params:r}}function jo(e){return void 0!==(e=void 0===e?{}:e).id}d.bidderSettings[ho]={sendStandardTargeting:!1,adserverTargeting:[{key:"spotx_bid",val:function(e){return $o(d.getConfig("priceGranularity"),e)}},{key:"spotx_ad_key",val:function(e){return e.videoCacheKey}}]};var Io=["minduration","maxduration","startdelay","placement","linearity","mimes","protocols","api"],Ao=["1x1","1x2"],xo=["liveramp.com","nextroll.com","verizonmedia.com","pubcid.org"],a={code:"synacormedia",supportedMediaTypes:[x.b,x.d],sizeMap:{},isVideoBid:function(e){return void 0!==e.mediaTypes&&e.mediaTypes.hasOwnProperty("video")},isBidRequestValid:function(e){var t=e&&e.params&&(e.params.hasOwnProperty("placementId")||e.params.hasOwnProperty("tagId"))&&e.params.hasOwnProperty("seatId"),e=e&&0<Object(w.getAdUnitSizes)(e).filter(function(e){return-1===Ao.indexOf(e.join("x"))}).length;return!(!t||!e)},buildRequests:function(e,t){var d,c,r,u=this;if(e&&e.length&&t)return r=t.refererInfo,d={id:t.auctionId,site:{domain:_.b.getConfig("publisherDomain")||location.hostname,page:r.referer,ref:document.referrer},device:{ua:navigator.userAgent},imp:[]},(r=e[0].schain)&&(d.source={ext:{schain:r}}),c=null,e.forEach(function(e,t){var r,n,i,a,o,s;c&&c!==e.params.seatId?Object(w.logWarn)("Synacormedia: there is an inconsistent seatId: "+e.params.seatId+" but only sending bid requests for "+c+", you should double check your configuration"):(c=e.params.seatId,r=e.params.tagId||e.params.placementId,n=e.params.bidfloor?parseFloat(e.params.bidfloor):null,isNaN(n)&&Object(w.logWarn)("Synacormedia: there is an invalid bid floor: "+e.params.bidfloor),i=parseInt(e.params.pos,10),isNaN(i)&&(Object(w.logWarn)("Synacormedia: there is an invalid POS: "+e.params.pos),i=0),a=u.isVideoBid(e)?"video":"banner",o=Object(w.getAdUnitSizes)(e).filter(function(e){return-1===Ao.indexOf(e.join("x"))}),s=[],"banner"==a?s=u.buildBannerImpressions(o,e,r,i,n,a):"video"==a&&(s=u.buildVideoImpressions(o,e,r,i,n,a)),0<s.length&&s.forEach(function(e){return d.imp.push(e)}))}),t&&t.uspConsent&&Object(w.deepSetValue)(d,"regs.ext.us_privacy",t.uspConsent),e[0]&&e[0].userIdAsEids&&Array.isArray(e[0].userIdAsEids)&&(r=this.processEids(e[0].userIdAsEids)).length&&Object(w.deepSetValue)(d,"user.ext.eids",r),d.imp.length&&c?{method:"POST",url:"https://"+c+".technoratimedia.com/openrtb/bids/"+c+"?src=prebid_prebid_5.20.2",data:d,options:{contentType:"application/json",withCredentials:!0}}:void 0},processEids:function(e){var t=[];return e.forEach(function(e){-1<xo.indexOf(e.source)&&t.push(e)}),t},buildBannerImpressions:function(e,t,r,n,i,a){var o=[],s=[];return e.forEach(function(e,t){e&&2===e.length&&o.push({w:e[0],h:e[1]})}),0<o.length&&(e={id:""+a.substring(0,1)+t.bidId,banner:{format:o,pos:n},tagid:r},null===i||isNaN(i)||(e.bidfloor=i),s.push(e)),s},buildVideoImpressions:function(e,i,a,o,s,d){var c=this,u=[];return e.forEach(function(e,t){var r,n;e&&2==e.length&&(n=e[0],e=e[1],r={id:""+d.substring(0,1)+i.bidId+"-"+n+"x"+e,tagid:a},null===s||isNaN(s)||(r.bidfloor=s),n={w:n,h:e,pos:o},i.mediaTypes.video&&(i.params.video||(i.params.video={}),c.setValidVideoParams(i.mediaTypes.video,i.params.video)),i.params.video&&c.setValidVideoParams(i.params.video,n),r[d]=n,u.push(r))}),u},setValidVideoParams:function(t,r){Object.keys(t).filter(function(e){return E()(Io,e)&&null!==t[e]&&(!isNaN(parseInt(t[e],10))||!(t[e].length<1))}).forEach(function(e){return r[e]=Array.isArray(t[e])?t[e]:parseInt(t[e],10)})},interpretResponse:function(e,u){function p(e,t){return t&&t.replace(/\${AUCTION_PRICE}/g,e.price)}var t,r,l;if(e.body&&"object"==typeof e.body)return t=(r=e.body).id,r=r.seatbid,l=[],t&&r&&r.forEach(function(c){c.bid.forEach(function(n){var e=p(n,n.adm),t=p(n,n.nurl),r=n.impid.match(/^([vb])([\w\d]+)/),i=r[1],r=r[2],a=n.h,o=n.w,s="v"===i,d="b"===i,i=((!a||!o)&&u.data&&u.data.imp&&0<u.data.imp.length&&u.data.imp.forEach(function(e){var t,r;n.impid===e.id&&(o=s?(a=e.video.h,e.video.w):d?(r=t=1,e.banner.format&&0<e.banner.format.length&&(t=e.banner.format[0].h,r=e.banner.format[0].w),a=t,r):a=1)}),{requestId:r,cpm:parseFloat(n.price),width:parseInt(o,10),height:parseInt(a,10),creativeId:c.seat+"_"+n.crid,currency:"USD",netRevenue:!0,mediaType:s?x.d:x.b,ad:e,ttl:60});null==n.adomain&&null==n.adomain||(i.meta={advertiserDomains:n.adomain}),s&&(r=t.match(/ID=([^&]*)&?/)[1],_.b.getConfig("cache.url")||(i.videoCacheKey=encodeURIComponent(r)),i.vastUrl=t),l.push(i)})}),l;Object(w.logWarn)("Synacormedia: server returned empty/non-json response: "+JSON.stringify(e.body))},getUserSyncs:function(e,t){var r=[];return e.iframeEnabled?r.push({type:"iframe",url:"https://ad-cdn.technoratimedia.com/html/usersync.html?src=prebid_prebid_5.20.2"}):Object(w.logWarn)("Synacormedia: Please enable iframe based user sync."),r}},So=(Object(j.d)(a),a.code);function Eo(e,t,r,n){var i=e.params.jwpseg,i=(Array.isArray(i)&&i.length&&(i=i.map(function(e){return{value:e}}),r.data=[{name:"jwpseg",segment:i}]),{seatId:""+t.pubid,placementId:""+t.id,video:{mimes:n.mimes,minduration:n.minduration,maxduration:n.maxduration,protocols:n.protocols,startdelay:n.startdelay,placement:n.placement,linearity:n.linearity,playbackmethod:n.playbackmethod,api:n.api},content:r}),t=n.pos,r=(void 0!==t&&(i.pos=t),e.settings.floorPriceCents);return void 0!==r&&(i.bidfloor=r/100),{bidder:So,params:i}}function To(e){return!!e&&void 0!==e.pubid&&void 0!==e.id}var wo="unruly";function _o(e,t,r){t={siteid:parseInt(t.pubid),content:r},r=e.params.jwpseg;return Array.isArray(r)&&r.length&&(t.jwpseg=r),{bidder:wo,mediaType:"video",params:t}}function Co(e){return!!e&&void 0!==e.pubid}var ko="videobyte";function Po(e,t){var r={pubId:""+t.pubId},n=t.placementId,n=(n&&(r.placementId=""+n),t.nid),t=(n&&(r.nid=""+n),e.settings.floorPriceCents);return void 0!==t&&(r.bidfloor=t/100),{bidder:ko,params:r}}function Ro(e){return!!e&&void 0!==e.pubId}var Do=["admixer.net","adserver.org","adtelligent.com","akamai.com","amxrtb.com","audigent.com","britepool.com","criteo.com","crwdcntrl.net","deepintent.com","hcn.health","id5-sync.com","idx.lat","intentiq.com","intimatemerger.com","liveintent.com","liveramp.com","mediawallahscript.com","merkleinc.com","netid.de","neustar.biz","nextroll.com","novatiq.com","parrable.com","pubcid.org","quantcast.com","quantcast.com","tapad.com","uidapi.com","verizonmedia.com","yahoo.com","zeotap.com"];function Uo(e){return{w:parseInt(e[0]),h:parseInt(e[1])}}function Bo(e){return Object(w.isArray)(e)&&2===e.length&&!Object(w.isArray)(e[0])?[Uo(e)]:e.map(Uo)}function No(e){var t;return Object(w.deepAccess)(e,"params.pubId")?t=!0:Object(w.deepAccess)(e,"params.dcn")&&Object(w.deepAccess)(e,"params.pos")&&(t=!1),t}function qo(){var e=_.b.getConfig("yahoossp.mode");return void 0===(e=e?e.toLowerCase():void 0)||e===x.b?x.b:e===x.d?x.d:"all"===e?"*":void 0}function zo(e){var t=qo(),t={currency:Object(w.deepAccess)(e,"params.bidOverride.cur")||"USD",mediaType:t,size:"*"};return!!Object(w.isFn)(e.getFloor)&&e.getFloor(t)}function U(e,t,r,n){var i,a=Object(T.default)({},n);for(i in r)switch(e){case"string":-1!==t.indexOf(i)&&Object(w.isStr)(r[i])&&(a[i]=r[i]);break;case"number":-1!==t.indexOf(i)&&Object(w.isNumber)(r[i])&&(a[i]=r[i]);break;case"array":-1!==t.indexOf(i)&&Object(w.isArray)(r[i])&&(a[i]=r[i]);break;case"object":-1!==t.indexOf(i)&&Object(w.isPlainObject)(r[i])&&(a[i]=r[i]);break;case"objectAllKeys":Object(w.isPlainObject)(r)&&(a[i]=r[i])}return a}function Mo(e){var t=_.b.getConfig("yahoossp.ttl");return t=t||Object(w.deepAccess)(e,"params.ttl"),Object(w.isNumber)(t)&&0<t&&t<3600?t:300}function Fo(e){return Object(w.isStr)(e)&&0<e.length}function Vo(e,t){var r,n,i,a,o,s,d;if(e)return e={id:Object(w.generateUUID)(),cur:[zo(e).currency||Object(w.deepAccess)(t,"params.bidOverride.cur")||"USD"],imp:[],site:{page:Object(w.deepAccess)(e,"refererInfo.referer")},device:{dnt:0,ua:navigator.userAgent,ip:Object(w.deepAccess)(t,"params.bidOverride.device.ip")||Object(w.deepAccess)(t,"params.ext.ip")||void 0},regs:{ext:{us_privacy:e.uspConsent||"",gdpr:e.gdprConsent&&e.gdprConsent.gdprApplies?1:0}},source:{ext:{hb:1,adapterver:"1.0.1",prebidver:"5.20.2",integration:{name:"prebid.js",ver:"5.20.2"}},fd:1},user:{ext:{consent:e.gdprConsent&&e.gdprConsent.gdprApplies?e.gdprConsent.consentString:"",eids:(e=t,Object(w.isArray)(Object(w.deepAccess)(e,"userIdAsEids"))?e.userIdAsEids.filter(function(e){return-1!==Do.indexOf(e.source)}):[])}}},!0===No(t)?(e.site.publisher={id:t.params.pubId},(Object(w.deepAccess)(t,"params.bidOverride.site.id")||Object(w.deepAccess)(t,"params.siteId"))&&(e.site.id=Object(w.deepAccess)(t,"params.bidOverride.site.id")||t.params.siteId)):e.site.id=t.params.dcn,_.b.getConfig("ortb2")&&(r=e,n=_.b.getConfig("ortb2"),i=Object(w.deepAccess)(n,"site")||void 0,a=Object(w.deepAccess)(i,"content")||void 0,o=Object(w.deepAccess)(i,"content.data")||void 0,s=Object(w.deepAccess)(n,"app.content")||void 0,d=Object(w.deepAccess)(n,"app.content.data")||void 0,n=Object(w.deepAccess)(n,"user")||void 0,i&&Object(w.isPlainObject)(i)&&(r.site=U("string",["name","domain","page","ref","keywords","search"],i,r.site),r.site=U("array",["cat","sectioncat","pagecat"],i,r.site),r.site=U("object",["ext"],i,r.site)),a&&Object(w.isPlainObject)(a)&&(r.site.content=U("string",["id","title","series","season","genre","contentrating","language"],a,r.site.content),r.site.content=U("number",["episode","prodq","context","livestream","len"],a,r.site.content),r.site.content=U("array",["cat"],a,r.site.content),r.site.content=U("object",["ext"],a,r.site.content),o&&Object(w.isArray)(o)&&o.every(function(e){var t=U("string",["id","name"],e,{});t=U("array",["segment"],e,t),t=U("object",["ext"],e,t),r.site.content.data=[],r.site.content.data.push(t)})),s&&Object(w.isPlainObject)(s)&&d&&Object(w.isArray)(d)&&d.every(function(e){var t=U("string",["id","name"],e,{});t=U("array",["segment"],e,t),t=U("object",["ext"],e,t),r.app={content:{data:[]}},r.app.content.data.push(t)}),n&&Object(w.isPlainObject)(n)&&(r.user=U("string",["id","buyeruid","gender","keywords","customdata"],n,r.user),r.user=U("number",["yob"],n,r.user),r.user=U("array",["data"],n,r.user),r.user.ext=U("object",["ext"],n,r.user.ext)),e=r),Object(w.deepAccess)(t,"schain")&&(e.source.ext.schain=t.schain,e.source.ext.schain.nodes[0].rid=e.id),e}function Wo(e,t){var r=qo();if(t&&e){var n,i,a={id:e.bidId,secure:(n=e,Object(w.deepAccess)(n,"params.bidOverride.imp.secure")||"https:"===document.location.protocol?1:0),bidfloor:zo(e).floor||Object(w.deepAccess)(e,"params.bidOverride.imp.bidfloor")};if(!e.mediaTypes.banner||void 0!==r&&r!==x.b&&"*"!==r||(a.banner={mimes:e.mediaTypes.banner.mimes||["text/html","text/javascript","application/javascript","image/jpg"],format:Bo(e.sizes)},e.mediaTypes.banner.pos&&(a.banner.pos=e.mediaTypes.banner.pos)),!e.mediaTypes.video||r!==x.d&&"*"!==r||(n=Bo(e.mediaTypes.video.playerSize),a.video={mimes:Object(w.deepAccess)(e,"params.bidOverride.imp.video.mimes")||e.mediaTypes.video.mimes||["video/mp4","application/javascript"],w:Object(w.deepAccess)(e,"params.bidOverride.imp.video.w")||n[0].w,h:Object(w.deepAccess)(e,"params.bidOverride.imp.video.h")||n[0].h,maxbitrate:Object(w.deepAccess)(e,"params.bidOverride.imp.video.maxbitrate")||e.mediaTypes.video.maxbitrate||void 0,maxduration:Object(w.deepAccess)(e,"params.bidOverride.imp.video.maxduration")||e.mediaTypes.video.maxduration||void 0,minduration:Object(w.deepAccess)(e,"params.bidOverride.imp.video.minduration")||e.mediaTypes.video.minduration||void 0,api:Object(w.deepAccess)(e,"params.bidOverride.imp.video.api")||e.mediaTypes.video.api||[2],delivery:Object(w.deepAccess)(e,"params.bidOverride.imp.video.delivery")||e.mediaTypes.video.delivery||void 0,pos:Object(w.deepAccess)(e,"params.bidOverride.imp.video.pos")||e.mediaTypes.video.pos||void 0,playbackmethod:Object(w.deepAccess)(e,"params.bidOverride.imp.video.playbackmethod")||e.mediaTypes.video.playbackmethod||void 0,placement:Object(w.deepAccess)(e,"params.bidOverride.imp.video.placement")||e.mediaTypes.video.placement||void 0,linearity:Object(w.deepAccess)(e,"params.bidOverride.imp.video.linearity")||e.mediaTypes.video.linearity||1,protocols:Object(w.deepAccess)(e,"params.bidOverride.imp.video.protocols")||e.mediaTypes.video.protocols||[2,5],startdelay:Object(w.deepAccess)(e,"params.bidOverride.imp.video.startdelay")||e.mediaTypes.video.startdelay||0,rewarded:Object(w.deepAccess)(e,"params.bidOverride.imp.video.rewarded")||void 0}),a.ext={dfp_ad_unit_code:e.adUnitCode},Object(w.deepAccess)(e,"params.kvp")&&Object(w.isPlainObject)(e.params.kvp))for(var o in a.ext.kvs={},e.params.kvp)(Object(w.isStr)(e.params.kvp[o])||Object(w.isNumber)(e.params.kvp[o])||Object(w.isArray)(e.params.kvp[o])&&((i=e.params.kvp[o]).every(function(e){return Object(w.isStr)(e)})||i.every(function(e){return Object(w.isNumber)(e)})))&&(a.ext.kvs[o]=e.params.kvp[o]);Object(w.deepAccess)(e,"ortb2Imp.ext.data")&&Object(w.isPlainObject)(e.ortb2Imp.ext.data)&&(a.ext.data=e.ortb2Imp.ext.data),!1===No(e)?(a.tagid=e.params.pos,a.ext.pos=e.params.pos):Object(w.deepAccess)(e,"params.placementId")&&(a.tagid=e.params.placementId),t.imp.push(a)}}function Go(e){var t,r=e.payload,n=e.requestOptions,e=e.bidderRequest,i=No(e),a=_.b.getConfig("yahoossp.endpoint")||"https://c2shb.pubgw.yahoo.com/bidRequest";return!0===i&&(a=_.b.getConfig("yahoossp.endpoint")||"https://c2shb.pubgw.yahoo.com/admax/bid/partners/PBJS"),!0===Object(w.deepAccess)(e,"params.testing.e2etest")&&(Object(w.logInfo)("yahoossp adapter e2etest mode is active"),!(n.withCredentials=!1)===i?r.site.id="1234567":(t=qo(),r.site.id="8a969516017a7a396ec539d97f540011",r.imp.forEach(function(e){e.ext.e2eTestMode=!0,t===x.b?e.tagid="8a969978017a7aaabab4ab0bc01a0009":t===x.d?e.tagid="8a96958a017a7a57ac375d50c0c700cc":(Object(w.logWarn)('yahoossp adapter e2etest mode does not support yahoossp.mode="all". \n Please specify either "banner" or "video"'),Object(w.logWarn)("yahoossp adapter e2etest mode: Please make sure your adUnit matches the yahoossp.mode video or banner"))}))),Object(w.logWarn)("yahoossp adapter endpoint override enabled. Pointing requests to: ",a),{url:a,method:"POST",data:r,options:n,bidderRequest:e}}var Lo={code:"yahoossp",aliases:[],supportedMediaTypes:[x.b,x.d],isBidRequestValid:function(e){e=e.params;return!0===Object(w.deepAccess)(e,"testing.e2etest")||!(!Object(w.isPlainObject)(e)||!(Fo(e.pubId)||Fo(e.dcn)&&Fo(e.pos)))||(Object(w.logWarn)("yahoossp bidder params missing or incorrect, please pass object with either: dcn & pos OR pubId"),!1)},buildRequests:function(e,r){var n,t,i,a;if(!Object(w.isEmpty)(e)&&!Object(w.isEmpty)(r))return(n={contentType:"application/json",customHeaders:{"x-openrtb-version":"2.5"}}).withCredentials=!(r&&r.gdprConsent&&r.gdprConsent.gdprApplies&&2===r.gdprConsent.apiVersion),e=e,i=qo(),a=[],i===x.b?a=e.filter(function(e){return Object.keys(e.mediaTypes).some(function(e){return e===x.b})}):i===x.d?a=e.filter(function(e){return Object.keys(e.mediaTypes).some(function(e){return e===x.d})}):"*"===i&&(a=e.filter(function(e){return Object.keys(e.mediaTypes).some(function(e){return e===x.b||e===x.d})})),i=a,!0===_.b.getConfig("yahoossp.singleRequestMode")?(t=Vo(r,i[0]),i.forEach(function(e){Wo(e,t)}),Go({payload:t,requestOptions:n,bidderRequest:r})):i.map(function(e){var t=Vo(r,e);return Wo(e,t),Go({payload:t,requestOptions:n,bidderRequest:e})});Object(w.logWarn)('yahoossp Adapter: buildRequests called with either empty "validBidRequests" or "bidderRequest"')},interpretResponse:function(e,t){t.data;var i=t.bidderRequest,a=[];return e.body&&Array.isArray(e.body.seatbid)&&e.body.seatbid.forEach(function(e){var t;try{t=e.bid[0]}catch(e){return a}var r=t.ext&&t.ext.encp?t.ext.encp:t.price,r={adId:Object(w.deepAccess)(t,"adId")?t.adId:t.impid||t.crid,adUnitCode:i.adUnitCode,requestId:t.impid,bidderCode:Lo.code,cpm:r,width:t.w,height:t.h,creativeId:t.crid||0,currency:t.cur||"USD",dealId:t.dealid||null,netRevenue:!0,ttl:Mo(i),meta:{advertiserDomains:t.adomain}},n=-1!==(n=t.adm).indexOf("o2playerSettings")||-1!==n.indexOf("YAHOO.VideoPlatform.VideoPlayer")||-1!==n.indexOf("AdPlacement")?x.b:-1!==n.indexOf("VAST")?x.d:void 0;n===x.b?(r.mediaType=x.b,r.ad=t.adm,r.meta.mediaType=x.b):n===x.d&&(r.mediaType=x.d,r.meta.mediaType=x.d,r.vastXml=t.adm,t.nurl&&(r.vastUrl=t.nurl)),"outstream"!==Object(w.deepAccess)(i,"mediaTypes.video.context")||i.renderer||(r.renderer=function(t){var e=k.install({url:"https://cdn.vidible.tv/prod/hb-outstream-renderer/renderer.js",loaded:!1,adUnitCode:t.adUnitCode});try{e.setRender(function(e){setTimeout(function(){o2PlayerRender(e)},Object(w.deepAccess)(t,"params.testing.renderer.setTimeout")||700)})}catch(t){Object(w.logWarn)("yahoossp renderer error: setRender() failed",t)}return e}(i)||void 0),a.push(r)}),a},getUserSyncs:function(e,t,r,n){var i,a,o,s,t=!Object(w.isEmpty)(t)&&t[0].body;return t&&t.ext&&t.ext.pixels?(i=e,e=t.ext.pixels,a=/\w*(?=\s)/,o=/src=("|')(.*?)\1/,s=[],(e=e&&e.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi))&&e.forEach(function(e){var t=e.match(a)[0],e=e.match(o)[2];t&&e&&(t="img"===t.toLowerCase()?"image":"iframe",!i.iframeEnabled&&"iframe"==t||!i.pixelEnabled&&"image"==t||s.push({type:t,url:e}))}),s):[]}};Object(j.d)(Lo);var Ho=Lo.code;function Ko(e,t){e.engine.setConfig({yahoossp:{mode:"video"}});var r={pubId:""+t.pubid},n=t.siteId,n=(n&&(r.siteId=""+n),t.id),t=(n&&(r.placementId=""+n),e.settings.floorPriceCents);return void 0!==t&&(r.bidOverride={imp:{bidfloor:t/100}}),{bidder:Ho,params:r}}function Yo(e){return e&&e.pubid}(e={})[["Adtelligent"]]=N,e[["AppNexus"]]=q,e[["DistrictM"]]=z,e[["EMX"]]=M,e[["IndexExchange"]]=V,e[["MediaNet"]]=W,e[["MediaGrid"]]=F,e[["OneVideo"]]=G,e[["OpenX"]]=L,e[["PubMatic"]]=H,e[["Rubicon"]]=K,e[["SmartAdServer"]]=Y,e[["Sonobi"]]=J,e[["SpotX"]]=X,e[["SynacorMedia"]]=Q,e[["Unruly"]]=$,e[["VideoByte"]]=Z,e[["YahooSSP"]]=ee;var Jo=e,Xo=function(e){e=Tn[e.toLowerCase()],e=Jo[e];if(e)return e.code};function Qo(e,t,r,n){void 0===n&&(n={});var i=e.createElement(t);return i.appendChild(e.createCDATASection(r)),Object.keys(n).forEach(function(e){i.setAttribute(e,n[e])}),i}function $o(e,t){return e===v.GRANULARITY_OPTIONS.DENSE?t.pbDg:e===v.GRANULARITY_OPTIONS.LOW?t.pbLg:e===v.GRANULARITY_OPTIONS.MEDIUM?t.pbMg:e===v.GRANULARITY_OPTIONS.HIGH?t.pbHg:e===v.GRANULARITY_OPTIONS.CUSTOM?t.pbCg:t.pbAg}function Zo(e){if("start"===e||"0%"===e||!e||"pre"===e||"00:00:00"===e)return 0;if("end"===e||"100%"===e||"post"===e)return-2;if("string"==typeof e&&0<=e.indexOf("%"))return-1;e=parseInt(e);return 0<=e?e:-1}function es(e){return"jwp"===e||"jwpdfp"===e||"jwpspotx"===e}var ts=Date.now||function(){return(new Date).getTime()};var rs=v.EVENTS.AUCTION_INIT,ns=v.EVENTS.BID_ADJUSTMENT,is=v.EVENTS.BID_REQUESTED,as=v.EVENTS.BID_RESPONSE,os=v.EVENTS.BID_TIMEOUT,ss=v.EVENTS.NO_BID,ds=v.EVENTS.TCF2_ENFORCEMENT,cs=((t=ps.prototype).init=function(){var a=this,e=this.player,t=this.engine,r=this.params,o=this._getContent(),n=function(e){if(e&&e.length)return{name:"jwplayer",ext:{segtax:502},segment:e.reduce(function(e,t){return e.push({id:t,value:t}),e},[])}}(r.jwpseg),i=[e.getWidth(),e.getHeight()],s=this._getOrtbVideoParams(e,r,i),r=this.urlParts=this.utils.getURLParts(),r={publisherDomain:r.domain,pageUrl:r.url},n=function(e,t){var r;if(e||t)return r={},e&&(r.id=e),t&&(r.data=[t]),{site:{content:r}}}(o.id,n),n=(n&&(r.ortb2=n),t.setConfig(r),e.getPlugin("jwpsrv")),r=(n&&n.getTrackingPixelURLs&&(this.trackingPixelURLs=n.getTrackingPixelURLs()),this.bidStateMap={},this.bidderConfigs.reduce(function(e,t){var r=t.name,n=Jo[r],r=n?n.code:r,i={bidder:r};return n&&n.validate(t)?e.push(n.generate(a,t,o,s)):(i.result="invalid",i.timeForBidResponse=0),a.bidStateMap[r]=Object(T.default)({},t),a.updateBid(r,i),e},[]));t.addAdUnits({code:this.id,sizes:i,bids:r,mediaTypes:{video:s}})},t._getContent=function(){var e=this.player.getPlaylistItem(),e=e&&e.mediaid;return{id:e=e?"jw_"+e:""}},t._getOrtbVideoParams=function(e,t,r){var n,i={context:"instream",playerSize:r,mimes:(void 0===(r=Sn)&&(r=[]),n=document.createElement("video"),r.filter(function(e){return n.canPlayType(e)}).concat("application/javascript")),protocols:[2,3,7,5,6,8],playbackmethod:[(i=(r=e.getConfig()||{}).autoplay,a=r.mute,r=r.autoplayAdsMuted,i?a||r?2:1:3)],api:[2],startdelay:Zo(t.offset),placement:t.placement,linearity:1,minduration:3,maxduration:300},a=t.adClient,r=(void 0!==window.OmidSessionClient&&"vast"===a&&i.api.push(7),e.getFullscreen()&&(i.pos=7),t.skipoffset);return void 0!==r&&(i.skip=(a=0<=r)?1:0,a&&(i.skipmin=r+2,i.skipafter=r)),i},t.getEventObject=function(){var e=this.settings,t=e.floorPriceCents,r=e.floorPriceCurrency,e=e.mediationLayerAdServer,n=this.bidStateMap,r={bidsVersion:"5.6.1",mediationLayerAdServer:e,bidders:Object.keys(n).map(function(e){return Object(T.default)({},n[e])}),bidTimeout:this.engine.getConfig("bidderTimeout"),floorPriceCurrency:r},i=this.tcData,i=(i&&(r.tcData=i),"jwp"!==e&&"jwpdfp"!==e||(r.floorPriceCents=t),r.bidders.reduce(function(e,t){return t.timeForVPBCache&&(e.total+=t.timeForVPBCache,e.count+=1),e},{total:0,count:0}));return i.count&&(r.timeForVPBCache=i.total/i.count),r},t._auctionStartHandler=function(e){e=e.timestamp;this.auctionStart=e},t._bidAdjustmentHandler=function(e){var t,r,n,i,a,o;e.adUnitCode===this.id&&(t=e.cpm,r=e.originalCpm,t={priceInCents:100*t,grossPriceInCents:parseFloat(r)!==parseFloat(t)?100*r:void 0,timeForBidResponse:e.timeToRespond},r=e.bidder,e.videoCacheKey||(e.meta=e.meta||{},i=this.player,n=this.settings,this.hasWinner=this.hasWinner||t.priceInCents>=n.floorPriceCents&&es(n.mediationLayerAdServer),this.hasWinner?(e.meta.vastUrl=e.vastUrl,e.vastUrl=e.videoCacheKey=!0):(n=t.cacheKey=e.customCacheKey=e.customCacheKey||i.utils.genId(12),e.meta.vpbCacheStart=ts(),i=e.vastXml||'\n<VAST version="4.0">\n    <Ad id="'+n+'">\n        <Wrapper>\n            <AdSystem version="5.6.1">JWP</AdSystem>\n            <VASTAdTagURI><![CDATA['+e.vastUrl+"]]></VASTAdTagURI>\n        </Wrapper>\n    </Ad>\n</VAST>\n",o=(o=this.bidStateMap[r])?o.name:r,a=(o=this.getTrackingPings(o,n)).impressionPing,o=o.errorPing,e.vastXml=this.appendPings(i,n,a,o))),this.updateBid(r,t))},t.getTrackingPings=function(e,t){var r=this.trackingPixelURLs;if(!r)return{};var n=r.impression,r=r.error,t=this.getQueryParam("vck",t)+this.getQueryParam("vcb",e);return{impressionPing:this.getPingWithParams(n,t),errorPing:this.getPingWithParams(r,t)}},t.getPingWithParams=function(e,t){if(e)return e+t},t.getQueryParam=function(e,t){return"&"+e+"="+t},t._bidRequestedHandler=function(e){var t,r,n,i,a=this.engine,o=e.refererInfo,e=e.gdprConsent,s=this.urlParts.url,o=(o&&s&&(o.referer=s),e&&e.vendorData);o&&(s=o.cmpId,e=o.cmpStatus,t=o.cmpVersion,r=o.eventStatus,n=o.gdprApplies,i=o.isServiceSpecific,o=o.useNonStandardStacks,this.tcData={cmpId:s,cmpStatus:e,cmpVersion:t,eventStatus:r,gdprApplies:n,isServiceSpecific:i,useNonStandardStacks:o}),a.offEvent(is,this._bidRequestedHandler)},t._bidResponseHandler=function(e){var t,r,n;e.adUnitCode===this.id&&(t={dealId:e.dealId,priceCurrency:e.currency,result:"bid",requestId:e.requestId},(r=e.meta&&e.meta.vpbCacheStart)&&(n=ts()-r,t.timeForBidResponse=e.timeToRespond+n,t.timeForVPBCache=n),this.updateBid(e.bidder,t,r))},t._bidTimeoutHandler=function(e){var t=this,r=ts()-this.auctionStart;e.forEach(function(e){e.adUnitCode===t.id&&t.updateBid(e.bidder,{result:"timeout",timeForBidResponse:r})})},t._tcf2EnforcementHandler=function(e){var t=this;e.biddersBlocked.forEach(function(e){return t.updateBid(e,{result:"blocked"})})},t._noBidHandler=function(e){var t;e.adUnitCode===this.id&&(t=ts()-this.auctionStart,this.updateBid(e.bidder,{result:"noBid",timeForBidResponse:t}))},t.start=function(){var n=this,i=this.engine,e=new Promise(function(t){i.onEvent(rs,n._auctionStartHandler),i.onEvent(is,n._bidRequestedHandler),i.onEvent(ns,n._bidAdjustmentHandler),i.onEvent(as,n._bidResponseHandler),i.onEvent(os,n._bidTimeoutHandler),i.onEvent(ds,n._tcf2EnforcementHandler),i.onEvent(ss,n._noBidHandler);var r=n.id;i.requestBids({adUnitCodes:[r],bidsBackHandler:function(e){e=e&&e[r]||{};t(e.bids)}})});return Promise.race([e,this._auctionAborted]).then(function(e){return i.offEvent(rs,n._auctionStartHandler),i.offEvent(is,n._bidRequestedHandler),i.offEvent(ns,n._bidAdjustmentHandler),i.offEvent(as,n._bidResponseHandler),i.offEvent(os,n._bidTimeoutHandler),i.offEvent(ds,n._tcf2EnforcementHandler),i.offEvent(ss,n._noBidHandler),n.auctionEndHandler(e)}).then(function(e){return{result:e}})},t.auctionEndHandler=function(e){void 0===e&&(e=[]);var r=ts()-this.auctionStart,t=this.engine,n=this.id,i=this.settings,a=i.floorPriceCents,i=i.mediationLayerAdServer,o=es(i);this.updateBids(e,{result:"bid"}),this.updateStateForAllBids(function(e){var t=e.result,e=e.cacheKey,t={result:"error",code:!t&&e?599:void 0,timeForBidResponse:r};return o&&(t.winner=!1),t});var s,d=t.getHighestCpmBids(n),d=d&&d.length&&d[0];return o&&d&&100*d.cpm>=a?(this.updateBid(d.bidder,{winner:!0},!0),a=d.meta&&d.meta.hasOwnProperty("vastUrl"),{adm:d.vastXml,tag:(a&&d.meta?d.meta:d).vastUrl}):!d||"dfp"!==i&&"jwpdfp"!==i?null:(a=this.params,this.updateBids(e,function(e){return{custParams:e.adserverTargeting}}),i={adUnit:(d=t.adUnits,s=n,d.filter(function(e){return e.code===s})[0]),url:a.tag},(d=(e=a.jwpseg)&&e.length?e.reduce(function(e,t){t-=8e7;return 20<=t&&t<=90&&e.push(t),e},[]):[]).length&&(i.params={cust_params:{hb_jwvb:d.toString()}}),{tag:t.adServers.dfp.buildVideoUrl(i),custParams:t.getAdserverTargetingForAdUnitCode(n)})},t.appendPings=function(e,t,r,n){if(!r||!n)return e;var i=this.player.utils.parseXML(e);if(!i)return e;for(var a=i.querySelectorAll("InLine,Wrapper"),o=0;o<a.length;o+=1)a[o].appendChild(Qo(i,"Impression",r,{id:t})),a[o].appendChild(Qo(i,"Error",n));return(e=i).outerHTML||(new XMLSerializer).serializeToString(e)},t.updateBid=function(e,t,r,n){void 0===r&&(r=!1);n="function"==typeof(t=void 0===t?{}:t)?t(n):t,n.result&&void 0===n.code&&(n.code=Cn[n.result]),t=this.bidStateMap[e];t?Object(T.default)(t,r?n:Object(T.default)({},n,t)):this.bidStateMap[e]=Object(T.default)({name:e,bidder:e,external:!0},n)},t.updateStateForAllBids=function(t){var r=this,n=this.bidStateMap;Object.keys(n).forEach(function(e){r.updateBid(e,t,!1,n[e])})},t.updateBids=function(e,t,r){var n=this;e.forEach(function(e){return n.updateBid(e.bidder,t,r,e)})},t.stop=function(){this._abortAuction()},t.timeout=function(){},ps),us=function(r,n){var e=(n=void 0===n?{}:n).settings||{},t=e.buckets,i=e.bidTimeout,a=e.sendAllBids,e=e.consentManagement,t=Array.isArray(t)&&t.length?t:[{increment:.01,max:100}],i=void 0===i?3e3:Math.max(i,2e3),o=function(e,t){if(e&&t)return(t=new t(e))&&t.token&&t.token()}(r.getConfig().key,r.utils.key),i={bidderTimeout:i,cache:{url:"https://vpb-cache.jwplayer.com/cache",ignoreBidderCacheKey:!0},debug:!1,priceGranularity:{buckets:t.map(function(e){return Object(T.default)({increment:.01,max:1/0},e)})},userSync:{filterSettings:{all:{bidders:"*",filter:"include"}},userIds:[{name:"uid2"}],syncDelay:1e3},s2sConfig:{accountId:o,bidders:_n,timeout:2500,enabled:!0,endpoint:En+"openrtb2/auction",syncEndpoint:En+"cookie_sync"},targetingControls:{allowTargetingKeys:["BIDDER","AD_ID","PRICE_BUCKET","SIZE","DEAL","SOURCE","FORMAT","UUID","CACHE_ID","CACHE_HOST","ADOMAIN"]}},t=(void 0!==a&&(i.enableSendAllBids=a),function(){try{return null!==(t=document.documentElement).getAttribute("⚡")||null!==t.getAttribute("amp")||(e=document.location.search,/isAMP=true/.test(e))}catch(e){return!1}var e,t}()),s=(t&&(i.ortb2={site:{ext:{amp:1}}}),void 0!==e&&0<Object.keys(e).length&&!t&&((o=(o=e).gdpr)&&(o=o.rules)&&0!==o.length&&o.forEach(function(e){var t=e.vendorExceptions;t&&(e.vendorExceptions=t.map(function(e){return Xo(e)||e}))}),i.consentManagement=e),d.setConfig(i),d.processQueue(),{});return{createNewBid:function(e,t){e=new cs(r,d,n,e,t);return s[e.id]=e},getBid:function(e){return s[e]},getEngine:function(){return d},version:"5.6.1"}};function ps(e,t,r,n,i){var a,o,s,d,c=this;this.id=n.id||e.utils.genId(12),this.player=e,this.engine=t,this.settings=(e=r.settings||{},s=(e=Object(T.default)({},e)).floorPriceCurrency,a=e.mediationLayerAdServer,o=e.floorPriceCents,wn[a]||(e.mediationLayerAdServer=a="jwp"),"jwpspotx"===a?o=1:"jwp"!==a&&"jwpdfp"!==a||(o=+o||0),e.floorPriceCents=o,s?s=s.toUpperCase():void 0!==o&&(s="USD"),e.floorPriceCurrency=s,e),this.bidderConfigs=(a=this.settings,o=r.bidders||[],s=a.floorPriceCents,es(d=a.mediationLayerAdServer)&&isNaN(parseFloat(s))?[]:o.filter(function(e){e=e.name,e=Tn[e.toLowerCase()];return-1!==wn[d].indexOf(e)}).map(function(e){var t=Tn[e.name.toLowerCase()];return Object(T.default)(e,e.custom_params,{name:t})})),this.params=n,this.utils=i,this.tcData=null,this.bidStateMap=this.bidderConfigs.reduce(function(e,t){return e[t.name]=Object(T.default)({},t),e},{}),this.auctionStart=null,this.hasWinner="jwp"===this.settings.mediationLayerAdServer,this.trackingPixelUrls=null,this._auctionStartHandler=this._auctionStartHandler.bind(this),this._bidAdjustmentHandler=this._bidAdjustmentHandler.bind(this),this._bidRequestedHandler=this._bidRequestedHandler.bind(this),this._bidResponseHandler=this._bidResponseHandler.bind(this),this._bidTimeoutHandler=this._bidTimeoutHandler.bind(this),this._tcf2EnforcementHandler=this._tcf2EnforcementHandler.bind(this),this._noBidHandler=this._noBidHandler.bind(this),this._auctionAborted=new Promise(function(e){c._abortAuction=e}).then(function(){return c.updateStateForAllBids({result:"abort"}),t.getBidResponsesForAdUnitCode(c.id).bids})}(window.jwplayerPluginJsonp||window.jwplayer().registerPlugin)("bidding","8.1",us)}]);
