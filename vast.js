!function(){"use strict";var R="vast",t="time",s="paused",x="playing",T="fullscreen",_="volume",I="mute",i="viewable",C="resize",S="adClick",q="adComplete",o="adError",a="adImpression",F="adItem",d="adLoadedXML",U="mediaLoaded",Q="adMeta",X="adPause",W="adPlay",z="adPlayComplete",h="adPodError",r="adSkipped",G="adStarted",J="clickthrough",n="external",$=n,Y="click",K="play",Z="error",ee=[a,o,h],te=[G,q,a,S,r,o,W,X,Q],ie="instream",re="article",ne=((e={})[[ie]]=1,e[["banner"]]=2,e[[re]]=3,e[["feed"]]=4,e[["floating"]]=5,e[["interstitial"]]=5,e[["slider"]]=5,e);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i,r=arguments[t];for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}(e=se.prototype).addCompanion=function(e,t){if(this.div=e,this.elem=document.getElementById(this.div.id),!this.elem)return!1;for(var i=0;i<t.length;i++)if(this.fitsDiv(t[i]))return this.placeCompanion(t[i]),!0;return!1},e.removeCompanion=function(){this.elem.innerHTML=""},e.sendPings=function(e){(e=e.creativeView)&&(e.forEach(function(e){(new Image).src=e}),"function"==typeof this.debugTrackFn&&this.debugTrackFn({type:"companion",data:{trackers:e}}))},e.placeCompanion=function(e){var t,i=this;if(this.removeCompanion(),"html"===e.type)return(t=document.createElement("div")).innerHTML=e.source,(r=t.getElementsByTagName("script")).length&&r.forEach(function(e){new i.utils.scriptloader(e.src).load(),e.parentElement.removeChild(e)}),this.elem.appendChild(t),void this.sendPings(e.trackers);if("iframe"===e.type)return(r=document.createElement("iframe")).height=this.div.height,r.width=this.div.width,r.src=e.source,r.scrolling="no",r.style.border="none",r.marginWidth=0,r.marginHeight=0,this.sendPings(e.trackers),this.elem.innerHTML="",void this.elem.appendChild(r);if("application/x-shockwave-flash"===e.type)return(t=document.createElement("object")).setAttribute("type","application/x-shockwave-flash"),t.setAttribute("data",e.source),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("tabindex",0),l(t,"allowfullscreen","true"),l(t,"allowscriptaccess","always"),l(t,"seamlesstabbing","true"),l(t,"wmode","opaque"),this.elem.appendChild(t),void this.sendPings(e.trackers);var r=new Image;r.src=e.source,e.clickthrough&&(r.onclick=function(){i.utils.openLink(e.clickthrough,"_blank",{rel:"noreferrer"})}),this.elem.innerHTML="",this.elem.appendChild(r),this.sendPings(e.trackers)},e.fitsDiv=function(e){return e.width===this.div.width&&e.height===this.div.height};var ae=se;function se(e,t,i){this.debugTrackFn=e,this.div=null,this.elem=null,this.environment=t,this.utils=i}function l(e,t,i){var r=document.createElement("param");r.setAttribute("name",t),r.setAttribute("value",i),e.appendChild(r)}var u=document.createElement("img"),c=document.createElement("img"),oe=(u.src=c.src='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><circle cx="32" cy="32" r="32" fill="%23191919"/><line stroke="%23CCC" stroke-width="6" x1="32" y1="20" x2="32" y2="44"/><line stroke="%23CCC" stroke-width="6" x1="20" y1="32" x2="44" y2="32"/></svg>',u.className="jw-vast-nonlinear-open-button",c.className="jw-vast-nonlinear-close-button",(e=ue.prototype).onLoaded=function(){var e;clearTimeout(this.loadTimer),0!==this.banner.naturalWidth?(this.removeBannerEventListeners(),(e=this.player.utils).addClass(this.div,"jw-vast-nonlinear-active"),e.style(c,{bottom:this.banner.height-8,left:this.banner.width},!0),new e.UI(this.banner).on("click",this.sendClick.bind(this)),c.onclick=c.ontouchstart=this.collapse.bind(this),u.onclick=u.ontouchstart=this.expand.bind(this),this.trigger(K)):this.imageLoadError()},e.imageLoadError=function(){clearTimeout(this.loadTimer),this.trigger(Z),this.removeBanner()},e.sendClick=function(){this.trigger(Y)},e.collapse=function(e){var t=this;e.preventDefault(),this.player.utils.addClass(this.div,"jw-vast-nonlinear-collapsed"),this.animationTimer=setTimeout(function(){t.remove(t.banner),t.remove(c),t.animationTimer=-1},250)},e.expand=function(e){-1===this.animationTimer&&(e.preventDefault(),this.player.utils.removeClass(this.div,"jw-vast-nonlinear-collapsed"),this.div.appendChild(this.banner),this.div.appendChild(c))},e.remove=function(e){this.div.contains(e)&&this.div.removeChild(e)},e.removeBannerEventListeners=function(){this.banner.onload=this.banner.onerror=null},e.removeBanner=function(){this.removeBannerEventListeners(),this.remove(this.banner)},e.removeListeners=function(){clearTimeout(this.loadTimer),clearTimeout(this.animationTimer),c.onclick=c.ontouchstart=u.onclick=u.ontouchstart=null,this.off(),this.removeBannerEventListeners()},e.stop=function(){this.player.utils.removeClass(this.div,"jw-vast-nonlinear-active jw-vast-nonlinear-collapsed"),this.removeBanner(),this.remove(c),this.remove(u)},ue),le=((e=he.prototype).playAd=function(e,t,i,r,n){this.minDur=this.player.utils.seconds(i),this.adTag=r,this.static&&(this.static.removeListeners(),this.static.stop()),this.player.utils.addClass(this.div,"jw-vast-nonlinear"),this.static=new oe(this.player,e,t,this.div,n),this.static.on(K,this.startAd,this),this.static.on(Y,this.clickHandler,this),this.static.on(Z,this.errorHandler,this)},e.dispatchTime=function(e){this.trigger(t,e)},e.startAd=function(){this.startTime=this.player.getPosition(),0<this.minDur&&(0===this.startTime?this.on(t,this.startTimingAd,this):this.on(t,this.timeAd,this)),this.sendEvent(K)},e.startTimingAd=function(e){this.startTime=e.position,this.off(t,this.startTimingAd,this),this.on(t,this.timeAd,this)},e.timeAd=function(e){e.position-this.startTime>this.minDur&&(this.off(t,this.timeAd,this),this.stop())},e.clickHandler=function(){this.sendEvent(Y)},e.errorHandler=function(){this.sendEvent(Z)},e.sendEvent=function(e,t){(t=t||{}).tag=t.tag||this.adTag,this.trigger(e,t)},e.removeEvents=function(){this.off()},e.getState=function(){return x},e.stop=function(){this.startTime&&this.static&&(this.startTime=0,this.minDur=0,this.off(t,this.startTimingAd,this),this.off(t,this.timeAd,this),this.static.removeListeners(),this.static.stop(),this.sendEvent("complete"))},e.pause=function(){},he),de=/^(https?:\/\/).*.(?:ampproject.org|bing-amp.com)\/(?:.\/)*(.*)\/amp.*$/;function he(e,t){this.player=e,this.div=t,this.startTime=0,this.minDur=0,this.environment=e.getEnvironment(),M(this,e.Events),this.type="static",e.on("time",this.dispatchTime,this)}function ue(e,t,i,r,n){this.player=e,this.environment=e.getEnvironment(),this.div=r,this.staticURL=t,this.clickURL=i,this.loadTimer=-1,this.animationTimer=-1,this.banner=null,M(this,e.Events),this.banner=document.createElement("img"),this.banner.className="jw-banner",this.banner.id=this.player.id+"_vast_static",this.div.appendChild(u),this.div.appendChild(this.banner),this.div.appendChild(c),this.loadTimer=setTimeout(this.imageLoadError.bind(this),n),this.banner.onerror=this.imageLoadError.bind(this),this.banner.onload=this.onLoaded.bind(this),this.banner.src=this.staticURL}var ce=new RegExp(/^[^/]*:\/\/\/?([^\/]*)/);var pe=new RegExp(/^[^:\/?#]+:?\/\/[^\/?#]+/);function me(){var e,t,i=null!==document.referrer.match(pe)?(i=(e=document.referrer).match(de))&&1<i.length?""+i[1]+i[2]:e:"";if(window.top===window.self)return{url:document.location.href,domain:document.domain,referrer:i};try{return{url:window.top.location.href,domain:window.top.document.domain,referrer:i}}catch(e){}return{url:i,domain:(t=(t=i).match(ce))&&1<t.length?t[1]:"",referrer:""}}function fe(e){e=e.advertising;if(e&&e.placement){var t=e.placement.toLowerCase();if(ne[t])return ne[t]}return ne[e&&e.outstream?re:ie]}function p(e,t,i,r){var e=O(e,i,r),n=t.adErrorCode||60900;return M(e,{message:t.message,code:100<=t.code&&t.code<=1008?t.code:900,adErrorCode:n}),10402===n||50004===n||50400===n?e.timeout=(i||r).creativeTimeout:11007!==n&&10301!==n&&60006!==n||(e.timeout=(i||r).requestTimeout),void 0!==t.id&&(e.id=t.id),void 0!==t.sourceError&&(e.sourceError=t.sourceError),void 0!==t.tag&&(e.tag=t.tag),void 0!==t.vmap&&(e.vmap=t.vmap),e}function O(e,t,i){void 0===t&&(t=null),void 0===i&&(i={});var r={client:R};if(null===e)return r;var n=e.bidding,a=e.config,s=e.item,o=e.player,o=(e.isDestroyed()||(r.placement=fe(o.getConfig())),i.schedule);if(o)return M(r,{item:s,tag:o.getVMAP(),adbreaks:o.getAllAds().map(function(e){var t={type:e._type,offset:e._offSet};return e._vmap?t.vmap=e._vmap:t.adbreak=M({},e._adbreak),n&&(e=n.getBid(e.adPlayId))&&M(t,e.getEventObject()),t})});a.preloadAds&&(r.preloadAds=i.preload||t&&t._preload||!1),i.jwpseg&&(r.jwpseg=i.jwpseg),t&&(M(r,{adBreakId:(o=e.getAdIds(t,i)).adBreakId,adPlayId:a=o.adPlayId,offset:t._offSet}),n&&(o=n.getBid(a))&&M(r,o.getEventObject()));a=t&&(i.tag||t._currentTag);return a&&(M(r,{id:t._id,tag:a,adposition:t._position,sequence:t._adPodIndex+1,witem:t._waterfallIndex+1,wcount:t._adQueue?t._adQueue.length:1,adsystem:t.adsystem||""}),t.adServingId&&(r.adServingId=t.adServingId),void 0!==t.skipoffset&&(r.skipoffset=t.skipoffset),t.wrappedTags&&M(r,{wrapperAdSystem:t.wrapper||"",wrappedTags:t.wrappedTags.slice(1)}),t._adbreak&&(r.adschedule=t._adbreak,r.adschedule.offset=t._offSet)),t&&t.companions&&i.companions?r.companions=i.companions:t&&t.response?(o=e.params,M(r,{adtitle:t.adTitle||"",description:t.description||"",adId:t.adId||"",adVerifications:t.adVerifications||null,advertiser:t.advertiser||"",advertiserId:t.advertiserId||"",creativeId:t.creativeId||"",creativeAdId:t.creativeAdId||"",dealId:t.dealId||"",request:t.request,response:t.response,conditionalAd:t.conditionalAd,conditionalAdOptOut:o.conditionaladoptout,vastversion:t.vastversion,clickThroughUrl:t.clickthrough,duration:i.duration,linear:i.linear}),"boolean"==typeof t.mediaFileCompliance&&(r.mediaFileCompliance=t.mediaFileCompliance,t.nonComplianceReasons&&(r.nonComplianceReasons=t.nonComplianceReasons)),t.selectedMedia&&(r.mediafile={file:t.selectedMedia.file}),i.metadata&&(r.adMessage=o.dynamicMessage||"",t.companions&&(r.companions=t.companions),t.sequence&&(r.podMessage=o.podMessage||""),void 0!==t.skipoffset&&M(r,{skipMessage:o.skipMessage,skipText:o.skipText}))):r.item=s,r}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ve="vast",ye="googima",j="vmap",ke="cust_params=",Ae="adBreakIgnored",V="adError",Pe="__jwpseg__",we="instream",be="article",Ee=((e={})[[we]]=1,e[["banner"]]=2,e[[be]]=3,e[["feed"]]=4,e[["floating"]]=5,e[["interstitial"]]=5,e[["slider"]]=5,e),Te=new RegExp(/^[^/]*:\/\/\/?([^/]*)/);var _e=new RegExp(/^[^:/?#]+:?\/\/[^/?#]+/),Ie=/^(https?:\/\/).*.(?:ampproject.org|bing-amp.com)\/(?:.\/)*(.*)\/amp.*$/;function Ce(e){e=new RegExp("[?&]"+e+"=([^&]*)"),e=document.location.search.match(e);if(e)return decodeURIComponent(e[1])}function Se(t){return void 0===t&&(t=1e3),null===Re&&(Re=new Promise(function(i){var e=window.__tcfapi||xe("__tcfapi");if(e)return e("getTCData",2,function(e,t){i(!1!==t?{gdprApplies:e.gdprApplies,consentData:e.tcString,addtlConsent:e.addtlConsent}:null)});e=window.__cmp||xe("__cmp");if(e)return e("getConsentData",null,function(e,t){i(!1!==t?{gdprApplies:e.gdprApplies||e.isUserInEu,consentData:e.consentData}:null)});e=function(){if(Ce("isAMP")){var e=Ce("consentValue"),t=Ce("consentGdpr");if(e||t)return{gdprApplies:t,consentData:e}}}();return i(e||{gdprApplies:!1,consentData:""})}).then(function(e){return m=e?e:m})),Promise.race([Re,new Promise(function(e){setTimeout(e,t,m)})])}var Re=null,m={gdprApplies:!0,consentData:""},xe=function(s){var o=function(e){for(var t=window;t;){try{if(t.frames[e])break}catch(e){}t=t===window.top?null:t.parent}return t}(s+"Locator");return null!==o&&function(e,t,r,i){var n,a=f(),i=(window.addEventListener("message",function e(t){t=t?t.data:{};if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}var i=s+"Return";t[i]&&t[i].callId===a&&(removeEventListener("message",e),r(t[i].returnValue,t[i].success))},!1),(n={})[[s+"Call"]]=((e={command:e,callId:a,parameter:i})[[void 0!==i?"version":"parameter"]]=t,e),n);o.postMessage(JSON.stringify(i),"*")}},f=Date.now||function(){return(new Date).getTime()};function Me(e){e=e.advertising;if(e&&e.placement){var t=e.placement.toLowerCase();if(Ee[t])return Ee[t]}return Ee[e&&e.outstream?be:we]}function Oe(){var e,t,i=null!==document.referrer.match(_e)?(i=(e=document.referrer).match(Ie))&&1<i.length?""+i[1]+i[2]:e:"";if(window.top===window.self)return{url:document.location.href,domain:document.domain,referrer:i};try{return{url:window.top.location.href,domain:window.top.document.domain,referrer:i}}catch(e){}return{url:i,domain:(t=(t=i).match(Te))&&1<t.length?t[1]:"",referrer:""}}function Ve(e,t){var i,r=e.getPlugin("inference"),n=t.jwpseg_client_side,a=t.jwpseg||[];if(!n||!n.length||!r)return a;try{i=r.predict(n,t)}catch(e){return t.jwpseg||[]}r=Object.keys(i).filter(function(e){return i[e]}),t=a.filter(function(e){return-1===n.indexOf(e)});return[].concat(r,t)}function je(e,t,i){void 0===t&&(t=null),void 0===i&&(i={});var r={client:e.client},n=e.bidding,a=e.item,s=e.player;return e.isDestroyed()||M(r,{placement:Me(s.getConfig()),viewable:s.getViewable()}),i.jwpseg&&(r.jwpseg=i.jwpseg),t&&(M(r,{adBreakId:(s=e.getAdIds(t,i)).adBreakId,adPlayId:e=s.adPlayId,offset:t._offSet}),n&&(i=n.getBid(e))&&M(r,i.getEventObject())),r.item=a,r}function Be(e,t,i,r){return{client:r,message:e,adErrorCode:t,id:"-1",placement:Me(i),tag:""}}var Le=/^((https?:)?\/\/)?(secure)?pubads\.g\.doubleclick\.net\/gampad\/ads\?[\S]*$/;function He(r,e,t,i,n,a){if(void 0===a&&(a={}),!r)return Promise.resolve(r);h=t,u=(d=e).getConfig(),o=d.getPlaylistItem()===h;var s=M({playerHeight:d.getHeight()||u.height||"",playerWidth:d.getWidth()||u.width||"",itemDuration:o&&function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t}(d.getDuration(),3)||"",item:h,jwpseg:Ve(d,h),placement:Me(u),userAgent:navigator.userAgent},u.advertising?u.advertising.ampMacros:{}),o=Oe();-1!==r.indexOf(Pe)&&(a.jwpseg=s.jwpseg),r=A(r,"__random-number__",Math.random()*Math.pow(10,18)),r=A(r,"__timestamp__",(new Date).getTime()),r=A(r,"__page-url__",encodeURIComponent(s.pageUrl||o.url)),r=A(r,"__referrer__",encodeURIComponent(s.referrer||o.referrer)),r=A(r,"__player-height__",s.playerHeight),r=A(r,"__player-width__",s.playerWidth),r=A(r,"__item-duration__",s.itemDuration),r=A(r,Pe,s.jwpseg),r=A(r,"__domain__",encodeURIComponent(s.domain||o.domain)),r=A(r,"__placement__",s.placement),r=A(r,"__device-ua__",encodeURIComponent(s.userAgent)),r=n.companion?A(r,"__companion-div__",n.companion.id):A(r,"__companion-div__","");for(var l,d,h,u,c=Object.keys(s).filter(function(e){return-1!==e.indexOf("item")}),p=c.map(function(e){e=e.match(/item([\w]+?)(List)?$/);if(e)return e[1].toLowerCase()}),m=/__item-([\w-]+?)(-list)?__/g,f=r;null!==(l=m.exec(f));){var g=l[0],v=l[1],y=c[p.indexOf(v)],k="";(t.hasOwnProperty(v)&&"string"==typeof t[v]||y)&&(k=y?s[y]:t[v],y=!1===n.truncateMacros?4096:1e3,k.length>y&&(k=k.substring(0,y)),v=l[2]?",":null,k=k.split(v).map(encodeURIComponent)),r=A(r,g,k)}return i===ve&&(d=e.getConfig().autostart?1:0,h=e.getMute()?1:0,u=r,a=d,o=h,r=u=Le.test(u)?u+"&vpa="+a+"&vpmute="+o:u),i===ye&&t.title&&-1===r.indexOf("vid_t=")&&(e=t.title.substring(0,100).replace(/[^\x00-\x7F]/g,""),r+=(-1!==r.indexOf("?")?"&":"?")+"vid_t="+encodeURIComponent(e)),-1!==r.indexOf("__gdpr__")||-1!==r.indexOf("__gdpr_consent__")||-1!==r.indexOf("__addtl_consent__")?Se().then(function(e){var t=e.gdprApplies,i=e.consentData,e=e.addtlConsent;return r=A(r,"__gdpr__",t?1:0),r=A(r,"__addtl_consent__",e||""),A(r,"__gdpr_consent__",i||"")}).catch(function(){return r}):Promise.resolve(r)}function A(e,t,i){return e.replace(t,i)}function De(){}var e=Array.prototype,v=e.forEach,y=e.map;function Ne(e,t,i){if(L(e,"VMAP",j).length){var r=e,n=t,a=i,s=[],o=(D(L(r,"VMAP",j)[0],"version")||B(s,"VMAP Schema Error: version missing from VMAP tag","-1"),L(r,"AdBreak",j));o.length||Fe();for(var l,d,h,u,c=r.lookupNamespaceURI(j),p={},m=0;m<o.length;m++){var f={},g={},v=o[m],y=D(v,"timeOffset"),k=D(v,"breakId"),A=D(v,"breakType"),P=D(L(v,"AdSource",j)[0],"id"),w=L(v,"AdTagURI",j)[0],b=L(v,"VASTData",j)[0]||L(v,"VASTAdData",j)[0],E=D(w,"templateType"),w=N(w),T=(v=v,d="Tracking",h=j,void 0,u=[],(l=c)||v?u=v.getElementsByTagNameNS?v.getElementsByTagNameNS(l,d):v.getElementsByTagName(h+":"+d):u);if(A||B(s,"VMAP Schema Error: missing breakType on AdBreak",k),b||E||B(s,"VMAP Schema Error: missing templateType on AdBreak",k),y||B(s,"VMAP Schema Error: missing timeOffset on AdBreak",k),f._type=A,f._vmap={id:P,breakid:k,timeoffset:y},b)f._adXML=(l=H(b,"VAST")).ownerDocument instanceof Document?l.outerHTML||(new XMLSerializer).serializeToString(l):null;else{if("vast2"!==E&&"vast3"!==E&&"vast4"!==E)continue;f._adQueue=[w],f._waterfallIndex=0}var _=[];if(T)for(var I=0;I<T.length;I++){Xe(g,T[I]);var C=D(T[I],"event");_.push(C)}(_.indexOf("breakStart")<0||_.indexOf("breakEnd")<0||_.indexOf("error")<0)&&B(s,"Tracking events are missing breakStart, breakEnd, or error for AdBreak",k),f._trackers=g,f._type=A,y&&!p[y]?(p[y]=f,p[y]._pod=f._adQueue?[].concat(f._adQueue):[]):y&&p[y]&&f._adQueue&&(v=p[y]._pod).push.apply(v,f._adQueue)}return Object.keys(p).forEach(function(e){var t=p[e];switch(t._pod&&t._pod.length<=1&&delete t._pod,e){case"start":t._offSet="pre",n.setPreRoll(t);break;case"100%":case"end":t._offSet="post",n.setPostRoll(t);break;default:if(/^#/.test(e))break;/^\d\d?(?:\.\d+)?%$/.test(e)?t._offSet=e:t._offSet=a.seconds(e),n.addMidRoll(t)}}),n.preRoll||n.midRolls.length||n.postRoll||Fe(),n.sort(null,!0),s}if(L(e,"Playlist",j).length){var S=t,R=i,r=L(e,"Playlist",j)[0],t=r.getElementsByTagName("Preroll")[0],i=r.getElementsByTagName("Postroll")[0],t=qe(t,"pre"),i=qe(i,"post");t&&S.setPreRoll(t),i&&S.setPostRoll(i);for(var x=r.getElementsByTagName("Midroll"),M=0;M<x.length;M++){var O=x[M],V=R.seconds(O.getAttribute("timeOffset")),O=qe(O,V);S.addMidRoll(O)}return[]}throw new Error("No VMAP tag in response")}function qe(e,t){if(!e)return null;var i=e.getElementsByTagName("Ad");if(!i.length)return null;var r={_offSet:t};if(1===i.length)r._adQueue=[i[0].textContent.trim()];else{r._pod=[];for(var n=0;n<i.length;n++)r._pod.push(i[n].textContent.trim())}return r}function B(e,t,i){e.push({message:t,code:1002,adErrorCode:70001,id:i})}function Fe(){var e=new Error("No AdBreaks in VMAP");throw e.adErrorCode=60005,e}(e=Qe.prototype).error=function(){return this._error},e.version=function(){return this._version},e.parse=function(t,i){var r=this,n=("VAST"===t.nodeName?e=t:(e=H(t,"VAST"))||(e=H(t,"VideoAdServingTemplate")),e||this.throwError(101,"Invalid VAST response"),"VideoAdServingTemplate"===e.tagName?1:parseFloat(D(e,"version")||0));this._version=n;var e,a=L(e,"Ad"),a=y.call(a,function(e){e=r.parseAd(n,e);return e.vastversion=n,e.response=t,e.request=i||null,e});return a.length||(e=L(e,"Error"),v.call(e,function(e){e=N(e).replace("[ERRORCODE]",303);(new Image).src=e})),a},e.parseAd=function(e,t,i){i=i||{};var r,s,n,a,o,l,d,h,u,c,p=H(t,"InLine"),m=H(t,"Wrapper"),p=p||m,f=H(p,"Advertiser"),g=H(p,"AdVerifications");return g&&(i.adVerifications=(g=L(g,"Verification"),s=[],v.call(g,function(e){var t=D(e,"vendor"),i=H(e,"JavaScriptResource"),r=H(e,"ExecutableResource"),n=N(H(e,"VerificationParameters")),e=L(H(e,"TrackingEvents"),"Tracking"),a={},t={vendor:t,verificationParameters:n,trackers:a};i&&(t.javaScriptResource={url:N(i),apiFramework:D(i,"apiFramework"),browserOptional:D(i,"browserOptional")}),r&&(t.executableResource={url:N(r),apiFramework:D(r,"apiFramework"),type:D(r,"type")}),v.call(e,function(e){Xe(a,e)}),s.push(t)}),s)),i.sequence=D(t,"sequence"),i.adId=D(t,"id"),i.adTitle=N(H(p,"AdTitle")),i.advertiser=N(f),i.advertiserId=D(f,"id"),i.description=N(H(p,"Description")),i.dealId=N(H(p,"DealId")),(!e||4.2<e||e<2)&&this.throwError(102,"Vast version not supported"),4<=e&&(i.conditionalAd=!!D(t,"conditionalAd")),p?(g=p,d=e,h=this.utils,f=L(H(g,"Creatives"),"Creative"),(c={trackers:u={}}).adServingId=N(H(g,"AdServingId")),c.adsystem=N(H(g,"AdSystem")),g=L(g,"Category"),c.categories=y.call(g,N),v.call(f,function(e){var o,t,i,r=H(e,"Linear"),n=H(e,"NonLinear"),a=L(H(e,"TrackingEvents"),"Tracking"),s=(4<=d&&(s=L(e,"UniversalAdId"),c.universalAdId=y.call(s,function(e){return{universalAdIdRegistry:D(e,"idRegistry")||"unknown",universalAdIdValue:N(e)||D(e,"idValue")||"unknown"}})),c.creativeId=D(e,"id"),c.creativeAdId=D(e,"adId"),r&&(c.linear=!0),(r||n)&&v.call(a,function(e){Xe(u,e)}),N(H(e,"AdParameters")));s&&(c.adParams=s),r?(a=H(r,"VideoClicks"),s=N(H(a,"ClickThrough")),a=L(a,"ClickTracking"),t=D(r,"skipoffset"),i=N(H(r,"Duration")),v.call(a,function(e){k(u,"click",N(e))}),i&&(c.duration=h.seconds(i)),s&&(c.clickthrough=s),void 0!==t&&(c.skipoffset=t),a=c,i=L(H(r,"MediaFiles"),"MediaFile"),s=a.media||[],a.media=s.concat(y.call(i,function(e){return{type:D(e,"type"),file:N(e),adType:D(e,"apiFramework")||"",width:parseInt(D(e,"width"),10)||0,height:parseInt(D(e,"height"),10)||0,bitrate:parseInt(D(e,"bitrate"),10)||null,maxBitrate:parseInt(D(e,"maxBitrate"),10)||null}}).filter(function(e){return e.file})),t=c,a=L(r,"Icon"),t.icons=Array.prototype.reduce.call(a,function(e,t){var i;if(r=H(t,"StaticResource"))i=D(r,"creativeType");else if(r=H(t,"IFrameResource"))i="iframe";else{if(!(r=H(t,"HTMLResource")))return e;i="html"}var r=N(r),n={},a=(n.iconClick=N(H(t,"IconClickTracking"))||null,n.iconView=N(H(t,"IconViewTracking"))||null,D(t,"xPosition").toLowerCase()),s=D(t,"yPosition").toLowerCase(),o={};return"left"===a||"right"===a?o[a]=0:o.left=parseInt(a,10)||0,"top"===s||"bottom"===s?o[s]=0:o.top=parseInt(s,10)||0,o.width=parseInt(D(t,"width"),10)||0,o.height=parseInt(D(t,"height"),10)||0,e.push({program:D(t,"program"),style:o,apiFramework:D(t,"apiFramework"),offset:D(t,"offset")||"00:00:00",duration:D(t,"duration")||null,clickThrough:N(H(t,"IconClickThrough")),trackers:n,resource:{resourceType:i,resourceSource:r}}),e},t.icons||[])):n?(i=N(H(n,"NonLinearClickThrough")),r=L(n,"NonLinearClickTracking"),v.call(r,function(e){k(u,"click",N(e))}),i&&(c.clickthrough=i),a=c,t=[],(r=H(n=e,"StaticResource"))&&!a.media&&(t.push({type:D(r,"creativeType"),file:N(r),adType:D(H(n,"NonLinear"),"apiFramework")||"static",minDuration:D(H(n,"NonLinear"),"minSuggestedDuration")||"00:00:00"}),a.media=t)):(r=c,n=L(H(e,"CompanionAds"),"Companion"),o=r.companions||[],v.call(n,function(e){var t,i,r=H(e,"StaticResource"),n=H(e,"IFrameResource"),a=H(e,"HTMLResource"),s={};if(r)t=D(r,"creativeType"),i=N(r);else if(n)t="iframe",i=N(n);else{if(!a)return;t="html",i=N(a)}r=L(H(e,"TrackingEvents"),"Tracking"),v.call(r,function(e){var t=D(e,"event");k(s,t,N(e))}),n=N(H(e,"CompanionClickThrough"));o.push({width:parseInt(D(e,"width"),10),height:parseInt(D(e,"height"),10),type:t,source:i,trackers:s,clickthrough:n})}),r.companions=o)}),We(p,"Impression",(r=c).trackers),We(p,"Error",r.trackers),We(p,"NotViewable",r.trackers),We(p,"Viewable",r.trackers),l={},(o=r).media&&o.media.forEach(function(e){var t=e.type,i="application/x-mpegURL"===t||"vnd.apple.mpegURL"===t;"vpaid"===e.adType.toLowerCase()||i||(l[t]=l[t]||0,l[t]++)}),o.mediaFileCompliance=!0,Object.keys(l).forEach(function(e){var t=l[e];t<3&&(o.mediaFileCompliance=!1,o.nonComplianceReasons=o.nonComplianceReasons||[],o.nonComplianceReasons.push(e+" has only "+t+" qualities"))}),m&&(r.wrappedURI=N(H(m,"VASTAdTagURI"))||N(H(m,"VASTAdTagURL")),r.followAdditionalWrappers=JSON.parse(D(m,"followAdditionalWrappers")),r.allowMultipleAds=JSON.parse(D(m,"allowMultipleAds")),r.fallbackOnNoAd=JSON.parse(D(m,"fallbackOnNoAd"))),n=r,a=M({},i),Object.keys(n).forEach(function(e){var t=n[e];Array.isArray(a[e])?a[e]=a[e].concat(t):"object"==typeof a[e]&&null!==a[e]?a[e]=M(a[e],t):a[e]=t}),r=a):this.throwError(303,"No ads",10303),r},e.throwError=function(e,t,i){throw this._error=new Error(t),this._error.code=e,this._error.adErrorCode=i||1e4+e,this._error};var Ue=Qe;function Qe(e,t){this.utils=t,this._error=null,this._version=null,e&&this.parse(e)}function L(e,t,i){var r=[];return e&&(r=e.getElementsByTagName(t),i&&r&&0===r.length&&(r=e.getElementsByTagName(i+":"+t))),r}function H(e,t){if(e){e=e.getElementsByTagName(t);if(e)return e[0]}return null}function D(e,t){return e?e.getAttribute(t):null}function Xe(e,t){var i=D(t,"event");k(e,i="progress"===i?i+"_"+D(t,"offset"):i,N(t))}function N(e){if(e){e=e.textContent||e.text;if(e)return e.trim()}return""}function k(e,t,i){e[t]||(e[t]=[]),i&&(e[t].push(i),ze(i))}function We(e,t,i){e=L(e,t);y.call(e,function(e){k(i,t.toLowerCase(),N(e))})}var ze=function(e){(0<=e.indexOf("[REGULATIONS]")||0<=e.indexOf("[GDPRCONSENT]"))&&(Se().catch(De),ze=De)};function Ge(e){e.onload=e.onreadystatechange=e.onerror=null,"abort"in e&&e.abort()}(e=$e.prototype).load=function(a,e,t,i){var s=this;if(this._vmapPromise)return this._vmapPromise;null!==this._vmapXHR&&(Ge(this._vmapXHR),this._vmapXHR=null);e=He(this.getVMAP(),a,e,t,i);return this._vmapPromise=t===ye?e.then(function(e){s.setPreRoll({_adQueue:[e]})}):e.then(function(r){return new Promise(function(e,n){s._vmapXHR=a.utils.ajax({url:r,withCredentials:i.withCredentials,retryWithoutCredentials:!0,requireValidXML:!0,timeout:s.requestTimeout},e,function(e,t,i,r){return n(r)})}).then(function(e){return s._vmapXHR=null,a.trigger("adLoadedXML",{client:t,tag:r,xml:e.responseXML}),Ne(e.responseXML,s,a.utils).map(function(e){return M(e,{vmap:r})})}).catch(function(e){s._vmapXHR=null;var t,i={id:"-1",vmap:r};throw e.message?M(i,{message:"VMAP Schema Error: "+e.message,code:1002,adErrorCode:e.adErrorCode||11002}):(e=(t={1:{code:1007,message:"Timeout"},602:{code:1e3,message:"Invalid XML"},default:{code:1008,message:a.getConfig().localization.errors[e.key]}})[e.code]||t.default,a.utils.log(e.message),M(i,{message:"Error Loading VMAP Schedule",code:e.code,adErrorCode:e.code+1e4})),i})}),this._vmapPromise},e.canWaterfall=function(e){return e._adQueue&&e._waterfallIndex+1<e._adQueue.length},e.getPreRoll=function(e){return e&&"none"===this.adRules.startOnSeek?null:g(this.preRoll,this.requestTimeout,this.creativeTimeout)},e.getPostRoll=function(e){var t=g(this.postRoll,this.requestTimeout,this.creativeTimeout);return this.adRules.timeBetweenAdsAllowsAdPlayback(t,e)?t:null},e.getMidRollAtIndex=function(e){return g(this.midRolls[e],this.requestTimeout,this.creativeTimeout)},e.getLastMidRollIndexBetweenTime=function(e,t,i){if(t<e)return null;this.sort(i);for(var r=this.midRolls.length;r--;){var n=this.midRolls[r],a=P(this.midRolls[r]._offSet,i);if(a<=e)return null;if(a<=t){a=g(n,this.requestTimeout,this.creativeTimeout);if(!this.adRules.timeBetweenAdsAllowsAdPlayback(a))return null;if(!this.adRules.timeBetweenAds){if(0<=this.playedMidRolls.indexOf(r))return null;this.playedMidRolls.push(r)}return r}}return null},e.peek=function(e,t,i){if(this.midRolls.length>this.playedMidRolls.length){this.sort(i);for(var r=0;this.midRolls[r];){var n,a=P(this.midRolls[r]._offSet,i);if(e<=a&&-1===this.playedMidRolls.indexOf(r))return n=f()+1e3*(a-e),a<=t&&this.adRules.timeBetweenAdsAllowsAdPlayback(null,n)?r:null;r+=1}}var s=f()+1e3*(i-e);return this.postRoll&&i<=t&&this.adRules.timeBetweenAdsAllowsAdPlayback(null,s)?-1:null},e.getNextMidrollIndex=function(e,t,i){if(this.adRules.timeBetweenAds||this.adRules.startOnSeek)return this.getLastMidRollIndexBetweenTime(e,t,i);if(this.midRolls.length>this.playedMidRolls.length){e=this.getClosestIndex(t,i);if(0<=e&&this.playedMidRolls.indexOf(e)<0)return this.playedMidRolls.push(e),e}return null},e.getMidRolls=function(){var t=this;return this.midRolls.map(function(e){return g(e,t.requestTimeout,t.creativeTimeout)})},e.reset=function(){null!==this._vmapXHR&&(Ge(this._vmapXHR),this._vmapXHR=null),this.playedMidRolls=[],this.duration=0},e.setPreRoll=function(e){this.resetBreakId(e),this.preRoll=e},e.addMidRoll=function(e){this.resetBreakId(e),this.midRolls.push(e),this.duration=0},e.setPostRoll=function(e){this.resetBreakId(e),this.postRoll=e},e.sort=function(i,e){if((!i||i<1)&&(i=1),this.duration!==i||e){this.duration=i,this.midRolls.sort(function(e,t){return P(e._offSet,i)-P(t._offSet,i)});for(var t=this.getAllAds(),r=e,n=0;n<t.length;n++){var a=t[n];r?a._vmap.item=n+1:(a._adbreak={item:n+1,breakid:a._breakId},a._pod?a._adbreak.pod=a._pod:a._adbreak.tags=a._adQueue)}}},e.getAllAds=function(){var e=this.preRoll?[this.preRoll]:[],t=this.postRoll?[this.postRoll]:[];return e.concat(this.midRolls,t)},e.setVMAP=function(e){this.vmap=e},e.isVMAP=function(){return!!this.vmap},e.getVMAP=function(){return this.vmap},e.getClosestIndex=function(e,t){this.sort(t);for(var i=this.midRolls.length;i--;)if(e>=P(this.midRolls[i]._offSet,t))return i;return-1},e.resetBreakId=function(e){e.adBreakId=this.utils.genId(12)},e.resetAllBreakIds=function(){var t=this;this.getAllAds().forEach(function(e){t.resetBreakId(e)})},e.destroy=function(){this.reset(),this.adRules.destroy()};var Je=$e;function $e(e,t){this.adRules=e,this.utils=t,this.preRoll=null,this.vmap=null,this.postRoll=null,this.midRolls=[],this.playedMidRolls=[],this.duration=0,this._vmapPromise=null,this._vmapXHR=null}function g(i,e,t){var r;if(null!==i)return Object.keys(i).forEach(function(e){var t=i[e];(r=r||{})[e]="_adQueue"===e||"_pod"===e?t.slice():t}),r?(r.requestTimeout=e,r.creativeTimeout=t,r._errors=[],r._waterfallIndex=0,r._adPodIndex=0,r):void 0}function P(e,t){return"%"===e.toString().slice(-1)?t*parseFloat(e.slice(0,-1))/100:parseFloat(e)}(e=Ke.prototype).getSchedule=function(e,t){var i,r,s,o,l,t=new Je(t,this.utils);if(t.requestTimeout=et(e.requestTimeout,5e3),t.creativeTimeout=et(e.creativeTimeout,5e3),e.tag)t.setPreRoll({_offSet:"pre",_adQueue:Ze(e.tag),_waterfallIndex:0});else if("string"==typeof e.vastxml)t.setPreRoll({_offSet:"pre",_adXML:e.vastxml});else{if("string"==typeof e.schedule)return t.setVMAP(e.schedule),t;if("string"==typeof e.adschedule)return t.setVMAP(e.adschedule),t;i=t,r=e,s=this.utils,(l=r.schedule||r.adschedule)&&(o={},Object.keys(l).forEach(function(e){var t=l[e],i=(t.ad&&(M(t,t.ad),delete t.ad),function(e,t){if("start"===e||"0%"===e||!e&&0!==e)return"pre";if("end"===e||"100%"===e)return"post";if("pre"===e||"post"===e||0<=(e+"").indexOf("%"))return e;t=t.seconds(e);return"number"==typeof t&&t}(t.offset,s)),r=et(t.requestTimeout,5e3),n=et(t.creativeTimeout,5e3),a=o[i];if(a){if("nonlinear"===t.type)return;"nonlinear"===a._type&&(a=null)}a=o[i]=a||{_offSet:i,_type:t.type,_breakId:e,adBreakId:s.genId(12),requestTimeout:r,creativeTimeout:n},!1===i&&s.log("Error: ad offset format not supported",i),e=t.skipoffset;void 0!==e&&void 0===a.skipoffset&&(a.skipoffset=e),"string"==typeof t.adm?a.adm=t.adm:t.pod?(r=a._pod||[],a._pod=r.concat(t.pod)):t.tag?(n=function(e,i){if(!i)return e;var t,r=0<=e.indexOf("?")?"&":"?",n=e.indexOf(ke),a=ke.length,s="",o="";return Object.keys(i).forEach(function(e){var t=i[e];s=""+s+o+e+"="+t,o="&"}),s=encodeURIComponent(s),0<=n?(t=e.substr(0,n+a),n=e.substr(n+a),""+t+s+"%26"+n):e+r+ke+s}(t.tag,t.custParams),a._adQueue&&(a._pod=[a._adQueue[0]],delete a._adQueue),a._pod?a._pod.push(Ze(n)[0]):a._adQueue=Ze(n)):"string"!=typeof t.vastxml?s.log("Error: no ad tag provided"):a._adXML=t.vastxml}),Object.keys(o).forEach(function(e){var t=o[e];switch(t.skipoffset=(void 0!==t.skipoffset?t:r).skipoffset,e){case"pre":i.setPreRoll(t);break;case"post":i.setPostRoll(t);break;default:i.addMidRoll(t)}}))}return t.sort(),t},e.getOptParams=function(e,t){t={cuetext:t.cuetext,dynamicMessage:t.admessage,loadingAd:t.loadingAd,podMessage:t.podmessage,skipoffset:e.skipoffset,skipMessage:t.skipmessage,skipText:t.skiptext,omidAccessMode:e.omidAccessMode||"full",omidSupport:e.omidSupport||"auto",allowedOmidVendors:e.allowedOmidVendors||[],vpaidcontrols:e.vpaidcontrols||!1,conditionaladoptout:e.conditionaladoptout||!1,requestFilter:e.requestFilter,trackingFilter:e.trackingFilter,withCredentials:void 0===e.withCredentials||e.withCredentials},e=e.companiondiv;return e&&(t.companion={id:e.id,height:e.height,width:e.width}),t},e.getAdRules=function(e){var e=e.rules||{},t=parseInt(e.frequency,10);return{startOn:e.startOn||1,frequency:isNaN(t)?1:t,timeBetweenAds:e.timeBetweenAds||0,startOnSeek:e.startOnSeek||null,deferAds:e.deferAds||null}};var Ye=Ke;function Ke(e){this.utils=e}function Ze(e){return Array.isArray(e)?e.slice(0):[e]}function et(e,t){return 0===e?1/0:e||t}function tt(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(){}(e=dt.prototype).shouldDeferAds=function(){return this.options.deferAds&&!this.player.getConfig().activeTab},e.clearStartOnSeek=function(){this.ignoreStartOnSeek=!0},e.sendAdBreakIgnored=function(e,t){var i;e&&this.player.trigger(Ae,(this.client,i={},M(i=e?{id:e._breakId,tag:e._adQueue&&0<e._adQueue.length?e._adQueue[0]:e._adXML,offset:e._offSet}:i,{timeSinceLastAd:t,type:Ae})))},e.rulesAllowAdPlayback=function(e){var t=this.options,i=0===t.frequency&&1===e,e=e>=t.startOn&&(e-t.startOn)%t.frequency==0;return i||e},e.handleAdBreakStart=function(){this.adSkipped=!1,this.adComplete=!1},e.handleAdComplete=function(){this.adComplete=!0},e.handleAdSkipped=function(){this.adSkipped=!0},e.handleAdBreakEnd=function(){!this.adSkipped&&this.adComplete&&(this.recentCompletedAdTime=f())},e.timeBetweenAdsAllowsAdPlayback=function(e,t){if(void 0===t&&(t=f()),this.options.timeBetweenAds){t=(t-this.recentCompletedAdTime)/1e3;if(t<this.options.timeBetweenAds)return this.sendAdBreakIgnored(e,t),!1}return!0},e.reset=function(){this.ignoreStartOnSeek=!1,this.recentCompletedAdTime=0},e.destroy=function(){this.player.off(null,null,this)},tt((e=dt).prototype,[{key:"timeBetweenAds",get:function(){return this.options.timeBetweenAds}},{key:"startOnSeek",get:function(){return this.ignoreStartOnSeek?null:this.options.startOnSeek}}]),Object.defineProperty(e,"prototype",{writable:!1});var rt=dt,e=((e=lt.prototype).attachListeners=function(){this.player.on({all:this.onAll,beforePlay:this.checkPreroll,relatedReady:this.relatedReady,cast:this.onCast,destroyBidding:this.destroyBids},this)},e.onAll=function(e,t){"time"===e?this.checkMidrolls(t):"beforeComplete"===e&&this.checkPostrolls(t)},e.relatedReady=function(){var e,t=this;this.config.preloadAds&&(e=this.player.getPlugin("related"))&&e.on("nextUp",function(e){e&&"discovery"===e.mode&&(t.relatedNextUp=e)})},e.onCast=function(e){this.casting=!!e.active},e.init=function(t,i){var e,r=this;return void 0===t&&(t=null),this.schedule.isVMAP()&&(i.requestTimeout=this.schedule.requestTimeout,i.creativeTimeout=this.schedule.creativeTimeout,this.vmapPromise=this.schedule.load(this.player,this.item,this.client,i)),this.bidsPromise=this.vmapPromise||Promise.resolve(),this.bidsPromise=(null!==t?this.bidsPromise.then(function(){if(!r.isDestroyed()){if(r.bidding)return r.createBidsPromise(t,i);M(e=je(r,null,i),{message:"Ad Error: bidding plugin unavailable",code:900,adErrorCode:60008});r.player.trigger(V,e)}var e}):this.bidsPromise).catch(it),this.config.preloadAds&&(1===i.playlistItemEventCount?!1===(e=this.player.getConfig().autostart)||"viewable"===e&&0===this.player.getViewable()?this.loadPreroll(i).catch(function(e){return r.isDestroyed()?null:r.enqueueAdEvent(V,e,{preload:!0})}):this.player.once("autostartNotAllowed",function(){r.loadPreroll(i).catch(function(e){return r.isDestroyed()?null:r.enqueueAdEvent(V,e,{preload:!0})})}):i.preloadPreroll&&this.loadPreroll(i).catch(function(e){return r.isDestroyed()?null:r.enqueueAdEvent(V,e,{preload:!0})})),this.bidsPromise},e.createBidsPromise=function(s,o){var l=this,d=this.player,e=0<(e=parseInt(s.bidOnBreaks,10))?e:1/0;return this.bids=this.schedule.getAllAds().slice(0,e).map(function(i){var e=l.getAdIds(i).adPlayId,t=d.getConfig(),r=l.config.skipoffset,n=null!=r&&0<=r,a=Ve(d,l.item),e={id:e,offset:s.offset,jwpseg:a,placement:Me(t),tag:i._adQueue?i._adQueue[0]:i._currentTag,adClient:l.client},t=(l.client===ve&&(e.skipoffset=n?r:-1),l.bidding.createNewBid(e,{getURLParts:Oe})),n=(l.player.trigger("adBidRequest",je(l,i,M({jwpseg:a},o))),t.init(),t.start().then(function(e){var t,e=e.result;if(!l.isDestroyed())return t=Promise.resolve(),e&&!e.error&&(i.jwpseg=a,e.adm?(i._adXML=e.adm,i._adQueue&&i._adQueue.length&&i._adQueue.unshift(e.adm)):e.tag&&(t=He(e.tag,l.player,l.item,l.client,{},i).then(function(e){l.client===ve?(i._adQueue=i._adQueue||[],i._adQueue.unshift(e)):i._adQueue=[e]}))),l.player.trigger("adBidResponse",je(l,i,o)),t}));return l.bidsPromises.push(n),t}),Promise.all(this.bidsPromises)},e.checkPreroll=function(e){var t,i,r=this;this.bidTimeoutStarted||(this.bidTimeoutStarted=!0,this.bids.forEach(function(e){return e.timeout()})),this.casting||this.preRollPlayed||this.adRules.shouldDeferAds()||(this.preRollPlayed=!0,t=(e||{}).startTime||this.player.getPosition(),this.lastTimeEvent=t||this.lastTimeEvent,((i=this.schedule.getPreRoll(t))||this.vmapPromise)&&((null!==this.vmapPromise||i&&"nonlinear"!==i._type)&&this.startBlocking(),this.bidsPromise.then(function(){var e;r.isDestroyed()||(e=r.schedule.getPreRoll(t))&&"nonlinear"!==e._type&&r.triggerAdBreakEvents(e,"pre")}),t?"none"===this.adRules.startOnSeek&&(this.prerollPromise=null):this.adRules.clearStartOnSeek(),i=e&&e.playReason?e.playReason:"external",this.playPreroll({adBlock:this.adBlockErrorDetected,startTime:t,reason:i})))},e.checkMidrolls=function(e){var t,i,r,n,a=this;this.casting||0===e.duration||this.adRules.shouldDeferAds()||(r=this.schedule.getNextMidrollIndex(this.lastTimeEvent,e.position,e.duration),this.lastTimeEvent=e.position,null!==r?("nonlinear"!==(t=this.schedule.getMidRollAtIndex(r))._type&&(this.startBlocking(),this.triggerAdBreakEvents(t,"mid")),this.playMidrollAtIndex(r,{adBlock:this.adBlockErrorDetected})):!this.preRollPlayed&&this.schedule.getClosestIndex(e.position,e.duration)<0?this.checkPreroll(e):this.config.preloadAds&&(t=e.position+5,null!==(r=this.schedule.peek(e.position,t,e.duration))&&0<=r?this.loadMidrollAtIndex(r,{adBlock:this.adBlockErrorDetected,preload:!0}).catch(it):-1===r?(r=f()+1e3*(e.duration-e.position),this.loadPostroll({adBlock:this.adBlockErrorDetected,preload:!0,startTime:r}).catch(it)):null===this.next&&null===this.nextPlaylistItemPromise&&t>e.duration&&(i=this.player.getPlaylistIndex()+1,r=this.player.getPlaylistItem(i),this.nextPlaylistRelated=!!this.relatedNextUp,(r||this.relatedNextUp)&&(n=this.relatedNextUp?-1:i,this.nextPlaylistItemPromise=Promise.resolve(this.player.getPlaylistItemPromise(n)).then(function(){a.isDestroyed()||(a.trigger("preloadNext",{item:a.player.getPlaylistItem(i)||a.relatedNextUp,index:n}),a.relatedNextUp=null,a.nextPlaylistItemPromise=null)}).catch(it)))))},e.checkPostrolls=function(e){var t;this.casting||this.adRules.shouldDeferAds()||this.isDestroyed()||(t=this.schedule.getPostRoll())&&("nonlinear"!==t._type&&(this.startBlocking(),this.triggerAdBreakEvents(t,"post")),this.playPostroll(e))},e.getAdIds=function(e,t){var t=void 0===t?{}:t,i=t.tagIndex,t=t.podIndex,i=e.adRequestIds&&void 0!==i?e.adRequestIds[i]:null;return i||(i="p0w0"==(t="p"+(t||e._adPodIndex||0)+"w"+(e._waterfallIndex||0))?e.adBreakId:(e.adPlayIds=e.adPlayIds||{},e.adPlayIds[t]=e.adPlayIds[t]||this.player.utils.genId(12))),{adBreakId:e.adBreakId,adPlayId:i}},e.loadPreroll=function(t){var i=this;return void 0===t&&(t={}),this.prerollPromise||(this.prerollPromise=this.bidsPromise.then(function(){var e;if(!i.isDestroyed())return(e=i.schedule.getPreRoll(t.startTime))?(e._position="pre",e._preload=!0,i.loadAd(e,t)):void 0})),this.prerollPromise},e.loadMidrollAtIndex=function(t,i){var r=this;return this.midrollPromise[t]||(this.midrollPromise[t]=this.bidsPromise.then(function(){var e;if(!r.isDestroyed())return(e=r.schedule.getMidRollAtIndex(t))?(e._position="mid",e._preload=!0,r.loadAd(e,i)):void 0})),this.midrollPromise[t]},e.loadPostroll=function(t){var i=this;return void 0===t&&(t={}),this.postrollPromise||(this.postrollPromise=this.bidsPromise.then(function(){var e;if(!i.isDestroyed())return(e=i.schedule.getPostRoll(t.startTime))?(e._position="post",e._preload=!0,i.loadAd(e,t)):void 0})),this.postrollPromise},e.playPreroll=function(t){var i=this;this.prerollPromise?this.playPreloadedPromise(this.prerollPromise,t):this.bidsPromise.then(function(){var e;i.isDestroyed()||((e=i.schedule.getPreRoll(t.startTime))?(e._position="pre",i.startAdBreak(e,t)):i.stopBlocking())})},e.playMidrollAtIndex=function(t){var i=this;this.midrollPromise[t]?this.playPreloadedPromise(this.midrollPromise[t]):this.bidsPromise.then(function(){var e=i.schedule.getMidRollAtIndex(t);e&&(e._position="mid",i.startAdBreak(e))})},e.playPostroll=function(t){var i=this;this.postrollPromise?this.playPreloadedPromise(this.postrollPromise):this.bidsPromise.then(function(){var e=i.schedule.getPostRoll();e&&(e._position="post",i.startAdBreak(e,t))})},e.isDestroyed=function(){return null===this.player},e.destroy=function(){this.destroyBids(),this.player.off(null,null,this),this.player=null},e.destroyBids=function(){this.bids.forEach(function(e){return e.stop()}),this.bidsPromises=[],this.bids=[]},e.enqueueAdEvent=function(e,t,i){this._events.push({type:e,event:t}),i.preload||this.dequeueAdEvents()},e.dequeueAdEvents=function(){},e.triggerAdBreakEvents=function(){},e.startBlocking=function(){},e.stopBlocking=function(){},e.loadAd=function(){},e.playPreloadedPromise=function(){},e.startAdBreak=function(){},lt),nt=((E=ot.prototype).resetResizeTimeout=function(){var i=this;clearTimeout(this.resizeTimer),this.isFullscreen||(this.resizeTimer=setTimeout(function(){var e,t;i.mediaEvents&&((e=i.player.getWidth())*(t=i.player.getHeight())>i.startingSize?i.mediaEvents.playerStateChange("expanded"):e*t<i.startingSize?i.mediaEvents.playerStateChange("collapsed"):i.mediaEvents.playerStateChange("normal"))},250))},E.trackEvent=function(e){var t,i;if(this.adEvents&&this.mediaEvents)try{for(var r=arguments.length,n=new Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];switch(e){case U:this.adEvents.loaded();break;case"click":this.mediaEvents.adUserInteraction("click");break;case"close":this.finishSession();break;case"complete":this.mediaEvents.complete(),this.finishSession();break;case"firstQuartile":this.mediaEvents.firstQuartile();break;case"fullscreen":this.isFullscreen=n[0],this.resetResizeTimeout(),this.isFullscreen&&this.mediaEvents.playerStateChange("fullscreen");break;case"impression":(t=this.mediaEvents).start.apply(t,n),this.adEvents.impressionOccurred(),this.startingSize=this.player.getWidth()*this.player.getHeight(),this.isFullscreen=this.player.getFullscreen();break;case"midpoint":this.mediaEvents.midpoint();break;case"mute":this.mediaEvents.volumeChange(0);break;case"pause":this.mediaEvents.pause();break;case"resize":this.resetResizeTimeout();break;case"resume":this.mediaEvents.resume();break;case"skip":this.mediaEvents.skipped(),this.finishSession();break;case"thirdQuartile":this.mediaEvents.thirdQuartile();break;case"unmute":this.mediaEvents.volumeChange(this.player.getVolume()/100);break;case"volume":(i=this.mediaEvents).volumeChange.apply(i,n);break;case"bufferStart":this.mediaEvents.bufferStart();break;case"bufferFinish":this.mediaEvents.bufferFinish()}}catch(e){console.warn(e),this.adEvents=this.mediaEvents=null}},E.finishSession=function(){this.adSession&&(this.adSession.finish(),this.adSession=null,this.adEvents=null,this.mediaEvents=null)},ot),at=null,st=null;function ot(e,n,t,i,r,a,s){M(this,e.Events),this.player=e,this.startingSize=e.getWidth()*e.getHeight();var o=a.allowedOmidVendors;try{var l=[],d=(i.forEach(function(e){var t=e.javaScriptResource,i=e.vendor,r=e.verificationParameters,e=e.trackers;o.length&&o.indexOf(i)<0?s("verificationNotExecuted",e.verificationNotExecuted,{"[REASON]":1}):t?t.url?l.push(new n.VerificationScriptResource(t.url,i,r,a.omidAccessMode)):s("verificationNotExecuted",e.verificationNotExecuted,{"[REASON]":3}):s("verificationNotExecuted",e.verificationNotExecuted,{"[REASON]":2})}),new n.Partner("JWPlayer",e.version)),h=new n.Context(d,l,location.href),u=(h.setVideoElement(t),h.underEvaluation=!0,h.setServiceWindow(window),this.adSession=new n.AdSession(h));if(!u.isSupported())return;this.adEvents=new n.AdEvents(u),this.mediaEvents=new n.MediaEvents(u),r&&u.setCreativeType("video"),u.start()}catch(e){return null}}function lt(e,t,i,r,n){M(this,e.Events),this.client="shared",this.player=e,this.item=i,this.config=r,this.casting=n;i=e.utils,n=new Ye(i);this.adRules=new rt(e,n.getAdRules(r)),"string"==typeof t?(this.schedule=new Je(this.adRules,i),this.schedule.setPreRoll({tag:t})):(this.schedule=t).resetAllBreakIds(),this.vmapPromise=null,this.lastTimeEvent=null,this.prerollPromise=null,this.midrollPromise={},this.postrollPromise=null,this.next=null,this.nextPlaylistItemPromise=null,this.relatedNextUp=null,this.bidding=e.getPlugin("bidding"),this.bids=[],this.bidsPromises=[],this.bidsPromise=null,this._events=[]}function dt(e,t){this.player=e,this.options=t,this.client=t.client,this.ignoreStartOnSeek=!1,this.reset(),t.timeBetweenAds&&e.on({adBreakStart:this.handleAdBreakStart,adSkipped:this.handleAdSkipped,adComplete:this.handleAdComplete,adBreakEnd:this.handleAdBreakEnd,destroyPlugin:this.destroy},this)}function ht(i){return function(e){if(st)return st;var t=["//","ssl.p.jwpcdn.com/player/lib/omid/v/1.3.15/omweb-v1.js"],e=("file:"===document.location.protocol&&t.unshift("https:"),new e.scriptloader(t.join("")));return st=e.load()}(i).then(function(){var e=i;if(at)return at;if(window.OmidSessionClient&&OmidSessionClient.default)return at=Promise.resolve();var t=["//","ssl.p.jwpcdn.com/player/lib/omid/v/1.3.15/omid-session-client-v1.js"],e=("file:"===document.location.protocol&&t.unshift("https:"),new e.scriptloader(t.join("")));return at=e.load()})}var w=[],ut=((E=mt.prototype).getUrls=function(e){return this.map.hasOwnProperty(e)?this.map[e]:[]},E.addUrl=function(e,t){this.map.hasOwnProperty(e)||(this.map[e]=[]),this.map[e].push(t)},E.trackPingsByUrl=function(e,t,i){void 0===i&&(i={});var r=this.trackingFilter,n=[],a=[],s=[];if(t.length){i=this.replaceMacros(i),t.forEach(function(t){var e;t&&(Object.keys(i).forEach(function(e){t=t.replace(e,i[e])}),r&&!1===r(t)?a.push(t):((e=new Image).src=t,n.push(t),s.push(e)))}),Array.prototype.push.apply(w,s);for(var o=w.length;o--&&(w[o].width||w[o].complete);)w.length=o}"function"==typeof this.debugTrackFn&&this.debugTrackFn({type:"ping",data:{pingType:e,urls:n,filteredUrls:a,images:s}})},E.trackPings=function(e,t){var i=this.getUrls(e);this.trackPingsByUrl(e,i,t)},E.trackOmidEvent=function(e){for(var t,i=arguments.length,r=new Array(1<i?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];this.omidTracker?(t=this.omidTracker).trackEvent.apply(t,[e].concat(r)):this.omidDeferredEvents.push({type:e,args:r})},E.replaceMacros=function(e){var t,i,r,n=m,a=n.gdprApplies,n=n.consentData;return e["[ADSERVINGID]"]=encodeURIComponent(this.ad.adServingId||""),e["[ASSETURI]"]=encodeURIComponent(this.trackerPlayerUtils.getFile()),e["[CACHEBUSTING]"]=Math.random().toString().slice(2,10),e["[CONTENTPLAYHEAD]"]=encodeURIComponent((r=this.trackerPlayerUtils.getPosition(),(t=("0"+Math.floor(r/3600)).slice(-2))+":"+(i=("0"+Math.floor((r-3600*t)/60)).slice(-2))+":"+("0"+Math.floor(r-3600*t-60*i)).slice(-2)+"."+(r%1).toFixed(3).toString().slice(2,5))),e["[DEVICEUA]"]=encodeURIComponent(this.trackerPlayerUtils.getUserAgent()),e["[GDPRCONSENT]"]=n,e["[PAGEURL]"]=encodeURIComponent(me().url),e["[PLACEMENTTYPE]"]=this.trackerPlayerUtils.getPlacement(),e["[REGULATIONS]"]=a?"gdpr":"",e["[TIMESTAMP]"]=encodeURIComponent((i=(t=new Date).getTime(),r=t.getTimezoneOffset()/60,n=6e4*t.getTimezoneOffset(),new Date(i-n).toISOString().slice(0,-1)+(0<r?"-":"+")+("0"+r).slice(-2))),e},E.start=function(){this.started=!0,this.trackPings("start")},E.breakStart=function(){this.breakStarted=!0,this.trackPings("breakStart")},E.time=function(e,t){if(!(t<=1)){for(var i=(4*e+.05)/t|0;i>this.lastQuartile&&this.lastQuartile<3;)this.lastQuartile++,1===this.lastQuartile?(this.trackPings("firstQuartile"),this.trackOmidEvent("firstQuartile")):2===this.lastQuartile?(this.trackPings("midpoint"),this.trackOmidEvent("midpoint")):3===this.lastQuartile&&(this.trackPings("thirdQuartile"),this.trackOmidEvent("thirdQuartile"));this.trackProgress(e,t)}},E.trackProgress=function(e,t){for(var i=this.progressEvents.length;i--;){var r,n=this.progressEvents[i];n.tracked||(r=n.offset,(r=n.percentage?t*r/100:r)<=e&&(n.tracked=!0,this.trackPings(n.key)))}},E.error=function(e){void 0===e&&(e=900),this.firedError=!0;var t={};t["[ERRORCODE]"]=e,this.trackPings("error",t)},E.factory=function(r){var n=this;return function(){if(n.trackPings(r),"fullscreen"!==r){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.trackOmidEvent.apply(n,[r].concat(t))}}},E.setFactories=function(){this.creativeView=this.factory("creativeView"),this.click=this.factory("click"),this.skip=this.factory("skip"),this.complete=this.factory("complete"),this.pause=this.factory("pause"),this.resume=this.factory("resume"),this.mute=this.factory("mute"),this.unmute=this.factory("unmute"),this.fullscreen=this.factory("fullscreen"),this.expand=this.factory("expand"),this.collapse=this.factory("collapse"),this.acceptInvitation=this.factory("acceptInvitation"),this.close=this.factory("close"),this.rewind=this.factory("rewind"),this.impression=this.factory("impression"),this.viewable=this.factory("viewable"),this.notViewable=this.factory("notviewable"),this.breakEnd=this.factory("breakEnd")},mt),ct=((E=pt.prototype).load=function(t){var i,r=this;return null===this.promise&&(this._history.push(t),i=this.options.requestFilter,this.promise=new Promise(function(e,n){r.xmlhttp=r.player.utils.ajax({url:t,withCredentials:r.params.withCredentials,retryWithoutCredentials:!0,requireValidXML:!0,timeout:r._scheduledAd.requestTimeout,requestFilter:i},e,function(e,t,i,r){return n(r)})}).catch(function(e){if(null!==r.player)throw r.ajaxError(e,t)}).then(function(e){if(null!==r.player)return e=e.responseXML||e.responseText,r.trigger(d,{tag:t,xml:e}),r.parseXMLString(e,t)})),this.promise},E.destroy=function(){var e;(e=this.xmlhttp)&&(e.onload=null,e.onreadystatechange=null,e.onerror=null,e.abort&&e.abort()),this.player=null,this.xmlhttp=null},E.scheduledAd=function(){return this._scheduledAd},E.allAds=function(){return this.loadedAds},E.podMultipleVastLoaders=function(e){var a=this,e=e.map(function(e){return e.then(function(e){var t=e.adPod();if(t.length)return t;t=e.adBuffet();return t.length?[t[0]]:Promise.reject({vloader:a,message:"No compatible ad"})}).catch(function(e){return{error:e}})});return Promise.all(e).then(function(e){var n=0,e=e.reduce(function(t,e,i){return e.error?(e.error.tagIndex=i,a.trigger(h,e.error)):(e.length&&0!==i&&(r="p"+n+"w"+a._scheduledAd._waterfallIndex,a._scheduledAd.adPlayIds[r]=a._scheduledAd.adRequestIds[i]),e.forEach(function(e){e.sequence=++n,t.push(e)})),t;var r},[]);return e.length?(a.loadedAds=e,a):null})},E.adPod=function(){var t=[];return this.loadedAds.forEach(function(e){e.sequence&&t.push(e)}),t.sort(function(e,t){return e.sequence-t.sequence}),t},E.adBuffet=function(){var t=[];return this.loadedAds.forEach(function(e){e.sequence||t.push(e)}),t},E.parseXMLString=function(i,n){var l=this;return null===this.parser&&(this.parser=new Ue(null,this.player.utils)),new Promise(function(e){var t=("object"==typeof Node?i instanceof Node:i&&"object"==typeof i&&"number"==typeof i.nodeType&&"string"==typeof i.nodeName)?i:l.player.utils.parseXML(i);if(null===t)throw{message:"Invalid XML",code:100};return e(l.parser.parse(t,l.xmlhttp))}).catch(function(e){var t,i;if(null!==l.player)throw t=e.code||900,i=e.adErrorCode||1e4+t,l.sendErrorEvent(e.message,t,i,n)}).then(function(e){if(null===l.player)return null;if(0===e.length)throw l.sendErrorEvent("No ads",303,10303,n);var o=e.filter(function(e){return!e.sequence}).map(function(e){return e._currentTag=n,e}),t=(l.wrapperOptions.allowMultipleAds?l.loadedAds=e:l.loadedAds=o,l.options.wrapper=l.options.wrapper||[],l.options),i=t.adsystem,t=t.dealId,r=(i&&l.options.wrapper.push(i),t&&(l.options.wrapperDealId=t),l.options.adsystem=l.loadedAds[0].adsystem,l.options.dealId=l.loadedAds[0].dealId,[]);return e.forEach(function(a,n){var s,e;a.wrappedURI?!1!==l.wrapperOptions.followAdditionalWrappers&&(l.options.wrappedTags=l.options.wrappedTags||[l._scheduledAd._currentTag],l.options.wrappedTags.push(a.wrappedURI),(s=new pt(l._scheduledAd,l.player,l.options,{fallbackOnNoAd:a.fallbackOnNoAd,allowMultipleAds:a.allowMultipleAds,followAdditionalWrappers:a.followAdditionalWrappers},l.debugTrackFn)).on(d,function(e){l.trigger(d,e)},l),e=He(a.wrappedURI,l.player,l.item,R,l.params,a).then(function(e){return s.load(e)}).then(function(e){s.off(d,null,l);t=a,e=e.allAds(),n=[],e.forEach(function(e){var i,r;t.companions&&(e.companions=(e.companions||[]).concat(t.companions)),t.trackers&&(e.trackers=(i=e.trackers,r=t.trackers,i=i||{},Object.keys(r).forEach(function(e){var t=r[e];i[e]?i[e]=i[e].concat(t):i[e]=t}),i)),t.sequence&&(e.sequence=t.sequence),t._currentTag&&(e._currentTag=t._currentTag),t.adVerifications&&(e.adVerifications=(e.adVerifications||[]).concat(t.adVerifications)),n.push(e)});var t,n,e=n,i=l.loadedAds.indexOf(a);Array.prototype.splice.apply(l.loadedAds,[i,1].concat(e))}).catch(function(e){s.off(d,null,l);var t=l.sendAdpodErrorEvent(e,a,n),i=a.fallbackOnNoAd&&a.sequence&&o.length,r=l.loadedAds.indexOf(a);if(i)return a.loadError=t,void e.vloader.destroy();if(l.loadedAds.splice(r,1),e.vloader.destroy(),t.type!==h)throw t;l.trigger(h,t)}),r.push(e)):l.options.wrapper.length&&(a.wrapper=l.options.wrapper,a.wrappedTags=l.options.wrappedTags,a.dealId=l.options.wrapperDealId)}),Promise.all(r)}).then(function(){if(null===l.player)return null;var r=l.loadedAds.filter(function(e){return!e.sequence}),t=(l.loadedAds.forEach(function(e,t){var i;e.loadError&&(r.length?(i=(i=l.loadedAds[t+1])&&!i.sequence?i:r[0],l.loadedAds[t]=M({},i,{sequence:e.sequence})):l.trigger(h,e.loadError))}),l.loadedAds.slice(0)),e=t.length,i=(t.forEach(function(e){e.media&&e.media.length||t.length--}),0===e),e=t.length!==e;if(i||e)throw l.sendErrorEvent("Ad Tag Empty",101,10101,l._history[l._history.length-1]);return l})},E.ajaxError=function(e,t){if(this.player.getAdBlock())return this.sendErrorEvent("Ad playback blocked by an ad blocker",900,60003,t);var i=e.code;if(601===i||602===i)return this.sendErrorEvent("Invalid XML",100,10100,t);i=this.options.wrappedTags&&this.options.wrappedTags.length;return this.sendErrorEvent(e.message||"Error loading file",i?301:900,i?10301:60006,t)},E.firstUrl=function(){return this._history&&this._history.length?this._history[0]:""},E.sendAdpodErrorEvent=function(e,t,i){var r=e.message,n=e.code,a=e.adErrorCode,e=e.url;if(1===this.loadedAds.length)return this.sendErrorEvent(r,n,a,e,i);r={message:r,code:n,adErrorCode:a,podIndex:i,vloader:this,tag:this.firstUrl()||e,type:h};return this.trackError(r,t),this.wrappedTags=e,r},E.sendErrorEvent=function(e,t,i,r,n){e={message:e,code:t,adErrorCode:i,podIndex:n,vloader:this,tag:this.firstUrl()||r,adsystem:this.options.adsystem||""};return this.options.wrappedTags&&(e.wrapperAdSystem=this.options.wrapper||"",e.wrappedTags=this.options.wrappedTags),this.trackError(e),e},E.trackError=function(e,t){var i=e.vloader.allAds();i&&i.length&&(t=t||i[0])&&(i=t.trackers)&&i.error&&new ut(t,i,this.debugTrackFn,this.player,this.options).error(e.code)},pt);function pt(e,t,i,r,n){this._scheduledAd=e,this.player=t,this.options=i,this.item=i.item,this.params=i.params||{},this.wrapperOptions=r||{},"boolean"!=typeof this.wrapperOptions.followAdditionalAds&&(this.wrapperOptions.followAdditionalAds=!0),"boolean"!=typeof this.wrapperOptions.allowMultipleAds&&(this.wrapperOptions.allowMultipleAds=!0),this.debugTrackFn=n,M(this,t.Events),this._history=[],this.loadedAds=[],this.parser=null,this.promise=null,this.xmlhttp=null,this.wrappedTags=null,this.options.isPodItemLoader||(e.adPlayIds={})}function mt(i,e,t,r,n,a){var s,o=this,l=e||{};this.ad=i,this.map=l,this.omidDeferredEvents=[],a&&i.adVerifications&&"disabled"!==n.omidSupport&&(a.on(U,function(){a.off(null,null,o),o.trackOmidEvent(U)},this),ht(r.utils).then(function(){var e=window.OmidSessionClient.default,t=a.getMediaElement();o.omidTracker=new nt(r,e,t,i.adVerifications,i.linear,n,o.trackPingsByUrl.bind(o)),o.omidDeferredEvents.forEach(function(e){var t=e.type,e=e.args;o.trackOmidEvent.apply(o,[t].concat(e))}),o.omidDeferredEvents=[]})),this.debugTrackFn=t,this.trackerPlayerUtils=(s=r,{getPosition:function(){return s.getPosition()},getFile:function(){return s.getPlaylistItem().file},getPlacement:function(){return fe(s.getConfig())},getUserAgent:function(){return navigator.userAgent}}),this.trackingFilter=n.trackingFilter,this.lastQuartile=0,this.progressEvents=[],this.breakStarted=!1,this.started=!1,this.firedError=!1,this.hasComp=!1,this.buffering=!1,Object.keys(l).forEach(function(e){var t;l.hasOwnProperty(e)&&0===e.indexOf("progress")&&(t=""+e.split("_")[1],e={key:e,offset:t,tracked:!1,percentage:!1},/^\d+%$/.test(t)?(e.percentage=!0,e.offset=parseFloat(t)):e.offset=r.utils.seconds(t),o.progressEvents.push(e))}),this.setFactories()}(E=gt.prototype).sendEvent=function(e,t){(t=t||{}).tag||(t.tag=this.adTag),this.trigger(e,t)},E.sendTimeEvent=function(e,t,i){var r=t.getAdDuration(),t=t.getAdRemainingTime(),i=M({duration:r},i);this.sendEvent(e,i),0<t&&(i.position=r-t,this.trigger("time",i))},E.handleQuartile=function(e,t){this.sendTimeEvent("quartile",e,{quartile:t})},E.genEvent=function(t){var i=this;return function(e){i.on(t,e)}},E.setMute=function(){var e=0===this.vpaidAd.getAdVolume();this.player.getMute()!==e&&this.player.setMute(e)},E.prepareNonlinearAd=function(){var e,t;this.player.utils.style(this.iframe,{height:150}),this.iframe.classList.add("jw-vpaid-non-linear"),this.resize(null,150),this.instream&&(this.instream.noResume=!0,this.instream.applyProviderListeners(null),this.instream.destroy(),this.instream=null,t=(e=this.playerContainer.querySelector(".jw-media")).querySelector("video,audio"),e.insertBefore(t,this.iframe),t.play())},E.progressInterval=function(t){var i,r=this;clearInterval(this.remainingTimeInterval),t&&t.getAdRemainingTime&&(i=-1,this.remainingTimeInterval=setInterval(function(){var e;r.paused||(e=t.getAdRemainingTime(),isNaN(e)||e<=0||i===e||(i=e,r.sendTimeEvent("remainingTimeChange",t,{remainingTime:e})))},250))},E.genListeners=function(r){var n=this;return{AdLoaded:function(){r.setAdVolume(n.getPlayerVolume()),r.startAd()},AdStarted:function(){var e=r.getAdDuration?r.getAdDuration():0,t=!r.getAdLinear||r.getAdLinear(),i=t?"linear":"nonlinear";t?(n.instream=n.instream||n.player.createInstream(),n.vpaidControls||n.instream.hide(),t=n.instream.getMediaElement(),n.player.getPip()&&n.player.requestPip(t),n.progressInterval(r)):n.prepareNonlinearAd(),n.sendEvent("impression",{linear:i,duration:e}),n.sendEvent("play",{oldstate:"buffering",newstate:x,linear:i}),n.handleMute=!0,r.subscribe(n.setMuteCallback,"AdVolumeChange",r)},AdVideoStart:function(){n.sendEvent("started")},AdStopped:function(){n.sendEvent("stopped")},AdPaused:function(){n.paused||(n.paused=!0,n.sendEvent("pause",{newstate:s,oldstate:x}))},AdPlaying:function(){var e;n.paused&&(e=!r.getAdLinear||r.getAdLinear()?"linear":"nonlinear",n.paused=!1,n.sendEvent("play",{newstate:x,oldstate:s,linear:e}))},AdLinearChange:function(){!r.getAdLinear||r.getAdLinear()?(n.player.utils.style(n.iframe,{height:"100%"}),n.player.off(null,null,n),n.instream=n.instream||n.player.createInstream(),n.instream.init(),n.vpaidControls||n.instream.hide()):n.prepareNonlinearAd()},AdDurationChange:function(){n.sendTimeEvent("remainingTimeChange",r,{isDurationChange:!0,remainingTime:r.getAdRemainingTime()})},AdRemainingTimeChange:function(){n.paused||n.sendTimeEvent("remainingTimeChange",r,{remainingTime:r.getAdRemainingTime()})},AdExpandedChange:function(){n.sendEvent("expandedChange",{expanded:r.getAdExpanded()})},AdSkippableStateChange:function(){n.sendEvent("skippableStateChange",{skippable:r.getAdSkippableState()})},AdSkipped:function(){n.sendEvent("skipped")},AdVideoFirstQuartile:function(){n.handleQuartile(r,1)},AdVideoMidpoint:function(){n.handleQuartile(r,2)},AdVideoThirdQuartile:function(){n.handleQuartile(r,3)},AdVideoComplete:function(){n.sendEvent("complete")},AdUserClose:function(){n.sendEvent("close")},AdClickThru:function(e,t,i){n.sendEvent("click",{id:t,url:e,playerHandles:i})},AdError:function(e){var t=function(e){if(e){var t=e.match(/\b(?:[34])[0-9]{2}\b/);if(t)return parseInt(t[0],10);if(e.match(/timeout/i))return e.match(/vpaid|vast/i)?301:402;if(e.match(/found/i))return 401;if(e.match(/supported/i))return 403;if(e.match(/(?:displaying|media file)/i))return 405}return 901}(e);n.sendEvent("error",{message:e,code:t,adErrorCode:5e4+t})}}},E.callback=function(){try{this.vpaidAd=this.iframe.contentWindow.getVPAIDAd();var e=this.vpaidAd.handshakeVersion("2.0");if(parseFloat(e)<1)throw new Error("Invalid vpaid version in handshake")}catch(e){return void this.sendEvent("error",{message:e.message||"VPAID general error",code:901,adErrorCode:51901})}var t=this.vpaidAd,i=this.genListeners(t),r=(Object.keys(i).forEach(function(e){t.subscribe(i[e],e,t)}),this.listeners=i,{AdParameters:this.adParams}),n=this.iframe.contentWindow.document.createElement("div"),n=(n.className="jw-vpaid-wrapper",n.style.height="100%",this.iframe.contentWindow.document.body.appendChild(n),0<=this.vpaidURL.indexOf("//imasdk.googleapis.com/js/sdkloader/vpaid_adapter.js")&&(this.iframe.contentWindow.HTMLVideoElement=HTMLVideoElement),{videoSlot:this.instream.getMediaElement(),slot:n});t.initAd(this.player.getWidth(),this.player.getHeight(),"normal",1e3,r,n),t.setAdVolume(this.getPlayerVolume())},E.play=function(){this.vpaidAd.resumeAd()},E.pause=function(){this.vpaidAd.pauseAd()},E.skip=function(){return!(!this.vpaidAd.skipAd||!this.vpaidAd.getAdSkippableState()||(this.vpaidAd.skipAd(),0))},E.stop=function(){if(this.vpaidAd)try{this.vpaidAd.stopAd()}catch(e){}},E.getPlayerVolume=function(){return this.player.getMute()?0:this.player.getVolume()/100},E.setVolume=function(e){this.handleMute=!1,this.vpaidAd.setAdVolume(e/100)},E.resize=function(e,t){var i;this.vpaidAd&&this.vpaidAd.resizeAd&&(i=this.player.getFullscreen()||document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen?"fullscreen":"normal",this.vpaidAd.resizeAd(e||this.player.getWidth(),t||this.player.getHeight(),i))},E.destroy=function(){var e=this;if(this.removeEvents(),clearInterval(this.remainingTimeInterval),this.vpaidAd)try{var t=this.listeners,i=this.vpaidAd;Object.keys(t).forEach(function(e){i.unsubscribe(t[e],e,i)}),i.unsubscribe(this.setMuteCallback,"AdVolumeChange",i)}catch(e){}setTimeout(function(){e.iframe&&e.iframe.parentNode&&e.iframe.parentNode.removeChild(e.iframe)},0),this.vpaidAd=null,this.player=null,this.instream=null},E.removeEvents=function(){this.player&&this.player.off(null,null,this),this.off()},E.attachMedia=function(){},E.detachMedia=function(){},E.volume=function(){},E.mute=function(){},E.getState=function(){return this.vpaidState.linear?this.paused?s:x:"idle"};var ft=gt;function gt(e,t,i,r,n){var a=this;this.player=e,this.state=e.state,this.vpaidURL=i,this.adTag=r,this.adParams=n.adParams,this.vpaidControls=n.vpaidControls,this.remainingTimeInterval=null,this.type="vpaid",this.instream=t||e.createInstream(),this.vpaidState={linear:!1,expanded:!1,remainingTime:-1},this.paused=!1,M(this,e.Events),this.setMuteCallback=function(){a.handleMute?a.setMute():a.handleMute=!0},this.playerContainer=this.player.getContainer(),n.adOptOut?setTimeout(function(){a.sendEvent("error",{message:"Conditional ad rejected",code:408})},0):this.iframe=(e.utils,i=this.vpaidURL,r=this.playerContainer,t=this.callback.bind(this),(n=document.createElement("iframe")).setAttribute("allow","autoplay"),n.src="javascript:false",n.classList.add("jw-vpaid-iframe"),n.scrolling="no",r.querySelector(".jw-media").appendChild(n),(r=n.contentWindow.document).open().write("\n    <body onload=\"\n        var js = document.createElement('script');\n        js.src = '"+i+"';\n        js.addEventListener('load', function() { window.myCallback(); });\n        document.body.appendChild(js);\"\n    style=\"margin: 0\">"),n.contentWindow.myCallback=t,r.close(),n)}(E=yt.prototype).clickHandler=function(){this.player.pause({reason:J}),this.sendPing(this.icon.trackers.iconClick),this.utils.openLink(this.icon.clickThrough,"_blank",{rel:"noreferrer"})},E.show=function(){clearTimeout(this.showTimeout),this.utils.addClass(this.iconContainer,"jw-ad-icon-active"),this.sendPing(this.icon.trackers.iconView),this.icon.duration&&(this.duration=this.utils.seconds(this.icon.duration),this.beginningPosition=this.utils.seconds(this.icon.offset))},E.updateTime=function(e){e-this.beginningPosition>=this.duration&&this.remove()},E.sendPing=function(e){if(e){var t=this.images,i=new Image;i.src=e;for(var r=t.length;r--&&(t[r].width||t[r].complete);)t.length=r;t.push(i)}},E.remove=function(){clearTimeout(this.showTimeout),this.div.contains(this.iconContainer)&&this.div.removeChild(this.iconContainer),this.ui&&(this.ui.destroy(),this.ui=null)};var vt=yt;function yt(e,t,i){this.player=e,this.icon=t,this.div=i;var r,e=this.utils=e.utils,n=(this.images=[],this.iconContainer=(a=t.style,n=e,(r=document.createElement("div")).className="jw-ad-icon-container",n.style(r,a),r),function(e,t){var i,r=e.resourceSource,n=e.resourceType;switch(n){case"iframe":(i=document.createElement("iframe")).src=r,i.scrolling="no";break;case"html":i=document.createElement("div"),t.replaceInnerHtml(i,r);break;default:(i=document.createElement("img")).src=r,i.setAttribute("type",n)}return t.addClass(i,"jw-ad-icon"),i}(t.resource,e)),a=(this.iconContainer.appendChild(n),i.appendChild(this.iconContainer),1e3*e.seconds(t.offset));0<a?this.showTimeout=setTimeout(this.show.bind(this),a):this.show(),this.ui=new e.UI(this.iconContainer).on("click",this.clickHandler,this)}(E=At.prototype).init=function(e,t){return this.init=function(){throw new Error("Adplayer can only be initialized once")},this.blockingInstreamPlayer=e,this.reason=t,this.prepareAdPod()?(this.player.on(T,this.playerFullscreenHandler,this),this.player.on(_,this.playerVolumeHandler,this),this.player.on(I,this.muteHandler,this),this.player.on(C,this.playerResizeHandler,this),this.playAd()):Promise.reject()},E.prepareAdPod=function(){var e,t=this,i=null,r=0,n=[];if(this.vastAd&&(bt(this.vastAd,this.debugTrackFn,this.player,this.optionalParams,this.blockingInstreamPlayer),(i=this.prepareAdPodItem(this.vastAd))&&"vpaid"===i.adType&&!wt(this.vastAd)&&(i=null)),this.vastAdPod)for(var a=null,s=0;s<this.vastAdPod.length;s++){var o=this.vastAdPod[s],l=(bt(o,this.debugTrackFn,this.player,this.optionalParams,this.blockingInstreamPlayer),this.prepareAdPodItem(o));if(l){if(a!==l.adType&&"instream"===a)break;a=l.adType;"vpaid"!==l.adType||wt(o)?(o=n.length+r===s,l&&o&&n.push(l)):r++}else r++}return n.length||i?(n.length?(e=n,this.vastOptions=[],e.forEach(function(e){t.vastOptions.push(t.getInstreamOptions(e.vastAd))})):(e=i,this.vastOptions=this.getInstreamOptions(this.vastAd)),this.adPodItems=e,!0):(this.scheduledAd._pod&&this.scheduledAd._pod.length||this.adError("No Compatible Creatives",403),!1)},E.prepareAdPodItem=function(e){e.tracker.linear="linear";var i,t=(""+e.media[0].adType).toLowerCase()||"instream",r={vastAd:e,sources:[],adType:t="vpaid"!==t||wt(e)?t:"instream"},e=(void 0!==this.scheduledAd.skipoffset&&(r.skipoffset=this.scheduledAd.skipoffset),e.media),n={};if(e.forEach(function(e,t){r.sources.push({file:e.file,mimeType:e.type,type:(""+e.type).replace(/^(?:video|audio)\/(?:x-)?/,""),id:t}),n[e.file]={width:e.width||0,height:e.height||0,bitrate:e.bitrate||e.maxBitrate,id:t}}),"instream"===t&&(r.sources=(e=r.sources,i=jwplayer.api.availableProviders.filter(function(e){return"flash"!==e.name}),e=e.filter(function(t){return i.some(function(e){return e.supports(t)})}),(t=e.filter(function(e){return"3gpp"!==e.type})).length?t:e)),0===r.sources.length)return null;var a,s,o,l=this.player.getSafeRegion(!1).width,t=this.player.getConfig().bandwidthEstimate||5e5,d=(s=t/1e3*.95,e=r.sources.map(function(e){return n[e.file]}),(1<(e=(o=(o=e.filter(function(e){return e.width>=l}).sort(function(e,t){return e.width-t.width})).length?o:e.sort(function(e,t){return t.width-e.width})).filter(function(e){return e.width===o[0].width})).length?(t=e.reduce(function(e,t){return t.bitrate<s&&t.bitrate>e.bitrate?t:e}),a=e.reduce(function(e,t){return t.bitrate>=s&&t.bitrate<e.bitrate?t:e}),t||a):e[0]).id);return r.vastAd.selectedMedia=r.sources.filter(function(e){return e.id===d})[0],this.mediaType=r.vastAd.selectedMedia.mimeType.toLowerCase(),r.sources=[r.vastAd.selectedMedia],r},E.getInstreamOptions=function(e){return{skipoffset:this.getSkipOffset(e),skipMessage:this.optionalParams.skipMessage,skipText:this.optionalParams.skipText}},E.getSkipOffset=function(e){var t=[this.scheduledAd.skipoffset,this.optionalParams.skipoffset,e.skipoffset].filter(function(e){return null!=e});return e.skipoffset=t.length?this.player.utils.seconds(t[0]):void 0,e.skipoffset},E.getVastAd=function(){var e,t=this.scheduledAd._adPodIndex;if(this.adPodItems){if((e=this.adPodItems.length?this.adPodItems[t]:this.adPodItems).vastAd)return e.vastAd}else if(this.vastAdPod&&this.vastAdPod.length)return this.vastAdPod[t];return this.vastAd},E.adError=function(e,t,i){clearTimeout(this.creativeTimeout),this.creativeTimeout=null;var r=this.getVastAd(),n=(Et(r),t=t||900,"vpaid"===this.adType?5e4:1e4),n=(i=i||n+t,M({},this.scheduledAd,r)),a={jwpseg:n.jwpseg},e=p(this.playlistItemManager,{message:e,code:t,adErrorCode:i},n,a);this.vastAdPod&&this.scheduledAd._adPodIndex<this.vastAdPod.length-1?this.triggerEvent(h,e):(r.tracker.error(e.code),this.triggerEvent(o,e),this.removePlayerListeners())},E.playAd=function(){var e=this.scheduledAd._adPodIndex,t=this.adPodItems[e]||this.adPodItems;if(this.adType=t.adType,this.blockingInstreamPlayer&&(i=this.optionalParams.loadingAd,this.blockingInstreamPlayer.setText(i)),"vpaid"===this.adType)return this.playVpaid(t.vastAd);if("static"===this.adType)return this.playStatic(),Promise.resolve();var i=Array.isArray(this.adPodItems)?this.adPodItems.slice(e):this.adPodItems,t=Array.isArray(this.vastOptions)?this.vastOptions.slice(e):this.vastOptions;return this.initialIndex=e,this.playInstream(i,t).catch(this.player.utils.noop)},E.clearVpaidBlocking=function(){var e=this.vpaidPlayer.instream;e&&e!==this.blockingInstreamPlayer&&(this.vpaidPlayer.instream=null,this.clearBlocking(e))},E.clearBlocking=function(e){(e=e||this.blockingInstreamPlayer)&&e!==this.instreamPlayer&&e.destroy()},E.getState=function(){return this.instreamPlayer?this.instreamPlayer.getState():this.vpaidPlayer?this.vpaidPlayer.getState():""},E.clearNonlinear=function(){this.staticPlayer.stop(),this.vpaidPlayer&&(this.clearVpaidBlocking(),this.vpaidPlayer&&(this.vpaidPlayer.stop(),this.vpaidPlayer.destroy(),this.vpaidPlayer=null))},E.destroy=function(){var e;this.off(),this.removePlayerListeners(),clearTimeout(this.creativeTimeout),this.creativeTimeout=null,this.instreamPlayer&&(e=this.instreamPlayer,this.instreamPlayer=null,this.clearBlocking(e)),this.vpaidPlayer&&(this.clearVpaidBlocking(),this.vpaidPlayer&&(this.vpaidPlayer.destroy(),this.vpaidPlayer=null)),this.clearNonlinear(),Et(this.vastAd),this.player=null,this.instreamPlayer=null,this.scheduledAd=null,this.vastBuffet=null,this.vastAd=null,this.vastAdPod=null},E.pause=function(e){e=e.reason;this.reason=e||n,this.instreamPlayer?this.instreamPlayer.pause():this.vpaidPlayer&&this.vpaidPlayer.pause()},E.play=function(e){e=e.reason;this.reason=e||n,this.instreamPlayer?this.instreamPlayer.play():this.vpaidPlayer&&this.vpaidPlayer.play()},E.skip=function(){var e;this.instreamPlayer?0<(e=this.getSkipOffset(this.getVastAd()))&&this.position<e||this.instreamPlayer.skipAd():this.vpaidPlayer&&this.vpaidPlayer.skip()},E.removePlayerListeners=function(){this.player&&(this.player.off(T,this.playerFullscreenHandler,this),this.player.off(_,this.playerVolumeHandler,this),this.player.off(I,this.muteHandler,this),this.player.off(i,this.viewableHandler,this),this.player.off(C,this.playerResizeHandler,this)),this.instreamPlayer&&this.instreamPlayer.off(null,null,this),this.vpaidPlayer&&(this.vpaidPlayer.removeEvents(),this.clearVpaidBlocking(),this.vpaidPlayer&&(this.vpaidPlayer.destroy(),this.vpaidPlayer=null)),this.staticPlayer.stop(),this.staticPlayer.removeEvents()},E.adEventObject=function(e){var t=this.getVastAd(),i=M({},this.scheduledAd,t),i=O(this.playlistItemManager,i);return i.viewable=this.player.getViewable(),this.adPodItems&&this.adPodItems.length&&(i.sequence=this.scheduledAd._adPodIndex+1,i.podcount=this.adPodItems.length),this.mediaType&&(i.creativetype=this.mediaType),this.scheduledAd._vmap&&(i.vmap=this.scheduledAd._vmap),-1!==te.indexOf(e)&&(i.universalAdId=t.universalAdId,i.categories=t.categories),i},E.playStatic=function(){this.vastAd.tracker.linear="nonlinear";var e=this.vastAd.media[0],t=(this.vastAd.selectedMedia=e,this.vastAd.clickthrough||""),i=this.staticPlayer;i.removeEvents(),i.on("play",this.impressionHandler,this),i.on("play",this.playHandler,this),i.on("complete",this.combinedCompleteHandler,this),i.on("click",this.clickStaticHandler,this),i.on("error",this.staticErrorHandler,this),i.playAd(e.file,t,e.minDuration,this.scheduledAd._currentTag,this.scheduledAd.requestTimeout),this.clearBlocking()},E.creativeAdError=function(e,t,i){this.adError(e,t,i),this.adPodItems&&this.adPodItems.length-1>this.scheduledAd._adPodIndex&&(this.vpaidPlayer&&(this.vpaidPlayer.destroy(),this.vpaidPlayer=null),"instream"===this.adType&&this.instreamPlayer?this.instreamPlayer.loadNextItemOnError():(this.scheduledAd._adPodIndex++,this.playAd()))},E.playVpaid=function(e){var t=this,i=(clearTimeout(this.creativeTimeout),this.creativeTimeout=setTimeout(function(){t.creativeAdError("VPAID tag communication timeout",900,50004)},this.scheduledAd.creativeTimeout),wt(this.vastAd=e)),e=this.optionalParams.conditionaladoptout&&e.conditionalAd;if(this.vastAd.selectedMedia=i,this.mediaType=i.type,"flash"===Pt(i))return this.creativeAdError("Flash creatives are not supported",403,10403),Promise.reject();e={adParams:this.vastAd.adParams,vpaidControls:this.optionalParams.vpaidcontrols,adOptOut:e};return this.vpaidPlayer=new ft(this.player,this.blockingInstreamPlayer,i.file,this.scheduledAd._currentTag,e),this.blockingInstreamPlayer&&this.blockingInstreamPlayer.applyProviderListeners(this.vpaidPlayer),this.vpaidPlayer.on("play",this.playHandler,this),this.vpaidPlayer.on("pause",this.pauseHandler,this),this.vpaidPlayer.on("quartile",this.quartileHandler,this),this.vpaidPlayer.on("remainingTimeChange",this.remainingTimeHandler,this),this.vpaidPlayer.on("click",this.clickVpaidHandler,this),this.vpaidPlayer.on("error",this.playbackErrorHandler,this),this.vpaidPlayer.on("impression",this.impressionHandler,this),this.vpaidPlayer.on("expandedChange",this.vpaidExpandedHandler,this),this.vpaidPlayer.on("close",this.adCloseHandler,this),this.vpaidPlayer.on("skipped",this.vpaidAdSkipped,this),this.vpaidPlayer.on("stopped",this.endOfVpaidAdHandler,this),this.vpaidPlayer.on("complete",this.adCompleteHandler,this),this.vpaidPlayer.on("started",this.adStartedHandler,this),this.vpaidPlayer.on("skippableStateChange",this.skippableStateChangeHandler,this),Promise.resolve()},E.skippableStateChangeHandler=function(e){e.skippable&&this.blockingInstreamPlayer&&(this.blockingInstreamPlayer.off(r,this.skipVpaidAd,this),this.blockingInstreamPlayer.setupSkipButton(0,this.optionalParams,this.player.utils.noop),this.blockingInstreamPlayer.on(r,this.skipVpaidAd,this))},E.playInstream=function(e,t){var i=this,r=this.player.getEnvironment().OS;if(r.android&&2===r.version.major&&3===r.version.minor)return this.adError("Android 2.3 not supported",900,60007),Promise.reject();clearTimeout(this.creativeTimeout),this.blockingInstreamPlayer?this.instreamPlayer=this.blockingInstreamPlayer:this.instreamPlayer=this.player.createInstream().init(),this.instreamPlayer.on("play",this.playHandler,this),this.instreamPlayer.on("pause",this.pauseHandler,this),this.instreamPlayer.on("state",this.stateHandler,this),this.instreamPlayer.on("time",this.timeHandler,this),this.instreamPlayer.on("playlistItem",this.playlistItemHandler,this),this.instreamPlayer.on("complete",this.adCompleteHandler,this),this.instreamPlayer.on("playlistComplete",this.endOfAdBreakHandler,this),this.instreamPlayer.on("mute",this.muteHandler,this),this.instreamPlayer.on("instreamClick",this.clickInstreamHandler,this),this.instreamPlayer.on("adSkipped",this.adSkipped,this),this.instreamPlayer.on("error",this.playbackErrorHandler,this),this.instreamPlayer.on("mediaError",this.playbackErrorHandler,this),this.instreamPlayer.on("destroyed",function(){i.instreamPlayer=null},this);r=this.instreamPlayer.loadItem(e,t);return this.clearBlocking(),r},E.playerFullscreenHandler=function(e){var t=this.getVastAd().tracker;t.trackOmidEvent(T,e.fullscreen),e.fullscreen&&t.started&&t.fullscreen()},E.playerResizeHandler=function(e){this.getVastAd().tracker.trackOmidEvent("resize",e.width,e.height),this.vpaidPlayer&&this.vpaidPlayer.resize(e.width,e.height)},E.playerVolumeHandler=function(e){this.getVastAd().tracker.trackOmidEvent("volume",e.volume/100),this.vpaidPlayer&&this.vpaidPlayer.setVolume(e.volume)},E.playlistItemHandler=function(e){var t=this;this.instreamPlayer&&(clearTimeout(this.creativeTimeout),this.creativeTimeout=setTimeout(function(){t.creativeAdError("Video creative timeout",402,10402)},this.scheduledAd.creativeTimeout),this.scheduledAd._adPodIndex=e.index+this.initialIndex,0<this.scheduledAd._adPodIndex&&this.triggerEvent(F))},E.impressionHandler=function(e){var t=this.getVastAd(),i=t.tracker,r=M({},this.scheduledAd,t),t=e.duration||t.duration||this.getDurationFromVideoTag(),n=this.player.getVolume()/100;i.impression(t,n),this.player.getViewable()?i.viewable():i.notViewable(),this.triggerEvent(a,O(this.playlistItemManager,r,{duration:t,linear:e.linear||i.linear})),this.setupViewableListener()},E.viewableHandler=function(e){e.viewable?(this.viewablePlayedTime=0,this.lastPosition=null,this.adViewableImpressionHandler=this.adViewableHandler):this.adViewableImpressionHandler=this.player.utils.noop},E.bufferStartHandler=function(e){e.buffering=!0,e.trackOmidEvent("bufferStart")},E.bufferFinishHandler=function(e){e.buffering=!1,e.trackOmidEvent("bufferFinish")},E.stateHandler=function(e){var t=e.oldstate,e=e.newstate;e===t&&"playing"!==e||(t="loading"===e||"stalled"===e,e=this.getVastAd().tracker,!t&&e.buffering?this.bufferFinishHandler(e):t&&e.started&&this.bufferStartHandler(e))},E.playHandler=function(e){var t=this;clearTimeout(this.creativeTimeout),this.creativeTimeout=null;var i,r,n=this.getVastAd(),a=n.tracker;a.started?e.oldstate===s&&(a.resume(),this.dispatchPlay(e)):(this.vpaidPlayer&&(a.linear=e.linear),this.instreamPlayer&&this.impressionHandler({linear:a.linear}),i=M({},this.scheduledAd,n),r=O(this.playlistItemManager,i,{linear:a.linear,metadata:!0}),this.triggerEvent(Q,r),n.companions&&(r=O(this.playlistItemManager,i,{companions:n.companions.map(function(e){var t,i="iframe"===e.type||"html"===e.type?e.type:"static";return e.trackers&&e.trackers.creativeView&&e.trackers.creativeView.length&&(t=e.trackers.creativeView),{width:e.width,height:e.height,type:i,resource:e.source,creativeview:t,click:e.clickthrough}})}),this.triggerEvent("adCompanions",r)),n.icons&&(n.iconInstances=n.icons.map(function(e){return new vt(t.player,e,t.div)})),i=this.companion,n=9<this.player.utils.flashVersion()?n.companions:(r=n.companions)?r.filter(function(e){return e.type.indexOf("flash")<0}):[],this.optionalParams.companion&&n&&n.length&&(a.hasComp=i.addCompanion(this.optionalParams.companion,n)),a.start(),a.creativeView(),this.dispatchPlay(e))},E.pauseHandler=function(e){clearTimeout(this.creativeTimeout),this.creativeTimeout=null,this.getVastAd().tracker.pause(),null===this.reason&&"vpaid"===this.adType&&(this.reason=$),this.setState(e)},E.remainingTimeHandler=function(e){var t=this,i=(e.duration?this.duration=e.duration:this.duration=Math.max(1,this.duration,e.remainingTime),0<=e.remainingTime?this.duration-e.remainingTime:0);this.position===i?this.creativeTimeout=this.creativeTimeout||setTimeout(function(){t.creativeAdError("Video stall",400)},this.scheduledAd.creativeTimeout):this.creativeTimeout&&(clearTimeout(this.creativeTimeout),this.creativeTimeout=null),this.timeHandler({position:i,duration:this.duration,isDurationChange:e.isDurationChange})},E.quartileHandler=function(e){var t;e.duration?this.duration=e.duration:(t=4*e.remainingTime/(4-e.quartile),this.duration=Math.max(this.duration,1,t)),this.timeHandler({position:this.duration*e.quartile*.25,duration:this.duration})},E.adViewableHandler=function(e){var e=e.position,t=(null===this.lastPosition&&(this.lastPosition=e),e-this.lastPosition);this.lastPosition=e,t=Math.min(Math.max(0,t),4),this.viewablePlayedTime+=t,2<=this.viewablePlayedTime&&(this.player.off(i,this.viewableHandler,this),this.adViewableImpressionHandler=this.player.utils.noop,this.triggerEvent("adViewableImpression",{}))},E.timeHandler=function(e){var t=this.getVastAd(),i=e.position,r=e.duration,n=(this.adViewableImpressionHandler(e),r-i),a=t.tracker,s=this.optionalParams.dynamicMessage||"",o=this.optionalParams.podMessage||"";s&&0<n&&(s=s.replace(/(\b)xx(s?\b)/gi,"$1"+Math.ceil(n)+"$2"),this.adPodItems&&1<this.adPodItems.length&&o&&(n=this.scheduledAd._adPodIndex+1,s=(o=(o=o.replace(/__AD_POD_CURRENT__/g,""+n)).replace(/__AD_POD_LENGTH__/g,""+this.adPodItems.length))+" "+s),this.instreamPlayer?this.instreamPlayer.setText(s):this.vpaidPlayer&&this.vpaidPlayer.instream&&this.vpaidPlayer.instream.setText(s)),e.isDurationChange||(a&&a.time(i,r),t.iconInstances&&t.iconInstances.forEach(function(e){e.updateTime(i)}),(n={}).position=this.position=i,n.duration=r,this.triggerEvent("adTime",n))},E.combinedCompleteHandler=function(){this.adCompleteHandler(),this.endOfAdBreakHandler()},E.adCompleteHandler=function(){clearTimeout(this.viewableTimeout);var e=this.getVastAd(),e=(Et(e),e.tracker);e.firedError||(e.complete(),this.triggerEvent(q))},E.adCloseHandler=function(){clearTimeout(this.viewableTimeout);var e=this.getVastAd().tracker;e.firedError||e.close()},E.adStartedHandler=function(){this.triggerEvent(G)},E.endOfVpaidAdHandler=function(){if(clearTimeout(this.viewableTimeout),this.adPodItems&&this.adPodItems.length-1>this.scheduledAd._adPodIndex)return this.vpaidPlayer&&(this.vpaidPlayer.destroy(),this.vpaidPlayer=null),this.scheduledAd._adPodIndex++,void this.playAd();this.endOfAdBreakHandler()},E.endOfAdBreakHandler=function(){this.removePlayerListeners(),this.trigger(z)},E.muteHandler=function(e){var t=this.getVastAd().tracker;t&&(e.mute?t.mute():t.unmute(),this.vpaidPlayer&&this.vpaidPlayer.setVolume(e.mute?0:this.player.getVolume()))},E.clickStaticHandler=function(){var e=this.getVastAd();this.player.pause({reason:J}),this.clickThrough(e)},E.clickVpaidHandler=function(e){var t=this.getVastAd(),i=!0;e&&void 0!==e.url&&(!1===e.playerHandles&&(i=!1),t.clickthrough=e.url),this.clickThrough(t,i)},E.clickInstreamHandler=function(){this.instreamPlayer.getState()!==s&&this.clickThrough(this.getVastAd())},E.playbackErrorHandler=function(e){var t=e.message||"Error Playing Ad Tag",i=e.code;i&&232404===i?i=403:(!i||i<=4||901<i)&&(i=405),this.vpaidPlayer&&"function"==typeof this.vpaidPlayer.off?(this.vpaidPlayer.off(),this.creativeAdError(t,i,e.adErrorCode)):this.adError(t,i,e.adErrorCode)},E.staticErrorHandler=function(){this.adError("Unable to fetch NonLinear resource",502)},E.vpaidExpandedHandler=function(e){var t=this.getVastAd().tracker;e.expanded?t.expand():t.collapse()},E.getDurationFromVideoTag=function(){var e=this.blockingInstreamPlayer?this.blockingInstreamPlayer.getMediaElement():null;return e?e.duration:0},E.setupViewableListener=function(){this.player.off(i,this.viewableHandler,this),this.player.on(i,this.viewableHandler,this),this.viewableHandler({viewable:this.player.getViewable()})},E.dispatchPlay=function(e){"static"===this.adType||"vpaid"===this.adType&&"linear"!==e.linear||(null===this.reason&&"vpaid"===this.adType&&(this.reason=$),this.setState(e))},E.setState=function(e){var t=e.newstate,e=e.oldstate,i=t===x,r=this.adEventObject(i?W:X);r.newstate=t,null!==this.reason&&(r[i?"playReason":"pauseReason"]=this.reason,this.reason=null),this.vpaidPlayer?(r.oldstate=e,this.vpaidPlayer.trigger("state",r)):this.instreamPlayer.setEventData(r)},E.clickThrough=function(e,t){void 0===t&&(t=!0),e.tracker.click();var i={};e.clickthrough&&(i.clickThroughUrl=e.clickthrough),this.reason=J,this.triggerEvent(S,i),window.jwcast&&window.jwcast.player.id||e.clickthrough&&t&&window.open(e.clickthrough)},E.skipVpaidAd=function(){this.vpaidPlayer&&this.vpaidPlayer.skip()&&this.vpaidAdSkipped()},E.vpaidAdSkipped=function(){this.adSkipped(),this.endOfVpaidAdHandler()},E.adSkipped=function(){clearTimeout(this.viewableTimeout);var e=this.getVastAd(),t=(e.tracker.skip(),Et(e),"vpaid"===this.adType?void 0:this.getSkipOffset(e));this.triggerEvent(r,{duration:e.duration,skipoffset:t,position:this.position,watchedPastSkipPoint:this.position-t})},E.triggerEvent=function(e,t){var i=this.adEventObject(e);t&&M(i,t),this.trigger(e,i),-1===ee.indexOf(e)&&this.player.trigger(e,i)};var kt=At;function At(e,t,i){this.player=t;var i=(this.playlistItemManager=i).adPlayerProperties,r=i.staticPlayer,n=i.companion,a=i.div,i=i.optionalParams;this.staticPlayer=r,this.companion=n,this.div=a,this.optionalParams=i,this.omidSupport=i.omidSupport,this.debugTrackFn=i.debugTrackFn,this.scheduledAd=e.scheduledAd(),this.vastBuffet=e.adBuffet(),this.vastAdPod=e.adPod(),this.vastAd=this.vastBuffet.length?this.vastBuffet[0]:null,this.adType=null,this.vpaidPlayer=null,this.instreamPlayer=null,this.blockingInstreamPlayer=null,this.mediaType=null,this.adPodItems=null,this.creativeTimeout=null,this.vastOptions=null,this.duration=0,this.position=0,this.initialIndex=0,this.viewablePlayedTime=0,this.adViewableImpressionHandler=t.utils.noop,this.lastPosition=null,this.reason=null,M(this,t.Events)}function Pt(e){return"application/javascript"===e.type||"application/x-javascript"===e.type?"html5":"flash"}function wt(e){for(var t,i=0;i<e.media.length;i++){var r=e.media[i];if("html5"===Pt(r)){t=r;break}}return t}function bt(e,t,i,r,n){e.tracker=new ut(e,e.trackers,t,i,r,n)}function Et(e){e&&e.iconInstances&&(e.iconInstances.forEach(function(e){e.remove()}),e.iconInstances=null)}function b(){}E=Tt=e,(e=It).prototype=Object.create(E.prototype),ge(e.prototype.constructor=e,E),(e=It.prototype).init=function(e,t){var i=this,e=Tt.prototype.init.call(this,e,t);return this.vmapPromise&&this.vmapPromise.then(function(e){!i.isDestroyed()&&e&&e.length&&e.forEach(function(e){e=p(i,e,null,t);i.dispatchAdError(e)})}).catch(function(e){i.isDestroyed()||(e=p(i,e,null,t),i.enqueueAdEvent(o,e,t))}),e},e.adPlayerImpressionHandler=function(e){Ct(e)&&(this.qoe.tick("adImpression"+e.id),e.timeLoading=this.qoe.between("adBreakStart","adImpression"+e.id)),this.player.trigger(a,e)},e.playAdAPI=function(e){var t=this;this.startBlocking(),Promise.resolve(e).then(function(){if(!t.isDestroyed())return t.triggerAdBreakEvents(e),t.startAdBreak(e,{adBlock:t.adBlockErrorDetected,reason:n})}).catch(function(e){return t.isDestroyed()?null:t.dispatchFatalAdError(e)})},e.tryPlayAd=function(t,i){var r=this;return this.reason=i.reason||this.reason,this.dequeueAdEvents(),t?("nonlinear"===t.scheduledAd()._type&&this.stopBlocking(),this.playAd(t).catch(function(e){return r.isDestroyed()?null:r.adWaterfall(t,e,i)})):(this.stopBlocking(),null)},e.playAd=function(r){var n=this,e=r.scheduledAd();return 0===e._waterfallIndex&&this.clearNonlinearAd(),this.removeVastLoader(r),new Promise(function(e,t){var i=new kt(r,n.player,n);i.on(z,e),i.on(o,t),i.on(a,n.adPlayerImpressionHandler.bind(n)),i.on(Q,n.player.trigger),i.on(h,n.dispatchAdError.bind(n)),i.init(n.blockingInstreamPlayer,n.reason).catch(b),n.reason=null,n.adInstreamPlayer=n.blockingInstreamPlayer,n.blockingInstreamPlayer=null,n.adPlayerQueue.push(i)}).then(function(){n.isDestroyed()||"nonlinear"===e._type||n.stopBlocking()})},e.pauseAd=function(e,t){var i;this.adPlayerQueue.length&&(i=this.adPlayerQueue[this.adPlayerQueue.length-1],e?i.pause(t||{}):i.play(t||{}))},e.skipAd=function(){this.adPlayerQueue.length&&this.adPlayerQueue[this.adPlayerQueue.length-1].skip()},e.dispatchFatalAdError=function(e){e&&e.adErrorCode||(e=p(this,{message:"An unexpected ad error has occurred",sourceError:e})),this.dequeueAdEvents(),this.dispatchAdError(e),this.destroyPlayers(),this.stopBlocking()},e.destroyPlayers=function(){this.adPlayerQueue.forEach(function(e){return e.destroy()}),this.adPlayerQueue.splice(0)},e.dispatchAdError=function(e){Ct(e)&&(this.qoe.tick("adError"+e.id),e.timeLoading=this.qoe.between("adBreakStart","adError"+e.id)),this.vmapTracker&&this.vmapTracker.error(e.code),50004!==e.adErrorCode&&50901!==e.adErrorCode||!this.player.getAdBlock()||(this.adBlockErrorDetected=!0);var t=70001===e.adErrorCode?"adWarning":o;this.player.trigger(t,e)},e.clearNonlinearAd=function(){this.adPlayerQueue.length&&this.adPlayerQueue[this.adPlayerQueue.length-1].clearNonlinear()},e.getVMAPTracker=function(e){var t;return e._vmapTracker||(t=new ut(e,e._trackers,this._debugTrackFn,this.player,this.config),e._vmapTracker=this.vmapTracker=t),e._vmapTracker},e._loadTag=function(e,t){var i=e._adQueue[e._waterfallIndex];return this._loadTagUrl(e,i,t)},e._loadTagUrl=function(r,n,a){var s=this;return He(n,this.player,this.item,this.client,this.params,r).then(function(e){"function"==typeof s._debugTrackFn&&s._debugTrackFn({type:"tagReplacement",data:{actualTag:e,originalTag:n}});var t=s._createVastLoader(r,a),i=t.load(e);return a.isPodItemLoader?a.tagIndex&&(t.scheduledAd().adRequestIds[a.tagIndex]=s.player.utils.genId(12)):r._currentTag=e,s._dispatchAdRequest(r,M({tag:e},a)),i})},e._loadPods=function(n,a){var s=this,e=(n.adRequestIds=[],this._createVastLoader(n,a)),t=n._pod.map(function(e,t){function i(){return s.isDestroyed()?null:s._dispatchAdLoaded(n,r)}var r=M({tag:e,isPodItemLoader:!0,tagIndex:t},a),e=s._loadTagUrl(n,e,r).catch(function(e){return e.tagIndex=t,Promise.reject(e)});return e.then(i).catch(b),e.catch(i).catch(b),e});return e.podMultipleVastLoaders(t)},e._loadXML=function(e,t){var i=this;return e._currentTag=e._currentTag||e._adXML.toString(),this.bidsPromise.then(function(){return i._dispatchAdRequest(e,t),i._createVastLoader(e,t).parseXMLString(e._adXML,e._currentTag)})},e._dispatchAdRequest=function(e,t){e=O(this,e,M({jwpseg:e.jwpseg},t));this.player.trigger("adRequest",e),this.qoe.tick("adLoading"+e.id)},e._dispatchAdLoaded=function(e,t){e=O(this,e,t),t=e.id;this.qoe.tick("adLoaded"+t),e.timeLoading=this.qoe.between("adLoading"+t,"adLoaded"+t),this.player.trigger("adLoaded",e)},e._handleVastLoadError=function(e,t,i){var r=e.vloader;return this.removeVastLoader(r),this._getVloaderErrorObject(e,t,i)},e._vloaderWaterfall=function(e,t){var i=this._handleVastLoadError(e,null,t),e=e.vloader;return this.adWaterfall(e,i,t)},e.adWaterfall=function(e,t,i){e=e.scheduledAd();if(this.schedule.canWaterfall(e))return e.jwpseg=null,e._adXML=null,e._waterfallIndex+=1,this.enqueueAdEvent(o,t,i),this.startAdBreak(e,i);throw t},e._createVastLoader=function(t,i){var r=this,e=(void 0===i&&(i={}),this.config),n=new ct(t,this.player,M({requestFilter:e.requestFilter,trackingFilter:e.trackingFilter,item:this.item,params:this.params},i)),a=(this._vloaderQueue.push(n),0);return n.on(h,function(e){a+=1;var e=r._getVloaderErrorObject(e,null,i);r.enqueueAdEvent(o,e,i),n._scheduledAd._pod&&n._scheduledAd._pod.length===a||(e=O(r,t,{podIndex:n._scheduledAd._adPodIndex,tagIndex:a}),r.enqueueAdEvent(F,e,i))}),n.on(d,function(e){r.player.trigger(d,M(O(r,null),e))}),n},e._getVloaderErrorObject=function(e,t,i){e.wrapperAdSystem&&e.wrapperAdSystem.length!==e.wrappedTags.length&&(e.wrapperAdSystem.push(e.adsystem),e.adsystem="");var r=M({adsystem:e.adsystem,wrapper:e.wrapperAdSystem,wrappedTags:e.wrappedTags},e.vloader.scheduledAd());return p(this,e,r,M({tag:e.tag,tagIndex:e.tagIndex||t,podIndex:e.podIndex},M({jwpseg:r.jwpseg},i)))},e.dequeueAdEvents=function(){var i=this;this._events.forEach(function(e){var t=e.type,e=e.event;t===o?i.dispatchAdError(e):i.player.trigger(t,e)}),this._events.splice(0)},e.triggerAdBreakEvents=function(e){var t=this,i=this.getVMAPTracker(e),r=(this.blockingInstreamPlayer.once("destroyed",function(){t.qoe.clear("adBreakStart"),i.breakEnd(),t.player.trigger("adBreakEnd",O(t,e))}),this.qoe.tick("adBreakStart"),i.breakStart(),O(this,e));this.player.trigger("adBreakStart",r),this.player.trigger(F,r)},e.startBlocking=function(){this.blockingInstreamPlayer||(this.blockingInstreamPlayer=this.player.createInstream().init(),this.blockingInstreamPlayer.setText(null))},e.stopBlocking=function(){var e;(this.blockingInstreamPlayer||this.adInstreamPlayer)&&(e=this.blockingInstreamPlayer||this.adInstreamPlayer,this.blockingInstreamPlayer=null,e.destroy()),this.adInstreamPlayer=null},e.loadAd=function(e,t){var i,r=this,n=(void 0===t&&(t={}),this.player.utils);if(e._id=e._id||n.genId(12),e._vmapTracker=this.getVMAPTracker(e),e._adQueue||e._adXML||e._pod){if(t.adBlock)throw p(this,{message:"Ad playback blocked by an ad blocker",adErrorCode:600003},e,t);if(e._pod)return this._loadPods(e,t);var a=function(){return r.isDestroyed()?null:r._dispatchAdLoaded(e,t)};return(i=e._adXML?this._loadXML(e,t):this._loadTag(e,t)).then(a).catch(b),i.catch(a).catch(b),i.catch(function(e){return r.isDestroyed()?null:r._vloaderWaterfall(e,t)})}n.log("scheduled ad has no url or xml",e)},e.playPreloadedPromise=function(e,t){var i=this;void 0===t&&(t={}),e.then(function(e){return i.tryPlayAd(e,t)}).catch(function(e){i.isDestroyed()||(i.dispatchAdError(e),i.stopBlocking())})},e.startAdBreak=function(e,t){var i=this;return void 0===t&&(t={}),this.bidsPromise.then(function(){return i.loadAd(e,t)}).then(function(e){return i.tryPlayAd(e,t)}).catch(function(e){i.dispatchAdError(e),i.stopBlocking()})},e.removeVastLoader=function(e){var t=this._vloaderQueue.indexOf(e);-1!==t&&(e.destroy(),this._vloaderQueue.splice(t,1))},e.isDestroyed=function(){return null===this.player},e.destroy=function(){this._vloaderQueue.forEach(function(e){return e.destroy()}),this.clearNonlinearAd(),this.stopBlocking(),Tt.prototype.destroy.call(this)};var Tt,_t=It;function It(e,t,i,r,n,a,s){return(t=Tt.call(this,e,t,i,r,s)||this).client=R,t.config=r,t.item=i,t.params=n,t.player=e,t.adPlayerProperties=a,t._vloaderQueue=[],t._events=[],t.adPlayerQueue=[],t.qoe=new e.utils.Timer,t.reason=null,t._debugTrackFn=r.debug&&r.trackFn?r.trackFn:null,M(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),e.Events),t}function Ct(e){return e.tag&&(void 0===e.podcount||1===e.sequence)}function St(){}(E=Vt.prototype).getAdRules=function(){return this.adRules},E.resetDefaultSchedule=function(e){var t=void 0===this.pluginConfig.withCredentials||this.pluginConfig.withCredentials,i=this.defaultSchedule=this.configParser.getSchedule(this.pluginConfig,this.adRules);i.isVMAP()&&i.load(this.player,e,this.adClient,{withCredentials:t}).catch(St)},E.getSchedule=function(e,t){return 0<t&&!this.adRules.rulesAllowAdPlayback(t)?this.emptySchedule:e&&e.adschedule?this.configParser.getSchedule(e,this.adRules):(this.resetDefaultSchedule(e),this.defaultSchedule)},E.getOptParams=function(e,t){return this.configParser.getOptParams(e,t)},E.reset=function(){this.adRules.reset()},E.destroy=function(){this.emptySchedule&&this.emptySchedule.destroy(),this.defaultSchedule&&this.defaultSchedule.destroy()};var Rt=Vt,xt={},Mt={},Ot={};function Vt(e,t,i){this.player=e,this.pluginConfig=t,this.adClient=i;var r=this.configParser=new Ye(e.utils),r=this.adRules=new rt(e,r.getAdRules(t),i);this.emptySchedule=new Je(r,e.utils)}function jt(i,r){return xt[r]||(xt[r]=new Promise(function(e,t){new i.key(r);return t()}))}function Bt(){}function Lt(){}var E;e=".jwplayer.jw-flag-time-slider-above .jw-vpaid-non-linear{bottom:66px}.jwplayer.jw-breakpoint-7 .jw-vpaid-non-linear{bottom:132px}.jwplayer.jw-flag-user-inactive:not(.jw-state-paused) .jw-vpaid-non-linear{bottom:.5em}.jwplayer .jw-vpaid-non-linear{bottom:60px}.jwplayer .jw-vpaid-iframe{border:0;width:100%;height:100%;position:absolute;overflow:hidden}.jwplayer .jw-plugin-vast.jw-plugin{top:0;width:100%;pointer-events:none}.jwplayer .jw-plugin-vast.jw-plugin *{pointer-events:all}.jwplayer .jw-plugin-vast .jw-ad-icon-container{position:absolute;display:none;pointer-events:all;cursor:pointer}.jwplayer .jw-plugin-vast .jw-ad-icon-container.jw-ad-icon-active{display:block}.jwplayer .jw-plugin-vast .jw-ad-icon-container iframe{pointer-events:none;border:none;height:100%;width:100%;margin:0}.jw-plugin-vast.jw-vast-nonlinear-active .jw-banner{opacity:1}.jw-plugin-vast.jw-vast-nonlinear-active .jw-vast-nonlinear-close-button{margin:0 auto;opacity:.75}.jw-plugin-vast.jw-vast-nonlinear-active:hover .jw-vast-nonlinear-close-button{opacity:1}.jw-plugin-vast.jw-vast-nonlinear-collapsed .jw-vast-nonlinear-open-button{margin:0 auto;opacity:.5}.jw-plugin-vast.jw-vast-nonlinear-collapsed .jw-banner,.jw-plugin-vast.jw-vast-nonlinear-collapsed .jw-vast-nonlinear-close-button{opacity:0}.jw-plugin-vast.jw-vast-nonlinear-collapsed:hover .jw-vast-nonlinear-open-button{opacity:1}.jw-plugin-vast.jw-vast-nonlinear-collapsed:hover .jw-vast-nonlinear-close-button{opacity:0}.jw-plugin-vast .jw-vast-nonlinear-close-button,.jw-plugin-vast .jw-vast-nonlinear-open-button{position:absolute;right:0;bottom:0;left:0;display:block;margin:auto;width:18px;height:18px;cursor:pointer;opacity:0;transition:opacity .2s ease}.jw-plugin-vast .jw-vast-nonlinear-close-button{transform:rotate(45deg)}","undefined"!=typeof window&&((E=document.createElement("style")).setAttribute("media","screen"),E.innerHTML=e,document.head.appendChild(E)),(window.jwplayerPluginJsonp||window.jwplayer().registerPlugin)(R,"8.1",function(s,o,e){var a,t,l,d,i,r,n,h,u,c,p,m,f,g,v,y=new Rt(s,o,R),k=s.getConfig(),A=s.getEnvironment(),P=o.debug&&o.trackFn?o.trackFn:null,w=s.utils,b=this,E={withCredentials:void 0===o.withCredentials||o.withCredentials},T=!1,_=0,I=!1;function C(e){a&&(e&&(t=a.next,T=a.nextPlaylistRelated),a.schedule.reset(),a.off(null,null,b),a.destroy(),a=null),y.reset(),s.setCues([])}function S(e){var e=e.getMidRolls(),t=[];e.length&&e.forEach(function(e){"nonlinear"!==e._type&&t.push({begin:e._offSet,text:E.cuetext,cueType:"ads"})}),s.addCues(t)}!function(e){try{var t=e.settings.mediationLayerAdServer||"jwp",i=!!e.bidders.length;return("jwp"===t||"jwpspotx"===t)&&i}catch(e){return}}(o.bids)||(d=M({},o.bids)),i=s,n=o,h=R,f=(r=k).key,g=i.utils,p=g,c=n,(v=Ot[m=f]||(Ot[m]=jt(p,m).catch(function(){return{}}).then(function(e){var t,e=!0===c.outstream?(t=!1!==e.canPlayOutstreamAds,"Outstream Ad Limit Reached"):(t=!1!==e.canPlayAds,"Ad Limit Reached");if(!1===t)throw new Error(e);return{message:"Can Play Ads"}}))).catch(Bt),n.bids&&(p=g,(u=Mt[m=f]||(Mt[m]=jt(p,m).catch(function(){return{}}).then(function(e){if(!1===e.canUseVPB)throw new Error("Not entitled for Player Bidding")}))).catch(Bt)),i.on("ready",function(){u&&u.catch(function(e){i.trigger("destroyBidding"),i.trigger(V,Be(e.message,60009,r,h))}),v.catch(function(e){i.trigger("destroyPlugin",e),i.trigger(V,Be(e.message,60002,r,h))})}),"enabled"===o.omidSupport&&ht(w).catch(w.noop),this.version="8.11.0",M(this,s.Events),w.addClass(e,"jw-plugin-vast"),s.on({ready:function(){k.localization=s.getConfig().localization,(E=y.getOptParams(o,k.localization.advertising)).debugTrackFn=P,l={staticPlayer:new le(s,e),companion:new ae(P,A,{openLink:w.openLink}),div:e,optionalParams:E}},cast:function(e){I=!!e.active},play:function(e){b.trigger(x,e)},playlistItem:function(e){_+=1,C(!0);e=s.getPlaylistItem(e.index);t&&e!==t.item&&!T&&(t.off(null,null,b),t.destroy(),t=null,T=!1),E.playlistItemEventCount=_,(a=t||function i(e,t,r){var n=y.getSchedule(e,t),a=new _t(s,n,e,o,r,l,I);return a.init(d,r).then(function(){a.isDestroyed()||s.trigger("adSchedule",O(a,null,{schedule:n}))}).catch(Lt),a.on("preloadNext",function(e){var t=M({},r,{preloadPreroll:!0,playlistItemEventCount:_+1});a.next=i(e.item,t.playlistItemEventCount,t)},b),a}(e,_,E)).attachListeners(),t=null,T=!1,a.schedule.isVMAP()?a.vmapPromise.then(function(){a.isDestroyed()||S(a.schedule)}).catch(Lt):S(a.schedule)},playlistComplete:C,complete:function(){a&&a.clearNonlinearAd()},destroyPlugin:C,destroyBidding:function(){d=null}},this),s.pauseAd=function(e,t){e="boolean"!=typeof e||e,a&&a.pauseAd(e,t)},s.playAd=function(e){var t=0===E.requestTimeout?1/0:E.requestTimeout,i=0===E.creativeTimeout?1/0:E.creativeTimeout,e=Array.isArray(e)?e.slice(0):[e],r=w.genId,n={_id:r(12),_adQueue:e,_waterfallIndex:0,_adPodIndex:0,adBreakId:r(12),_offset:0,_position:(e=s).isBeforePlay()||0===e.getPosition()&&"idle"===e.getState()?"pre":e.isBeforeComplete()||e.getPosition()===e.getDuration()?"post":"mid",requestTimeout:t||5e3,creativeTimeout:i||15e3};a?(a.clearNonlinearAd(),a.playAdAPI(n)):s.once("playlistItem",function(){return a.playAdAPI(n)})},s.skipAd=function(){a&&a.skipAd()},this.destroy=C})}();
