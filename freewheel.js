!function(){"use strict";var E="freewheel",a="jw-flag-ads-freewheel",r="jw-freewheel-before-impression",n="jw-flag-ads-vpaid",o="playing",y="time",s="adBreakStart",l="adBreakEnd",w="adError",d="adSkipped",i="external",_=((g=e.prototype).getSchedule=function(){var e=this.config;return this.adschedule||e.tag||e.schedule||e.ad},g.getAdRules=function(){var e=this.config.rules||{},t=parseInt(e.frequency,10);return{startOn:e.startOn||1,frequency:isNaN(t)?1:t}},g.setOptions=function(r){var n=this;Object.keys(r).forEach(function(e){var t=n.config[e]||n.config[e.toLowerCase()],i=r[e],s=typeof i;if(void 0!==t){if(typeof(t="boolean"!=s&&"number"!=s?t:function(e){if("true"===e)return!0;if("false"===e)return!1;var t=parseFloat(e);return isNaN(t)?e:t}(t))!=s)throw new Error("invalid parameter: "+e+" should be a "+s);n[e]=t}else n[e]=i}),this.admessagedynamic=r.admessage},e),h=null;function e(e,t,i){this.config=t;t=e.localization.advertising,t={admessage:t.admessage,podmessage:t.podmessage,cuetext:t.cuetext,loadingAd:t.loadingAd,skipMessage:t.skipmessage,skipText:t.skiptext,debug:!1,admessagedynamickey:/(\b)xx(s?\b)/g,loadVideoTimeout:15e3,requestTimeout:15e3,adBlockTimeout:4e3},this.setOptions(t),this.fwassetid=i.fwassetid||e.fwassetid,this.duration=i.duration||e.duration||0,this.adschedule=i.adschedule||null,t=i.freewheel||{},e=this.config.freewheel||{};this.profileid=t.profileid||e.profileid,this.sectionid=t.sectionid||e.sectionid,this.networkid=t.networkid||e.networkid,this.serverid=t.serverid||e.serverid,this.custom=t.custom||e.custom||{}}function A(e,t){if(h)return h;if(window.tv&&tv.freewheel)return h=Promise.resolve();var i=document.location.protocol,e=new e.scriptloader(t||("file:"===i||"https:"===i?"https://mssl.fwmrm.net/libs/adm/6.43.0/AdManager.js":"http://adm.fwmrm.net/libs/adm/6.43.0/AdManager.js"));return h=e.load().then(function(){})}var S={},I={},T=((g=t.prototype).setProxy=function(e){this.freewheelProxy=e,this.mute(this.isMuted)},g.attachMedia=function(){},g.detachMedia=function(){},g.mute=function(e){this.isMuted=e,this.freewheelProxy&&this.freewheelProxy.setAdVolume(this.isMuted?0:this.vol)},g.volume=function(e){this.vol=e/100,this.freewheelProxy&&this.freewheelProxy.setAdVolume(this.vol)},g.setFullscreen=function(e){if(this.video){if(e)try{var t=this.video.webkitEnterFullscreen;t&&t.apply(this.video)}catch(e){return!1}else{t=this.video.webkitExitFullscreen;t&&t.apply(this.video)}return!!e}},t);function t(e,t){e.extend(this,t),this.isMuted=!1,this.vol=0,this.freewheelProxy=null}function c(e,t,i){if("start"===e||"0%"===e)return"pre";if("end"===e||"100%"===e)return"post";if("pre"===e||"post"===e||-1<i.indexOf(e,"%"))return e;t=t.seconds(e);return!!i.isNumber(t)&&t}p.prototype.getTagMap=function(e){var d,h,u,r=this,n=this.player,o=n.utils,a={};return o.foreach((d=o,h=n._,u={},d.foreach(e,function(e,t){var i,s,r,n,o,a={},l=t;t.ad&&(l=t.ad),a.offset=(i=c(i=l.offset||l.position||t.offset||"",s=d,r=h)||"pre",r.isNumber(i)&&(s=parseInt(1e3*i,10),r=Math.floor(s)%1e3,n=Math.floor(s/1e3)%60,o=Math.floor(s/6e4)%60,i=(s=(s=Math.floor(s/36e5)%24)<10?"0"+s:s)+":"+(o=o<10?"0"+o:o)+":"+(n=n<10?"0"+n:n)+"."+("000"+r).slice(-3)),i),a.tag=l.tag,l.customadunitname&&(a.customadunitname=l.customadunitname),a.type=l.type||t.type||"linear,nonlinear",void 0!==l.skipoffset&&(a.skipoffset=l.skipoffset),u[e]=a}),u),function(e,t){var i,s=c(t.offset,o,n._);n._.isString(s)&&(s=parseFloat(s.replace("pre","0").replace("post","-1"))),n._.isNumber(s)&&(i={tagName:function(e,t,i){if(!e)return e;for(var s,r=t.getPlaylistItem(),n=e.replace("__random-number__",Math.random()*Math.pow(10,18)).replace("__timestamp__",(new Date).getTime()).replace("__page-url__",encodeURIComponent(window.location.href)).replace("__referrer__",encodeURIComponent(document.referrer)).replace("__player-height__",t.getHeight()).replace("__player-width__",t.getWidth()).replace("__item-duration__",(e=t.getDuration(),s=Math.pow(10,3),Math.round(e*s)/s)).replace("__domain__",encodeURIComponent((e=window.location.href.match(new RegExp(/^[^/]*:\/\/\/?([^/]*)/)))&&1<e.length?e[1]:"")),o=(n=i.companiondiv&&i.companiondiv.id?n.replace("__companion-div__",i.companiondiv.id):n.replace("__companion-div__","")).match(new RegExp(/__item-[a-z 0-9 A-Z]*__/g)),a=0;o&&a<o.length;a++)var l=o[a],d=l.substring(7,l.length-2),n=r.hasOwnProperty(d)&&t._.isString(r[d])?(1e3<(d=r[d]).length&&(d=d.substring(0,1e3)),n.replace(l,encodeURIComponent(d))):n.replace(l,"");return n}(t.tag,n,r.options),type:t.type},void 0!==t.skipoffset&&(i.skipoffset=t.skipoffset),t.customadunitname&&(i.customAdUnitName=t.customadunitname),a[s]=i)}),a};var P=p,L={},u=((g=f.prototype).open=function(e,t){var i=this,s=this.options;if(this.currentAdContext)throw new Error("Request already made");var r=s.getSchedule();if(!r)return this.responsePromise=Promise.reject(),this.responsePromise;L[s.sectionid]||(L[s.sectionid]=Math.floor(2147483648*Math.random()));var n=L[s.sectionid],o=(this.currentAdContext=this.adsManager.newContext(),this.currentAdContext.setProfile(s.profileid),s.freewheel?s.freewheel.sfid:null);if(this.currentAdContext.setSiteSection(s.sectionid,null,n,null,o),this._fwassetid=s.fwassetid,this._fwduration=s.duration,this.schedule=r,this.responsePromise=new Promise(function(e,t){i.currentAdContext.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,e),i.currentAdContext.addEventListener(tv.freewheel.SDK.EVENT_ERROR,t)}),"string"==typeof r)this.currentAdContext.addTemporalSlot(r,tv.freewheel.SDK.ADUNIT_PREROLL,0);else for(var n=new P(e,t),a=this.tagMap=n.getTagMap(r),l=Object.keys(a),d=0;d<l.length;d++){var h=parseFloat(l[d]),u=a[h].tagName,c=a[h].customAdUnitName,f=null;if("overlay"===a[h].type){if(-1===h)continue;f=tv.freewheel.SDK.ADUNIT_OVERLAY}if(!f)switch(h){case 0:f=c||tv.freewheel.SDK.ADUNIT_PREROLL;break;case-1:f=c||tv.freewheel.SDK.ADUNIT_POSTROLL,h=s.duration||1;break;default:f=c||tv.freewheel.SDK.ADUNIT_MIDROLL}this.currentAdContext.addTemporalSlot(u,f,h)}var p,m,g=s.custom,v=!1;for(p in g)Object.prototype.hasOwnProperty.call(g,p)&&("string"!=typeof(m=g[p])&&(m=m.toString()),v||(this.currentAdContext._adRequest._keyValues.push(""),v=!0),"_fw_gdpr"===p?this.adsManager._fwGDPR=g[p]:"_fw_gdpr_consent"===p?this.adsManager._fwGDPRConsent=g[p]:this.currentAdContext.addKeyValue(p,m));return this.responsePromise},g.requestAds=function(e){var t=e.getConfig(),i=tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE,s=(t.autostart&&(i=t.playOnViewable?tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED:tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED),Math.floor(2147483648*Math.random())),r=this.options.freewheel?this.options.freewheel.afid:null,i=("LIVE"===t.streamType||this.streamType&&"LIVE"===this.streamType.toUpperCase()?(this.currentAdContext.setVideoAsset(this._fwassetid,this._fwduration,null,null,i,s,null,r,tv.freewheel.SDK.VIDEO_ASSET_DURATION_TYPE_VARIABLE),this.currentAdContext.setRequestMode(tv.freewheel.SDK.REQUEST_MODE_LIVE)):this.currentAdContext.setVideoAsset(this._fwassetid,this._fwduration,null,null,i,s,null,r),Math.floor(t.bandwidthEstimate/1e3)),s=(this.currentAdContext.setParameter(tv.freewheel.SDK.PARAMETER_DESIRED_BITRATE,i,tv.freewheel.SDK.PARAMETER_LEVEL_OVERRIDE),this.currentAdContext.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),e.getContainer()),r=s.querySelector(".jw-wrapper");r.id=s.id+"-jw-wrapper",this.currentAdContext.registerVideoDisplayBase(r.id),this.currentAdContext.submitRequest()},g.destroy=function(){},f);function f(e,t,i){this.responsePromise=null,this.streamType=i,this.adsManager=new tv.freewheel.SDK.AdManager,this.adsManager.setNetwork(t.networkid),this.adsManager.setServer(t.serverid),this.options=t||{},this.version=e,this.schedule=null,this.tagMap={},this._fwassetid=null,this._fwduration=0}function p(e,t){this.player=e,this.options=t}function m(e,t,i){var s;return void 0===i&&(i=null),(s={})[tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL]="pre",s[tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL]="mid",s[tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL]="post",s[tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY]="overlay",s[tv.freewheel.SDK.TIME_POSITION_CLASS_DISPLAY]="display",{type:e,client:E,adposition:s[i]||((e=t).isBeforePlay()||0===e.getPosition()?"pre":e.isBeforeComplete()||e.getPosition()===e.getDuration()?"post":"mid"),viewable:t.getViewable()}}(g=O.prototype).init=function(){var o=this;this.initAdsManagerPromise=A().then(function(){return o.destroyed()?null:(o.adsLoaderManager=new u(o.player.version,o.options,o.streamType),o.player.trigger("adManager",{adManager:o.adsLoaderManager.adsManager}),o.player.trigger("adsManager",{adsManager:o.adsLoaderManager.adsManager}),o.adsLoaderManager)}).catch(function(e){return o.asyncError(e)}),this.adsLoadedPromise=this.initAdsManagerPromise.then(function(){return o.adsLoaderManager.open(o.player,o.options)}).then(function(e){if(o.destroyed())return null;if(e.success){o.trigger("adRequest",{client:E,networkid:e.response.networkId});var t=o.adsLoaderManager.currentAdContext;o.instreamProvider.setProxy(t);for(var i=t.getTemporalSlots(),s=[],r=0;r<i.length;r++){var n=i[r];switch(n.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:o.slots.prerolls.push(n);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:o.slots.midrolls.push(n);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:o.slots.midrolls.push(n),s.push({begin:n.getTimePosition(),text:o.options.cuetext,cueType:"ads"});break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:o.slots.postrolls.push(n)}}o.player.addCues(s),o.registerEvents(t),t.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL)}else o.asyncError(e);return o.slots.prerolls.length&&o.utils.addClass(o.player.getContainer(),a),e}).catch(function(e){return o.asyncError(e)})},g.registerEvents=function(e){var t=this;e.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,function(e){return t.adStarted(e)}),e.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,function(e){return t.adSlotComplete(e)}),e.addEventListener(tv.freewheel.SDK.EVENT_AD,function(e){return t.allAdEvent(e)})},g.startFullscreen=function(e){this.sendFullscreenEvent(e,!0)},g.endFullscreen=function(e){this.sendFullscreenEvent(e,!1)},g.sendFullscreenEvent=function(e,t){this.blockingInstreamPlayer&&this.blockingInstreamPlayer.trigger("fullscreenchange",{target:e.target,jwstate:t})},g.adErrorEventObject=function(e){if(60003===e.adErrorCode)return e;var t=e.adInstance,i=tv?e[tv.freewheel.SDK.INFO_KEY_ERROR_INFO]:"FreeWheel SDK unavailable";return{id:t?t.getAdId():void 0,client:E,message:"Ad Error: "+i,code:e[tv.freewheel.SDK.INFO_KEY_ERROR_CODE],module:e[tv.freewheel.SDK.INFO_KEY_ERROR_MODULE]}},g.adEventObject=function(e){var t=this.currentSlot,i={client:E};if(t&&(i.tag=t.getCustomId()),!(e=!e&&t?t.getCurrentAdInstance():e))return i;var s=t.getTimePositionClass(),r="OVERLAY"===s,n=e.getActiveCreativeRendition(),s=(i.freewheel={ad:{adId:e.getAdId()}},i.adposition=s.toLowerCase().replace("roll",""),i.id=e.getAdId(),i.linear=r?"nonlinear":"linear",i.creativetype="static",i.viewable=this.player.getViewable(),r||(i.creativetype="VPAID"===n.getCreativeApi()?"vpaid-js":n.getContentType()),t.getAdCount());return 1<s&&(i.sequence=t.getAdInstances().indexOf(e)+1,i.podcount=s),e.skipoffset&&(i.skipoffset=e.skipoffset),i},g.allAdEvent=function(e){var t=e.subType;switch(t){case tv.freewheel.SDK.EVENT_AD_IMPRESSION:this.adImpression.call(this,e);break;case tv.freewheel.SDK.EVENT_AD_IMPRESSION_END:this.setTimeoutAdStart.call(this,e);break;case tv.freewheel.SDK.EVENT_AD_PAUSE:case tv.freewheel.SDK.EVENT_AD_RESUME:var i=e.adInstance,s=(null===this.reason&&"VPAID"===i.getActiveCreativeRendition().getCreativeApi()&&(this.reason="external"),t===tv.freewheel.SDK.EVENT_AD_PAUSE?"paused":o);this.setState(i,s);break;case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.adComplete.call(this,e);break;case tv.freewheel.SDK.EVENT_AD_CLICK:this.adClick.call(this,e);break;case tv.freewheel.SDK.EVENT_ERROR:this.adError.call(this,e);break;case tv.freewheel.SDK.EVENT_AD_AUTO_PLAY_BLOCKED:this.pause.call(this,{reason:"autostart"}),this.currentSlot&&this.instreamProvider.trigger("playAttemptFailed")}},g.setupSkipButton=function(e){var t=this.options.config.skipoffset,i="POSTROLL"===e.slot.getTimePositionClass()?-1:e.slot.getTimePosition(),s=this.adsLoaderManager.tagMap;s&&(s=s[i])&&void 0!==s.skipoffset&&(t=s.skipoffset),void 0!==t&&this.blockingInstreamPlayer&&(this.blockingInstreamPlayer.off(d,this.adSkip,this),e.adInstance.skipoffset=t,this.blockingInstreamPlayer.setupSkipButton(t,this.options,this.utils.noop),this.blockingInstreamPlayer.on(d,this.adSkip,this))},g.adStarted=function(e){var t=this,i=e.slot.getTimePositionClass();i!==tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY&&(this.player.trigger(s,m(s,this.player,i)),this.blockingInstreamPlayer.on("destroyed",function(){t.player.trigger(l,m(l,t.player,i))}))},g.adImpression=function(e){clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),clearTimeout(this.adBlockTimeout);var t=e.adInstance,i=this.adEventObject(t),s="VPAID"===t.getActiveCreativeRendition().getCreativeApi();this.utils.removeClass(this.player.getContainer(),r),this.utils.toggleClass(this.player.getContainer(),n,s),this.isPreroll(i)&&(this._qoe.tick("adImpression"),i.timeLoading=this._qoe.between("adLoading","adImpression")),this.updateAdPosition(t),this.progressInterval(this.currentSlot),this.setupSkipButton(e),this.setupNonlinearContainer(),this.resize(),this.trigger("adImpression",i),s&&this.trigger("adStarted",i),t.getCompanionAdInstances().length&&((s=this.utils.extend({},i)).companions=t.getCompanionAdInstances(),this.trigger("adCompanions",s)),this.setState(e.adInstance,o)},g.setTimeoutAdStart=function(){var t=this;clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),this.timeoutAdStart=setTimeout(function(){var e;t.destroyed()||((e=t.adEventObject()).message="Ad Error: Creative timeout",t.trigger(w,e),t.currentSlot.skipCurrentAd())},this.options.loadVideoTimeout)},g.setAdBlockTimeout=function(){var e=this;this.player.getAdBlock()&&(clearTimeout(this.adBlockTimeout),this.adBlockTimeout=setTimeout(function(){e.destroyed()||e.adError({id:void 0,client:E,message:"Ad playback blocked by an ad blocker",code:900,adErrorCode:60003})},this.options.adBlockTimeout))},g.setVideoState=function(e){var t,e=e.type;this.adsLoaderManager&&this.adsLoaderManager.currentAdContext&&(t={idle:tv.freewheel.SDK.VIDEO_STATE_STOPPED,play:tv.freewheel.SDK.VIDEO_STATE_PLAYING,pause:tv.freewheel.SDK.VIDEO_STATE_PAUSED,beforeComplete:tv.freewheel.SDK.VIDEO_STATE_COMPLETED},this.adsLoaderManager.currentAdContext.setVideoState(t[e]))},g.adResume=function(e){e=e.reason;this.hasResumed||(this.reason=e,this.currentSlot.resume()),this.hasResumed=!1},g.adSkip=function(){var e=this.currentSlot;e.getCurrentAdInstance()&&(clearInterval(this.progressIntervalId),this.trigger(d,this.adEventObject()),e.skipCurrentAd())},g.stopAd=function(){var e=this.currentSlot;e&&(clearInterval(this.progressIntervalId),this.trigger(d,this.adEventObject()),e.stop())},g.adComplete=function(e){clearInterval(this.progressIntervalId),this.trigger("adComplete",this.adEventObject(e.adInstance))},g.adSlotComplete=function(e){var t=this,e=e.slot;e&&"POSTROLL"===e.getTimePositionClass()?setTimeout(function(){t.stopBlocking(),t.nonlinearContainerId=null,t.destroy()},0):(this.stopBlocking(),this.nonlinearContainerId=null)},g.adClick=function(e){this.trigger("adClick",this.adEventObject(e.adInstance)),this.pause({reason:"clickthrough"})},g.adError=function(e){var t=this,i=(this.options.debug&&console.error(e),this.adErrorEventObject(e)),e=(900===i.code&&(this.timeoutAdStart=setTimeout(function(){return t.destroy()},0)),e?e.adInstance:null);e&&this.isPreroll(this.adEventObject(e))&&(this._qoe.tick("adError"),i.timeLoading=this._qoe.between("adLoading","adError")),this.trigger(w,i)},g.updateAdPosition=function(e){this.instreamProvider&&this.instreamProvider.trigger(y,{position:Math.max(e.getPlayheadTime(),0),duration:e.getDuration()})},g.prepareToPlayAd=function(e){var t;this.destroyed()||(this.blockingInstreamPlayer?(t=e?"":this.options.loadingAd,this.blockingInstreamPlayer.setText(t)):this.startBlocking(e))},g.addMobileListeners=function(){var t=this;Object.keys(this.mobileEventListeners).forEach(function(e){t.video.addEventListener(e,t.mobileEventListeners[e])})},g.removeMobileListeners=function(){var t=this;Object.keys(this.mobileEventListeners).forEach(function(e){t.video.removeEventListener(e,t.mobileEventListeners[e])})},g.addPlayerListeners=function(){this.player.on(this.playerEventListeners,this)},g.removePlayerListeners=function(){this.player.off(this.playerEventListeners,this)},g.startBlocking=function(e){var t=this;this.blockingInstreamPlayer||(this._qoe.tick("adLoading"),clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),clearTimeout(this.adBlockTimeout),this.timeoutAdLoad=setTimeout(function(){var e;t.destroyed()||(t.currentSlot&&t.currentSlot.stop(),(e=t.adEventObject()).message="Ad Error: Request timeout",t.trigger(w,e),t.stopBlocking())},this.options.requestTimeout),this.utils.addClass(this.player.getContainer(),a),this.blockingInstreamPlayer=this.player.createInstream().init(),this.video=this.instreamProvider.video=this.blockingInstreamPlayer.getMediaElement(),this.video.addEventListener("mousedown",D),this.video.addEventListener("pointerdown",D),this.player.getPip()&&this.player.requestPip(this.video),e=e?"":this.options.loadingAd,this.blockingInstreamPlayer.setText(e),this.blockingInstreamPlayer.applyProviderListeners(this.instreamProvider),this.environment.OS.mobile&&(this.removeMobileListeners(),this.addMobileListeners()))},g.stopBlocking=function(){this.destroyed()||(clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),clearTimeout(this.adBlockTimeout),this.utils.removeClass(this.player.getContainer(),[n,a,r]),this.environment.OS.mobile&&this.removeMobileListeners(),this.blockingInstreamPlayer&&(this.instreamProvider.off(),this.blockingInstreamPlayer.destroy(),this.blockingInstreamPlayer=null,this.video.removeEventListener("mousedown",D),this.video.removeEventListener("pointerdown",D),this.video=this.instreamProvider.video=null))},g.setupNonlinearContainer=function(){var e;this.nonlinearContainerId&&(e=document.getElementById(this.nonlinearContainerId),this.utils.addClass(e,"jw-freewheel-nonlinear-container"),this.style(e,{top:"auto",height:"100%",width:"100%"}))},g.beforePlay=function(e){var t=this,e=(this.reason=e&&e.playReason?e.playReason:i,!this.slots.prerolls.length);this.startBlocking(e),this.utils.addClass(this.player.getContainer(),r),this.initAdsManagerPromise.then(function(){t.setAdBlockTimeout(),t.adsLoaderManager.requestAds(t.player)}),this.adsLoadedPromise.then(function(e){!t.destroyed()&&e.success&&t.playNextAd(t.slots.prerolls)}).catch(function(e){return t.asyncError(e)})},g.playNextAd=function(e){var t;e.length?("OVERLAY"!==(e=this.currentSlot=e.shift()).getTimePositionClass()?(t=!e.getAdCount(),this.prepareToPlayAd(t),this.nonlinearContainerId=null):(this.utils.addClass(this.player.getContainer(),a),this.nonlinearContainerId="_fw_ad_container_html_"+this.currentSlot.getCustomId()+"_"),this.setTimeoutAdStart(),e.play(),"MIDROLL"===e.getTimePositionClass()&&this.setVideoState({type:"pause"})):this.stopBlocking()},g.beforeComplete=function(){this.slots.postrolls.length&&this.playNextAd(this.slots.postrolls)},g.time=function(e){this.slots.midrolls.length&&0<=(e=this.getNextMidRollIndex(e.position))&&(e=[this.slots.midrolls[e]],this.playNextAd(e))},g.progressInterval=function(e){var i,s,r,n,o,a,l,d,h,u,c=this;clearInterval(this.progressIntervalId),e&&(i=e.getCurrentAdInstance(),s=e.getAdInstances().indexOf(i)+1,r=i.getDuration(),n=e.getAdCount(),o=-1,a=this.options.admessage||"",l=this.options.admessagedynamickey,d=this.options.podmessage||"",h=new RegExp("__AD_POD_CURRENT__","g"),u=new RegExp("__AD_POD_LENGTH__","g"),this.progressIntervalId=setInterval(function(){var e=i.getPlayheadTime(),t=r-e;o!==t&&(o=t,c.blockingInstreamPlayer&&(t=a.replace(l,"$1"+Math.round(t)+"$2"),1<n&&(t=d.replace(h,s).replace(u,n)+"  "+t),c.blockingInstreamPlayer.setText(t)),0<r&&((t=c.adEventObject(i)).position=e,t.duration=r,c.trigger("adTime",t),c.updateAdPosition(i)))},250))},g.getNextMidRollIndex=function(e){var t=-1;if(this.playedMidrollIndex.length>=this.slots.midrolls.length)return t;for(var i=0;i<this.slots.midrolls.length&&this.slots.midrolls[i].getTimePosition()<=e;i++)t=i;return this.playedMidrollIndex.indexOf(t)<0&&0<=t?(this.playedMidrollIndex.push(t),t):-1},g.setState=function(e,t){this.currentSlot.getTimePositionClass()!==tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY&&((e=this.adEventObject(e)).newstate=t,null!==this.reason&&(e[t===o?"playReason":"pauseReason"]=this.reason,this.reason=null),this.instreamProvider.trigger("state",e))},g.asyncError=function(e){var t=this;this.destroyed()||(e&&this.adError(e),this.timeoutAdStart=setTimeout(function(){return t.destroy()},0))},g.pause=function(e){e=e.reason;this.currentSlot&&!this.video.paused&&(this.reason=e||i,this.currentSlot.pause())},g.resume=function(e){e=e.reason;this.currentSlot&&this.video.paused&&(this.reason=e||i,this.currentSlot.resume(),this.hasResumed=!0)},g.resize=function(e,t){var i,s=document.getElementById(this.nonlinearContainerId);s&&(s=s.querySelector("iframe"),i=this.player.getSafeRegion(!0),this.style(s,{left:(i.width-s.offsetWidth)/2})),this.adsLoaderManager&&this.adsLoaderManager.currentAdContext&&e&&t&&this.adsLoaderManager.currentAdContext.resize(e,t)},g.destroy=function(){clearInterval(this.progressIntervalId),this.off(),this.destroyed()||(this.removePlayerListeners(),this.currentSlot&&this.currentSlot.stop(),this.blockingInstreamPlayer&&(this.blockingInstreamPlayer.off(null,null,this),this.stopBlocking()),this.adsLoaderManager&&this.adsLoaderManager.destroy(),clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),clearTimeout(this.adBlockTimeout),this.nonlinearContainerId=null,this.item=null,this.options=null,this.player.off(null,null,this),this.player=null,this.instreamProvider.off(),this.instreamProvider.setProxy(null),this.instreamProvider=null,this.video=null,this.initAdsManagerPromise=null,this.adsLoadedPromise=null)},g.destroyed=function(){return!this.item},g.isPreroll=function(e){return"pre"===e.adposition&&(void 0===e.podcount||0===e.sequence)};var g,v,C=O;function O(e,t,i,s,r){var n=this;i.utils.extend(this,i.Events),this.item=e,this.options=t,this.streamType=r,this.player=i,this.utils=i.utils,this.style=i.utils.style,this.environment=i.getEnvironment(),this.instreamProvider=s,this.initAdsManagerPromise=null,this.adsLoadedPromise=null,this.blockingInstreamPlayer=null,this.video=null,this.timeoutAdStart=-1,this.timeoutAdLoad=-1,this.adBlockTimeout=-1,this.progressIntervalId=-1,this.nonlinearContainerId=null,this.slots={prerolls:[],midrolls:[],postrolls:[]},this.playedMidrollIndex=[],this.mobileEventListeners={play:function(){return n.adResume({reason:n.reason||"interaction"})},beginFullscreen:function(e){return n.startFullscreen(e)},endFullscreen:function(e){return n.endFullscreen(e)}},this.reason=null,this.playerEventListeners={"idle play pause beforeComplete":this.setVideoState},this.addPlayerListeners(),this._qoe=new i.utils.Timer}function D(e){e.stopPropagation()}g=".jwplayer.jw-flag-ads-freewheel.jw-flag-floating .jw-wrapper,.jwplayer.jw-flag-ads-freewheel.jw-freewheel-before-impression .jw-media video{pointer-events:none}.jwplayer.jw-flag-ads-freewheel.jw-flag-touch.jwplayer.jw-flag-ads-freewheel.jw-state-paused .jw-display-icon-container{display:none}.jwplayer.jw-flag-ads-freewheel.jw-flag-user-inactive.jw-state-playing .jw-freewheel-nonlinear-container{bottom:.5em}.jwplayer.jw-flag-ads-freewheel .jw-freewheel-nonlinear-container{bottom:3.5em;pointer-events:none}.jwplayer.jw-flag-ads-freewheel .jw-freewheel-nonlinear-container iframe{pointer-events:all}.jwplayer.jw-flag-ads-freewheel.jw-flag-time-slider-above .jw-freewheel-nonlinear-container{bottom:66px}","undefined"!=typeof window&&((v=document.createElement("style")).setAttribute("media","screen"),v.innerHTML=g,document.head.appendChild(v)),(window.jwplayerPluginJsonp||window.jwplayer().registerPlugin)(E,"8.1",function(n,o){var i=this,s=n.utils,a=n.getConfig(),e=a.key,l=new T(s,n.Events),t=o.freewheel?o.freewheel.adManagerURL:null,d=0,h=(A(s,t).then(function(){o.debug?tv.freewheel.SDK.setLogLevel(tv.freewheel.SDK.LOG_LEVEL_DEBUG):tv.freewheel.SDK.setLogLevel(tv.freewheel.SDK.LOG_LEVEL_QUIET)}).catch(s.noop),null);function r(){h&&!h.destroyed()&&(h.destroy(),h=null)}function u(){r(),n.setCues([])}function c(e,t){e===y?h.time(t):"beforeComplete"===e&&h.beforeComplete()}s.extend(this,n.Events),this.version="2.2.17",n.pauseAd=function(e,t){h&&(e?h.pause(t||{}):h.resume(t||{}))},n.skipAd=function(){h&&h.adSkip()},n.on("ready",function(){A().catch(function(){g("Ad playback blocked by an ad blocker",2e4)}),v.catch(function(e){g("Ad Error: "+e.message,60002)})},this).on("playlistItem",function(e){var t,i,s,r;d++,t=(e=e).item.streamtype||a.streamtype,e=e.item,r=new _(n.getConfig(),o||{},e),u(),i=r.getAdRules(),s=0===i.frequency&&1===d,i=d>=i.startOn&&(d-i.startOn)%i.frequency==0,s||i?r.getSchedule()&&((h=new C(e,r,n,l,t)).init(),h.on("all",function(e,t){return n.trigger(e,t)}),n.once("beforePlay",function(e){return h.beforePlay(e)},h).on("resize",function(e){var t=e.width,e=e.height;return h.resize(t,e)},h).on("fullscreen",function(){return h.resize()},h).on("all",c,h)):r.adschedule=null},this).on("playlistComplete",function(){u()},this).on("cast",function(e){e.active&&u()},this).on("destroyPlugin",function(){i.destroy()},this);var f,p,m,g=function(e,t){r(),n.off(null,null,i),n.playAd=s.noop,n.trigger(w,{id:"-1",client:E,message:e,code:900,adErrorCode:t,tag:""})},v=(t=s,f=o,I[e=e]||(I[e]=(p=t,(S[m=e]||(S[m]=new Promise(function(e,t){new p.key(m);return t()}))).catch(function(){return{}}).then(function(e){var t,e=!0===f.outstream?(t=!1!==e.canPlayOutstreamAds,"Outstream Ad Limit Reached"):(t=!1!==e.canPlayAds,"Ad Limit Reached");if(!1===t)throw new Error(e);return{message:"Can Play Ads"}}))));v.catch(s.noop),this.destroy=r,this.stopAd=function(){h&&h.stopAd()}})}();
